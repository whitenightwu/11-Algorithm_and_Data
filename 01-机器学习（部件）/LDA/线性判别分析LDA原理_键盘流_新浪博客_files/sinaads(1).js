/*!
 * sinaads
 * @author acelan<xiaobin8[at]staff.sina.com.cn> zhouyi<zhouyi3[at]staff.sina.com.cn>
 * @version 1.8.0
 */

!function(a,b){"use strict";var c=a.sinaadToolkit=a.sinaadToolkit||{VERSION:"1.0.0",mode:-1!==a.location.href.indexOf("__sinaadToolkitDebug__")?"debug":"release",debug:function(){var b="sinaadToolkitDebugContainer",d=a.console||{log:function(a){if(document.body){var c=document.getElementById(b);c||(c=document.createElement("ul"),c.id=b,c.style.cssText="z-index:99999;overflow:auto;height:300px;position:absolute;right:0;top:0;opacity:.9;*filter:alpha(opacity=90);background:#fff;width:500px;",document.body.insertBefore(c,document.body.firstChild));var d=document.createElement("li");d.style.cssText="border-bottom:1px dotted #ccc;line-height:30px;font-size:12px;",d.innerHTML=a+Array.prototype.slice.call(arguments,1).join(" "),c.appendChild(d)}}};return function(a){"debug"===c.mode&&d.log(a,Array.prototype.slice.call(arguments,1))}}(),error:function(b,d){try{c.sio.log("//d00.sina.com.cn/a.gif?"+["type=sinaads_error","msg="+encodeURIComponent(b||(d?d.message:"unknow")),"ref="+encodeURIComponent(c.url.top),"ja="+(navigator.javaEnabled()?1:0),"ck="+(navigator.cookieEnabled?1:0),"ds="+a.screen.width+"x"+a.screen.height,"ua="+encodeURIComponent(navigator.appVersion),"pf="+navigator.platform,"ts="+c.now()].join("&"))}catch(d){}if("debug"===c.mode)throw new Error(b+(d?":"+d.message:""))},now:function(){return+new Date},rnd:function(){return Math.floor(2147483648*Math.random()).toString(36)},rand:function(a,b){return Math.floor(a+Math.random()*(b-a+1))},hash:function(a){for(var b,c=0,d=0;!isNaN(b=a.charCodeAt(d++));)c=(c<<5)-c+b,c&=c;return Math.abs(c).toString(36)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isString:function(a){return"[object String]"===Object.prototype.toString.call(a)},isNull:function(a){return void 0===a||null===a},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isNumber:function(a){return"[object Number]"===Object.prototype.toString.call(a)&&isFinite(a)},globalEval:function(b){b&&/\S/.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},underPop:function(b,d,e,f){function g(){var h=a.open("about:blank",d,"width="+e+",height="+f);h.blur(),h.opener.focus(),h.location=b,c.event.un(document.body,"click",g)}try{g()}catch(h){c.debug("sinaads:Cannot pop window, use click event."),c.event.on(document.body,"click",g)}},scrollTop:function(){return document.documentElement.scrollTop||a.pageYOffset||document.body.scrollTop}};c.RESOURCE_URL=c.RESOURCE_URL||["//d1.sina.com.cn/litong/zhitou/sinaads","//d2.sina.com.cn/litong/zhitou/sinaads","//d3.sina.com.cn/litong/zhitou/sinaads","//d4.sina.com.cn/litong/zhitou/sinaads","//d5.sina.com.cn/litong/zhitou/sinaads","//d6.sina.com.cn/litong/zhitou/sinaads","//d7.sina.com.cn/litong/zhitou/sinaads","//d8.sina.com.cn/litong/zhitou/sinaads","//d9.sina.com.cn/litong/zhitou/sinaads"][c.rand(0,8)],c.TOOLKIT_URL=c.RESOURCE_URL+"/release/sinaadToolkit.js",c.VPLAYER_URL=c.RESOURCE_URL+"/release/SinaWindowsPlayer.swf",c.browser=c.browser||function(c){var d={android:/(Android)(\s+([\d.]+))*/i.test(c),ipad:/(iPad).*OS\s([\d_]+)/i.test(c),webos:/(webOS|hpwOS)[\s\/]([\d.]+)/i.test(c),kindle:/Kindle\/([\d.]+)/i.test(c),silk:/Silk\/([\d._]+)/i.test(c),blackberry:/(BlackBerry).*Version\/([\d.]+)/i.test(c),bb10:/(BB10).*Version\/([\d.]+)/i.test(c),rimtabletos:/(RIM\sTablet\sOS)\s([\d.]+)/i.test(c),playbook:/PlayBook/i.test(c),chrome:/chrome\/(\d+\.\d+)/i.test(c)?+RegExp.$1:b,firefox:/firefox\/(\d+\.\d+)/i.test(c)?+RegExp.$1:b,ie:/msie (\d+\.\d+)/i.test(c)?document.documentMode||+RegExp.$1:b,isGecko:/gecko/i.test(c)&&!/like gecko/i.test(c),isStrict:"CSS1Compat"===document.compatMode,isWebkit:/webkit/i.test(c),opera:/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(c)?+(RegExp.$6||RegExp.$2):b};d.iphone=!d.ipad&&/(iPhone\sOS)\s([\d_]+)/i.test(c),d.touchpad=d.webos&&/TouchPad/.test(c),d.tablet=!!(d.ipad||d.playbook||d.android&&!/Mobile/.test(c)||d.firefox&&/Tablet/.test(c)),d.phone=!(d.tablet||!(d.android||d.iphone||d.webos||d.blackberry||d.bb10||d.chrome&&/Android/.test(c)||d.chrome&&/CriOS\/([\d.]+)/.test(c)||d.firefox&&/Mobile/.test(c)));try{/(\d+\.\d+)/.test(a.external.max_version)&&(d.maxthon=+RegExp.$1)}catch(e){}return d.mobile=d.tablet||d.phone||d.touchpad,d.safari=/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(c)&&!/chrome/i.test(c)?+(RegExp.$1||RegExp.$2):b,d.isSupportFixed=!d.ie||d.ie>=7,d}(navigator.userAgent),c.systemInfo={screenSize:a.screen?a.screen.width+"x"+a.screen.height:"-",language:navigator.systemLanguage||navigator.browserLanguage||navigator.language||navigator.userLanguage||"-",platform:navigator.platform||"-",flashVersion:function(){var b,d=0;if(c.browser.ie)try{if(b=new a.ActiveXObject("ShockwaveFlash.ShockwaveFlash")){1;var e=b.GetVariable("$version");d=parseInt(e.split(" ")[1].split(",")[0],10)}}catch(h){}else if(navigator.plugins&&navigator.plugins.length>0&&(b=navigator.plugins["Shockwave Flash"])){1;for(var f=b.description.split(" "),g=0;g<f.length;++g)isNaN(parseInt(f[g],10))||(d=parseInt(f[g],10))}return d||0}(),osVersion:"-"},c.array=c.array||{remove:function(a,b){for(var c=a.length;c--;)c in a&&a[c]===b&&a.splice(c,1);return a},each:function(a,b,d){a=c.array.ensureArray(a);var e,f,g=a.length;if("function"==typeof b)for(f=0;f<g&&(e=a[f],!1!==b.call(d||a,e,f));f++);return a},ensureArray:function(a){return c.isArray(a)?a:c.isNull(a)?[]:[a]}},c.string=c.string||function(){var a={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},b=/\uffff/.test("ï¿¿")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;return{encodeHTML:function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},decodeHTML:function(a){return String(a).replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&#([\d]+);/g,function(a,b){return String.fromCharCode(parseInt(b,10))})},formalString:function(c){var d=[];return d.push(c.replace(b,function(b){if(b in a)return a[b];var c=b.charCodeAt(0),d="\\u";return 16>c?d+="000":256>c?d+="00":4096>c&&(d+="0"),a[b]=d+c.toString(16),a[b]})),'"'+d.join("")+'"'},format:function(a,b){a=String(a);var c=Array.prototype.slice.call(arguments,1),d=Object.prototype.toString;return c.length?(c=1===c.length&&null!==b&&/\[object Array\]|\[object Object\]/.test(d.call(b))?b:c,a.replace(/#\{(.+?)\}/g,function(a,b){var e=c[b];return"[object Function]"===d.call(e)&&(e=e(b)),void 0===e?"":e})):a},toCamelCase:function(a){return a.indexOf("-")<0&&a.indexOf("_")<0?a:a.replace(/[-_][^-_]/g,function(a){return a.charAt(1).toUpperCase()})}}}(),c.string.trim=c.string.trim||function(){var a=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");return function(b){return b=b||"",String(b).replace(a,"")}}(),c.number=c.number||{pad:function(a,b){var c="",d=a<0,e=String(Math.abs(a));return e.length<b&&(c=new Array(b-e.length+1).join("0")),(d?"-":"")+c+e}},c.date=c.date||{format:function(a,b){function d(a,c){b=b.replace(a,c)}if("string"!=typeof b)return a.toString();var e=c.number.pad,f=a.getFullYear(),g=a.getMonth()+1,h=a.getDate(),i=a.getHours(),j=a.getMinutes(),k=a.getSeconds();return d(/yyyy/g,e(f,4)),d(/yy/g,e(parseInt(f.toString().slice(2),10),2)),d(/MM/g,e(g,2)),d(/M/g,g),d(/dd/g,e(h,2)),d(/d/g,h),d(/HH/g,e(i,2)),d(/H/g,i),d(/hh/g,e(i%12,2)),d(/h/g,i%12),d(/mm/g,e(j,2)),d(/m/g,j),d(/ss/g,e(k,2)),d(/s/g,k),b}},c.object=c.object||{map:function(a,b){var c={};for(var d in a)a.hasOwnProperty(d)&&(c[d]=b(a[d],d));return c}},c.json=c.json||{parse:function(a){return new Function("return ("+a+")")()},stringify:function(){function a(a){return/["\\\x00-\x1f]/.test(a)&&(a=a.replace(/["\\\x00-\x1f]/g,function(a){var b=f[a];return b||(b=a.charCodeAt(),"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16))})),'"'+a+'"'}function b(a){var b,d,e,f=["["],g=a.length;for(d=0;d<g;d++)switch(typeof(e=a[d])){case"undefined":case"function":case"unknown":break;default:b&&f.push(","),f.push(c.json.stringify(e)),b=1}return f.push("]"),f.join("")}function d(a){return a<10?"0"+a:a}function e(a){return'"'+a.getFullYear()+"-"+d(a.getMonth()+1)+"-"+d(a.getDate())+"T"+d(a.getHours())+":"+d(a.getMinutes())+":"+d(a.getSeconds())+'"'}var f={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(d){switch(typeof d){case"undefined":return"undefined";case"number":return isFinite(d)?String(d):"null";case"string":return a(d);case"boolean":return String(d);default:if(null===d)return"null";if(d instanceof Array)return b(d);if(d instanceof Date)return e(d);var f,g,h=["{"],i=c.json.stringify;for(var j in d)if(Object.prototype.hasOwnProperty.call(d,j))switch(typeof(g=d[j])){case"undefined":case"unknown":case"function":break;default:f&&h.push(","),f=1,h.push(i(j)+":"+i(g))}return h.push("}"),h.join("")}}}()},c.event=c.event||{on:function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,!1)},un:function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener&&a.removeEventListener(b,c)}},c.cookie=c.cookie||{_isValidKey:function(a){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(a)},_getRaw:function(a){if(c.cookie._isValidKey(a)){var b=new RegExp("(^| )"+a+"=([^;]*)(;|$)"),d=b.exec(document.cookie);if(d)return d[2]||null}return null},_setRaw:function(a,b,d){if(c.cookie._isValidKey(a)){d=d||{};var e=d.expires;"number"==typeof d.expires&&(e=new Date,e.setTime(e.getTime()+d.expires)),document.cookie=a+"="+b+(d.path?"; path="+d.path:"")+(e?"; expires="+e.toGMTString():"")+(d.domain?"; domain="+d.domain:"")+(d.secure?"; secure":"")}},get:function(a){var b=c.cookie._getRaw(a);return"string"==typeof b?b=decodeURIComponent(b):null},set:function(a,b,d){c.cookie._setRaw(a,encodeURIComponent(b),d)},remove:function(a,b){b=b||{},b.expires=new Date(0),c.cookie._setRaw(a,"",b)}},c.storage=c.storage||function(){var b={};c.event.on(a,"beforeunload",function(){for(var a in b)try{c.storage.remove(a),delete b[a]}catch(d){}});var d={id:"sinaadToolkitUserDataContainer",name:location.hostname,init:function(){var a=document.getElementById(d.id);if(!a)try{a=document.createElement("input"),a.type="hidden",a.style.display="none",a.addBehavior("#default#userData"),document.body.insertBefore(a,document.body.firstChild);var b=new Date;b.setDate(b.getDate()+365),a.expires=b.toUTCString()}catch(e){return c.debug("sinaadToolkit.storage:userData init fail, "+e.message),null}return a},setItem:function(a,e,f){var g=d.init();g&&(g.load(d.name),g.setAttribute(a,e+(f?";expires="+(c.now()+f):"")),g.save(d.name)),f||(b[a]=1)},getItem:function(a){var b=d.init();return b?(b.load(d.name),b.getAttribute(a)):null},removeItem:function(a){var b=d.init();b&&(b.load(d.name),b.removeAttribute(a),b.save(d.name))}},e={getItem:function(b){return a.localStorage.getItem(b)},setItem:function(d,e,f){a.localStorage.setItem(d,e+(f?";expires="+(c.now()+f):"")),f||(b[d]=1)},removeItem:function(b){a.localStorage.removeItem(b)}},f={getItem:function(a){return c.cookie.get(a)},setItem:function(a,b,d){c.cookie.set(a,b,{expires:d||0})},removeItem:function(a){c.cookie.remove(a)}},g=a.localStorage?e:c.browser.ie&&c.browser.ie<8?d:f;try{g.setItem("sinaads_test_ls","support")}catch(h){g=f}return{get:function(a){try{var b=g.getItem(a);return b?(c.debug("sinaadToolkit.storage.get:get value of "+a+":"+b),b=b.split(";expires="),b[1]&&c.now()>parseInt(b[1],10)?(g.removeItem(a),null):b[0]):null}catch(h){return c.debug("sinaadToolkit.storage.get:"+h.message),null}},set:function(a,b,d){try{g.setItem(a,b,d)}catch(h){c.error("sinaadToolkit.storage.set:"+h.message)}},remove:function(a){try{g.removeItem(a)}catch(h){c.error("sinaadToolkit.storage.remove:"+h.message)}}}}(),c.url=c.url||{protocol:function(){return"https:"===a.location.protocol?"https://":"http://"}(),ensureURL:function(a){return a=c.string.trim(a),a?/^((http|https):)*\/\//.test(a)?a:"//"+a:""},createURL:function(a,b,c){return[c?"https":"http","://",a,b].join("")},top:function(){var b;try{b=a.top.location.href}catch(d){}return b=b||(a.top===a.self?a.location.href:a.document.referrer),b||c.error("sinaadToolkit:Cannot get pageurl on which ad locates."),b}(),fortp:function(b,d){d=d||a.event;for(var e,f=b,g=10;f&&f.tagName&&g;){if("INS"===f.tagName.toUpperCase()&&-1!==f.className.indexOf("sinaads")){e=f.getAttribute("data-ad-pdps");break}f=f.parentNode,g--}var h=document.documentElement||document,i=h.body,j=d.pageX||d.clientX+(h&&h.scrollLeft||i&&i.scrollLeft||0)-(h&&h.clientLeft||i&&i.clientLeft||0),k=d.pageY||d.clientY+(h&&h.scrollTop||i&&i.scrollTop||0)-(h&&h.clientTop||i&&i.clientTop||0),l=b.getAttribute("data-ss");l=(l||"").split("").reverse().join("");var m,n={left:0,top:0};return e&&(m=a._sinaadsCacheDom[e])&&(n=c.dom.getPosition(m)),-1===l.indexOf("//sax.sina.com.cn")&&-1===l.indexOf("//saxn.sina.com.cn")||(b.href=l+"&am="+encodeURIComponent("{clkx:"+(j-n.left)+",clky:"+(k-n.top)+"}")),!0}},c.dom=c.dom||{get:function(a){return a?"string"==typeof a||a instanceof String?document.getElementById(a):!a.nodeName||1!==a.nodeType&&9!==a.nodeType?null:a:null},addClass:function(a,b){a=c.dom.get(a);for(var d=b.split(/\s+/),e=a.className,f=" "+e+" ",g=0,h=d.length;g<h;g++)f.indexOf(" "+d[g]+" ")<0&&(e+=(e?" ":"")+d[g]);return a.className=e,a},getDocument:function(a){return 9===a.nodeType?a:a.ownerDocument||a.document},getComputedStyle:function(a,b){var d,e=c.dom.getDocument(a);return e.defaultView&&e.defaultView.getComputedStyle&&(d=e.defaultView.getComputedStyle(a,null))?d[b]||d.getPropertyValue(b):""},getCurrentStyle:function(a,b){return a.style[b]||(a.currentStyle?a.currentStyle[b]:"")||c.dom.getComputedStyle(a,b)},_styleFixer:{},_styleFilter:[],getStyle:function(a,b){var d,e=c.dom;a=e.get(a),b=c.string.toCamelCase(b);var f=a.style[b]||(a.currentStyle?a.currentStyle[b]:"")||e.getComputedStyle(a,b);return f&&"auto"!==f||(d=e._styleFixer[b])&&(f=d.get?d.get(a,b,f):c.dom.getStyle(a,d)),(d=e._styleFilter)&&(f=d.filter(b,f,"get")),f},getPosition:function(a){a=c.dom.get(a);var b,d,e=c.dom.getDocument(a),f=c.browser,g=c.dom.getStyle,h={left:0,top:0},i=f.ie&&!f.isStrict?e.body:e.documentElement;if(a===i)return h;if(a.getBoundingClientRect){d=a.getBoundingClientRect(),h.left=Math.floor(d.left)+Math.max(e.documentElement.scrollLeft,e.body.scrollLeft),h.top=Math.floor(d.top)+Math.max(e.documentElement.scrollTop,e.body.scrollTop),h.left-=e.documentElement.clientLeft,h.top-=e.documentElement.clientTop;var j=e.body,k=parseInt(g(j,"borderLeftWidth"),10),l=parseInt(g(j,"borderTopWidth"),10);f.ie&&!f.isStrict&&(h.left-=isNaN(k)?2:k,h.top-=isNaN(l)?2:l)}else{b=a;do{if(h.left+=b.offsetLeft,h.top+=b.offsetTop,f.isWebkit>0&&"fixed"===g(b,"position")){h.left+=e.body.scrollLeft,h.top+=e.body.scrollTop;break}b=b.offsetParent}while(b&&b!==a);for((f.opera>0||f.isWebkit>0&&"absolute"===g(a,"position"))&&(h.top-=e.body.offsetTop),b=a.offsetParent;b&&b!==e.body;)h.left-=b.scrollLeft,f.opera&&"TR"===b.tagName||(h.top-=b.scrollTop),b=b.offsetParent}return h},fill:function(){var a=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g;return function(b,d){function e(){h++<i&&(f=g[0])&&(c.browser.ie<=6&&f.defer?e():f.src?c.sio.loadScript(f.src,e,{charset:"gb2312"}):(c.globalEval((f.text||f.textContent||f.innerHTML||"").replace(a,"")),e()),f.parentNode&&f.parentNode.removeChild(f))}if(b){b.innerHTML='<i style="display:none;">Hack ie first node is script</i>'+d;var f,g=b.getElementsByTagName("script"),h=0,i=g.length;e()}}}(),insertHTML:function(a,b,d){var e,f;return a.insertAdjacentHTML&&!c.browser.opera?a.insertAdjacentHTML(b,d):(e=a.ownerDocument.createRange(),b=b.toUpperCase(),"AFTERBEGIN"===b||"BEFOREEND"===b?(e.selectNodeContents(a),e.collapse("AFTERBEGIN"===b)):(f="BEFOREBEGIN"===b,e[f?"setStartBefore":"setEndAfter"](a),e.collapse(f)),e.insertNode(e.createContextualFragment(d))),a}},c.dom._styleFilter.filter=function(a,b,d){for(var e,f=0,g=c.dom._styleFilter;e=g[f];f++)(e=e[d])&&(b=e(a,b));return b},c.page=c.page||{getScrollTop:function(){var b=document;return a.pageYOffset||b.documentElement.scrollTop||b.body.scrollTop},getScrollLeft:function(){var b=document;return a.pageXOffset||b.documentElement.scrollLeft||b.body.scrollLeft},getViewHeight:function(){var a=document;return("BackCompat"===a.compatMode?a.body:a.documentElement).clientHeight},getViewWidth:function(){var a=document;return("BackCompat"===a.compatMode?a.body:a.documentElement).clientWidth},createStyleSheet:function(a){var b,d=a||{},e=d.document||document;if(c.browser.ie)return d.url||(d.url=""),e.createStyleSheet(d.url,d.index);if(b="<style type='text/css'></style>",d.url&&(b="<link type='text/css' rel='stylesheet' href='"+d.url+"'/>"),c.dom.insertHTML(e.getElementsByTagName("HEAD")[0],"beforeEnd",b),d.url)return null;var f=e.styleSheets[e.styleSheets.length-1],g=f.rules||f.cssRules;return{self:f,rules:f.rules||f.cssRules,addRule:function(a,b,c){return f.addRule?f.addRule(a,b,c):f.insertRule?(isNaN(c)&&(c=g.length),f.insertRule(a+"{"+b+"}",c)):void 0},removeRule:function(a){f.removeRule?f.removeRule(a):f.deleteRule&&(isNaN(a)&&(a=0),f.deleteRule(a))}}},injectStyles:function(a){var b=c.page.createStyleSheet();for(var d in a)b.addRule(d,a[d])}},c.Deferred=c.Deferred||function(a){function b(a,b,d,f){return function(){if("function"==typeof d)try{var g=d.apply(a,arguments);e.isPromise(g)?g.then(function(){b.resolve.apply(b,arguments)},function(){b.reject.apply(b,arguments)}):b.resolve.call(b,g)}catch(h){c.error("sinaadToolkit.Deferred:Error occurred in _pipe. "+h.message),b.reject(h)}else b[f].apply(b,a._args)}}function d(b){if("pending"!==b._state){var d="resolved"===b._state?b._resolves.slice():b._rejects.slice();setTimeout(function(){a.array.each(d,function(a){try{a.apply(b,b._args)}catch(d){c.error("sinaadToolkit.Deferred:Error occurred in _flush. "+d.message)}})},0),b._resolves=[],b._rejects=[]}}function e(){this._state="pending",this._args=null,this._resolves=[],this._rejects=[]}return e.prototype={resolve:function(){"pending"===this._state&&(this._state="resolved",this._args=[].slice.call(arguments),d(this))},reject:function(){"pending"===this._state&&(this._state="rejected",this._args=[].slice.call(arguments),d(this))},then:function(a,c){var f=new e;return this._resolves.push(b(this,f,a,"resolve")),this._rejects.push(b(this,f,c,"reject")),d(this),f},done:function(a){return this.then(a)},fail:function(a){return this.then(null,a)}},e.isPromise=function(a){return a&&"function"==typeof a.then},e}(c),c.throttle=c.throttle||function(a,b,c,d){var e,f,g,h=+new Date,i=0,j=0,k=null,l=function(){j=h,a.apply(f,g)};return function(){h=+new Date,f=this,g=arguments,e=h-(d?i:j)-b,clearTimeout(k),d?c?k=setTimeout(l,b):e>=0&&l():e>=0?l():c&&(k=setTimeout(l,-e)),i=h}},c.debounce=c.debounce||function(a,b,d){return c.throttle(a,b,d,!0)},c.sio=c.sio||function(){function b(a,b,c){a.setAttribute("type","text/javascript"),c&&a.setAttribute("charset",c),a.setAttribute("src",b),document.getElementsByTagName("head")[0].appendChild(a)}function d(a){a&&a.parentNode&&a.parentNode.removeChild(a),a=null}return{IMG_1_1:"http://d00.sina.com.cn/a.gif",loadScript:function(a,c,e){var f,g=document.createElement("SCRIPT"),h=0,i=e||{},j=i.charset||"utf-8",k=c||function(){},l=i.timeout||0;g.onload=g.onreadystatechange=function(){if(!h){var a=g.readyState;if(void 0===a||"loaded"===a||"complete"===a){h=1;try{k(),clearTimeout(f)}finally{g.onload=g.onreadystatechange=null,d(g)}}}},l&&(f=setTimeout(function(){g.onload=g.onreadystatechange=null,d(g),i.onfailure&&i.onfailure()},l)),b(g,a,j)},jsonp:function(e,f,g){function h(b){return function(){try{b?n.onfailure&&n.onfailure():(f.apply(a,arguments),clearTimeout(j)),a[i]=null,delete a[i]}catch(c){}finally{d(l)}}}var i,j,k,l=document.createElement("SCRIPT"),m="_sinaads_cbs_",n=g||{},o=n.charset||"utf-8",p=n.queryField||"callback",q=n.timeout||0,r=new RegExp("(\\?|&)"+p+"=([^&]*)");c.isString(f)?i=f:(k=r.exec(e))&&(i=k[2]),i||(i=m+Math.floor(2147483648*Math.random()).toString(36)),c.isFunction(f)&&(a[i]=h(0)),q&&(j=setTimeout(h(1),q)),e=e.replace(r,"$1"+p+"="+i),e.search(r)<0&&(e+=(e.indexOf("?")<0?"?":"&")+p+"="+i),b(l,e,o)},log:function(b,d){var e=new Image,f="_sinaads_sio_log_"+c.rnd();a[f]=e,e.onload=e.onerror=e.onabort=function(){e.onload=e.onerror=e.onabort=null,a[f]=null,e=null},e.src=b+(d?"":(b.indexOf("?")>0?"&":"?")+f)}}}(),c.swf=c.swf||{uid:0,getMovie:function(b,d){d=d||a;var e,f=d.document[b];return 9===c.browser.ie?f&&f.length?1===(e=c.array.remove(c.toArray(f),function(a){return"embed"!==a.tagName.toLowerCase()})).length?e[0]:e:f:f||d[b]},createHTML:function(a){a=a||{};var b,d,e={},f=c.string.encodeHTML;for(d in a)e[d]=a[d];a=e;var g=a.vars;if("string"==typeof g)a.flashvars=g;else{var h=[];for(d in g)b=g[d],h.push(d+"="+encodeURIComponent(b));a.flashvars=h.join("&")}var i=[];a.name=a.id||"sinaadtk_swf_uid_"+c.swf.uid++,a.align=a.align||"middle",a.src=a.url||"",a.type="application/x-shockwave-flash",a.pluginspage="http://www.macromedia.com/go/getflashplayer",delete a.id,delete a.url,delete a.vars,i.push("<embed");var j;for(d in a)if((b=a[d])||!1===b||0===b){if(new RegExp("^salign$","i").test(d)){j=b;continue}i.push(" ",d,'="',f(b),'"')}return j&&i.push(' salign="',f(j),'"'),i.push("/>"),i.join("")},hackAutoPlay:function(a,b){a.innerHTML=b}},c.iframe=c.iframe||{uid:0,init:function(a,b,c,d){var e=d?'"':"",f=e+"0"+e;a.width=e+b+e,a.height=e+c+e,a.frameborder=f,a.marginwidth=f,a.marginheight=f,a.vspace=f,a.hspace=f,a.allowtransparency=e+"true"+e,a.scrolling=e+"no"+e},createHTML:function(a){var b=[];return a.name=a.name||a.id||"sinaadtk_iframe_uid_"+c.iframe.uid++,c.object.map(a,function(a,c){b.push(" "+c+'="'+(null===a?"":a)+'"')}),"<iframe"+b.join("")+"></iframe>"},fill:function(b,d){var e,f=c.browser.ie;if(f){try{e=!!b.contentWindow.document}catch(h){e=!1}if(e)try{f>6?(a.frames[b.name].contents=d,b.src='javascript:window["contents"]'):(a.frames[b.name].contents=d,b.src='javascript:document.write(window["contents"]);/* document.close(); */')}catch(h){c.error("sinaadToolkit.iframe.fill: cannot fill iframe content in ie, ",h)}else try{var g="sinaads-ad-iframecontent-"+c.rnd();a[g]=d,d='var adContent = window.parent["'+g+'"];window.parent["'+g+'"] = null;document.write(adContent);',d=c.browser.ie&&c.browser.ie<=6?"window.onload = function() {document.write(\\'<sc\\' + \\'ript type=\"text/javascript\">document.domain = \""+document.domain+'";'+d+"<\\/scr\\' + \\'ipt>\\');/*document.close();*/};":'document.domain = "'+document.domain+'";'+d+"/*document.close();*/";b.src='javascript:\'<script type="text/javascript">'+d+"</"+"script"+">'"}catch(h){a[g]=null,c.error("sinaadToolkit.iframe.fill:Cannot fill iframe in IE by modifying the document.domain. ",h)}}else try{e=b.contentWindow?b.contentWindow.document:b.contentDocument,c.browser.firefox&&e.open("text/html","replace"),e.write(d),e.close()}catch(h){c.error("sinaadToolkit.iframe.fill:Cannot fill iframe by regular method. ",h)}}},c.monitor=c.monitor||{parseTpl:function(){var a=/\{__([a-zA-Z0-9]+(_*[a-zA-Z0-9])*)__\}/g;return function(b,d){return d=d||{},d.timestamp=d.timestamp||c.now(),b?b.replace(a,function(a,b){return b.indexOf("adbox_")>0?(b=b.split("_"),"{__mo"+b[2]+"__}"):d[b]||a}):""}}(),createImpressMonitor:function(a){var b=[];return c.array.each(a,function(a){var d={};c.iframe.init(d,1,1,!1),d.src=a,d.style="display:none;",b.push(c.iframe.createHTML(d))}),b.join("")},createTrackingMonitor:function(a,b){if(!a)return"";var d=c.url.ensureURL(a);return c.array.each(b,function(a){(a=c.url.ensureURL(a))&&(d=a+encodeURIComponent(d))}),d},stringify:function(a){var b=[];return c.array.each(a,function(a){a&&b.push(encodeURIComponent(a))}),b.join("|")},parse:function(a){var b=[],d=(a||"").split("|");return c.array.each(d,function(a){a&&b.push(decodeURIComponent(a))}),b}},c.ad=c.ad||{getTimesInRange:function(a,b,d){a="sinaads_tc_"+a,d=d||0;var e,f=(c.storage.get(a)||"").split("::"),g=c.now();return e=f[1]?parseInt(f[1],10):g+d,e-g>=0?f=f[0]?parseInt(f[0],10)+1:1:(f=1,e=g+d,c.storage.remove(a)),c.storage.set(a,f+"::"+e,g+d),f>b?0:f},getTypeBySrc:function(a,b){var c=b;if(!c)switch(c=a.substring(a.length-3).toLowerCase()){case"swf":c="flash";break;case"tml":c="url";break;case".js":c="js";break;case"png":case"jpg":case"gif":case"bmp":c="image";break;case"mp4":case"flv":c="video";break;default:c="html"}return"url"===c&&a.indexOf("adbox.sina.com.cn/ad/")>=0&&(c="adbox"),c},embed:function(a,b,d,e,f){switch(b){case"text":case"image":case"url":case"adbox":case"flash":c.swf.hackAutoPlay(a,f);break;default:c.sandbox.create(a,d,e,f)}},createHTML:function(a,b,d,e,f,g,h,i,j){var k,l=[],m="",n={},o=0,p=0;if(j=j||{},b=c.array.ensureArray(b),a=c.array.ensureArray(a),f=c.array.ensureArray(f),h=c.monitor.stringify(c.array.ensureArray(h)),g=c.monitor.stringify(c.array.ensureArray(g)),d+=c.isNumber(d)?"px":"",e+=c.isNumber(e)?"px":"",c.array.each(b,function(b,d){n["src"+d]=b,n["type"+d]=a[d]||c.ad.getTypeBySrc(b,a[d]),n["link"+d]=f[d]}),n.width=d,n.height=e,n.src=n.src0||"",n.type=n.type0||"",n.link=n.link0||"",i&&"string"==typeof i)return c.string.format(i,n);for(o=b.length,o=1;p<o;p++){switch(b=n["src"+p],a=n["type"+p],f=n["link"+p],a){case"image":m='<img border="0" src="'+c.url.ensureURL(b)+'" style="width:'+d+";height:"+e+';border:0" alt="'+b+'"/>',m=f?'<a style="display:block;line-height:0;" href="'+f+'" target="_blank" data-ss="'+(f||"").split("").reverse().join("")+'" onmousedown="return sinaadToolkit.url.fortp(this, event);">'+m+"</a>":m;break;case"text":m=f?'<a href="'+f+'" target="_blank" data-ss="'+(f||"").split("").reverse().join("")+'" onmousedown="return sinaadToolkit.url.fortp(this, event);">'+b+"</a>":b;break;case"flv":case"video":j.source=b,j.volume=j.volume||20,b=c.VPLAYER_URL;case"flash":var q={};for(var r in j)j[r]&&j.hasOwnProperty(r)&&(q[r]=j[r]);f&&(q.clickTAG=f),m=c.swf.createHTML({url:c.url.ensureURL(b),width:d,height:e,wmode:j.wmode||"opaque",vars:q,id:j.id||""}),f&&(m=[m,'<a style="position:absolute;background:#fff;opacity:0;filter:alpha(opacity=0);width:'+d+";height:"+e+';left:0;top:0" href="'+f+'"  data-ss="'+(f||"").split("").reverse().join("")+'" target="_blank"  onmousedown="return sinaadToolkit.url.fortp(this, event);"></a>'].join(""));break;case"adbox":case"url":k={},c.iframe.init(k,d,e,!1),k.src=c.url.ensureURL(b),k.name=k.name?["name="+k.name]:[],g&&k.name.push("clickTAG="+g),h&&k.name.push("viewTAG="+h),k.name=k.name.join("&"),m=c.iframe.createHTML(k);break;case"js":case"extend":m=["<",'script>window.clickTAG="'+g+'";window.viewTAG="'+h+'";</',"script>","<",'script charset="utf-8" src="',c.url.ensureURL(b),'"></',"script>"].join("");break;default:m=["<",'script>window.clickTAG="'+g+'";window.viewTAG="'+h+'";</',"script>",b.replace(/\\x3c/g,"<").replace(/\\x3e/g,">")].join("")}l.push(m)}return l.join(" ")}},c.sandbox=c.sandbox||function(){function a(b,d){var e,f="";switch(typeof b){case"string":d.push(c.string.formalString(b));break;case"number":d.push(isFinite(b)&&!isNaN(b)?b:"null");break;case"boolean":d.push(b);break;case"undefined":d.push("null");break;case"object":if(null===b){d.push("null");break}if(b instanceof Array){var g=b.length;for(d.push("["),f="",e=0;e<g;e++)d.push(f),a(b[e],d),f=",";d.push("]");break}d.push("{");var h;f="";for(var i in b)b.hasOwnProperty(i)&&"function"!=typeof(h=b[i])&&(d.push(f),d.push(i),d.push(":"),a(h,d),f=",");d.push("}")}}function b(b){var d=[];return c.object.map(b,function(b,c){if(null!==b){var e=[];try{a(b,e),e=e.join("")}catch(f){}e&&d.push(c,"=",e,";")}}),d.join("")}var d=0;return{create:function(a,e,f,g,h){var i="sinaadtk_sandbox_id_"+d++;h=h||{},h.sinaadToolkitSandboxId=i,e+=c.isNumber(e)?"px":"",f+=c.isNumber(f)?"px":"";var j={};c.iframe.init(j,e,f,0),j.src="javascript:'<html><body style=background:transparent;></body></html>'",j.id=i,j.style="float:left;",a.innerHTML=c.iframe.createHTML(j),h=b(h),c.iframe.fill(document.getElementById(i),['<!doctype html><html><body style="background:transparent">',"<","script>",h,"</","script>",g,"</body></html>"].join(""))}}}()}(window),function(a,b,c,d){"use strict";function e(d){d=d||{},this.id=d.uid||"sinaadToolkitBox"+e.uid++,this.className=d.className||"sinaad-toolkit-box",this.position=this._parsePosition(d.position),this.width=d.width||100,this.height=d.height||100,this.follow=d.follow||0,this.zIndex=d.zIndex||99999,this.autoShow=void 0===d.autoShow?0:d.autoShow,this.minViewportWidth=d.minViewportWidth||0,this.useFix=this.follow&&c.browser.isSupportFixed?1:0;var f=b.createElement("div");f.id=this.id,f.className=this.className,f.style.cssText=["position:"+(this.useFix?"fixed":"absolute"),"width:"+this.width+"px","height:"+this.height+"px","z-index:"+this.zIndex,"display:"+(this.autoShow?"block":"none")].join(";"),b.body.insertBefore(f,b.body.firstChild),this.main=f,this.resetPositionHandler=this._getResetPositionHandler(),c.event.on(a,"resize",this.resetPositionHandler),this.follow&&!c.browser.isSupportFixed&&c.event.on(a,"scroll",this.resetPositionHandler),this.setPosition()}e.uid=0,e.prototype={_parseStringPosition:function(a){var b=(a||"").match(/^([a-zA-Z]+)*([+|-]*\d+)*(?:px)*\s+([a-zA-Z]+)*([+|-]*\d+)*(?:px)*$/),c={};return b||(b=[]),c.pos=[b[1]||"left",b[3]||"top"],c.offset=[b[2]?parseInt(b[2],10):0,b[4]?parseInt(b[4],10):0],c},_parsePosition:function(d){var e={},f=[];return"string"==typeof d?(e.of=a,e.at=d):(d=d||{},e.of=d.of||a,e.at=d.at,e.my=d.my),c.array.each(e.of,function(c){f.push("string"==typeof c?"body"===c?b.body:"window"===c?a:b.getElementById(c):c||a)}),e.of=f,e.at=this._parseStringPosition(e.at),e.my=this._parseStringPosition(e.my||e.at.pos.join(" ")),e},_getResetPositionHandler:function(){var a,b=this;return function(){a&&clearTimeout(a),a=setTimeout(function(){b.setPosition()},100)}},_getSize:function(d){return a===d||b.body===d?[c.page.getViewWidth(),c.page.getViewHeight()]:[parseInt(c.dom.getStyle(d,"width"),10),parseInt(c.dom.getStyle(d,"height"),10)]},_getPosition:function(d){var e,f=[0,0];return a===d||b.body===d?f=[0,0]:(e=c.dom.getPosition(d),f=[e.left,e.top]),f},getMain:function(){return this.main},show:function(){this.getMain().style.display="block"},hide:function(){this.getMain().style.display="none"},remove:function(){try{this.main.innerHTML="",this.main.parentNode.removeChild(this.main),this.main=null}catch(a){}},setPosition:function(){var b=this.getMain(),d=this.position,e=d.of,f=d.at,g=d.my,h=this._getSize(e[0]),i=this._getPosition(e[0]),j=e[1]?this._getSize(e[1]):h,k=e[1]?this._getPosition(e[1]):i,l=this._getSize(b),m=c.page.getViewWidth(),n=Math.min(a===e[0]&&this.minViewportWidth?m/2-this.minViewportWidth/2:0,0),o=i[0]+g.offset[0]+f.offset[0]+(this.follow&&!c.browser.isSupportFixed?c.page.getScrollLeft():0);switch(g.pos[0]){case"center":o-=l[0]/2;break;case"right":o-=l[0]+n;break;default:o+=n}switch(f.pos[0]){case"center":o+=h[0]/2;break;case"right":o+=h[0];break;default:o+=0}var p=k[1]+g.offset[1]+f.offset[1]+(this.follow&&!c.browser.isSupportFixed?c.page.getScrollTop():0);switch(g.pos[1]){case"center":p-=l[1]/2;break;case"bottom":p-=l[1];break;default:p+=0}switch(f.pos[1]){case"center":p+=j[1]/2;break;case"bottom":p+=j[1];break;default:p+=0}b.style.left=o+"px",b.style.top=p+"px"}},c.Box=c.Box||e}(window,document,window.sinaadToolkit),function(a,b,c,d){"use strict";function e(a){this.uid=a||"fc-uid"+(+new Date).toString(36),this.list={}}if(!b.FrequenceController)e.prototype={has:function(a){return this.list[a]},register:function(a,b){b&&(this.list[a]=b)},enable:function(a){this.has(a)&&c.storage.remove(this.uid+a+"_disabled")},disable:function(a){this.has(a)&&c.storage.set(this.uid+a+"_disabled",1,1e3*this.list[a])},isDisabled:function(a){return c.storage.get(this.uid+a+"_disabled")}},b.FrequenceController=e}(window,window.sinaadToolkit||window,window.sinaadToolkit),function(a,b,c){"use strict";function d(a,b){return function(){a.done(b)}}function e(a){
for(var b,c,e=0;b=a.order[e++];)g(a,b)&&(a._state[b]=i.DOING,a._doneTimeoutTimer[b]=setTimeout(d(a,b),a._timeout),c=a._callback[b],"function"==typeof c?c.apply(a._callbackThis[b]||null,a._callbackArgs[b]||[]):a.done(b));h.allDone(a)&&a._checkTimer&&clearInterval(a._checkTimer)}function f(a){return function(){e(a)}}function g(a,b){for(var c,d=0;(c=a.order[d++])&&c!==b;)if(a._state[c]!==i.DONE)return!1;return!a._state[b]||a._state[b]===i.READY}function h(a,b){var c,d=b||{},e=0;for(this._uid="oc-uid"+(+new Date).toString(36),this._state={},this._callback={},this._callbackArgs={},this._callbackThis={},this._doneTimeoutTimer={},this._frequence=d.frequence||j,this._timeout=d.timeout||k,this.order=a||[];c=this.order[e++];)this._state[c]=i.INIT;this._checkTimer=setInterval(f(this),this._frequence)}if(!b.OrderController){var i={INIT:1,READY:2,DOING:3,DONE:4},j=1e3,k=3e4;h.allDone=function(a){for(var b,c=0;b=a.order[c++];)if(a._state[b]!==i.DONE)return!1;return!0},h.prototype={has:function(a){return-1!==("|"+this.order.join("|")+"|").indexOf("|"+a+"|")},ready:function(a,b,c,d){this.has(a)?(this._state[a]=i.READY,this._callback[a]=b,this._callbackArgs[a]=c,this._callbackThis[a]=d):b.apply(d||null,c||[])},done:function(a){this.has(a)&&(this._state[a]=i.DONE,this._doneTimeoutTimer[a]&&clearTimeout(this._doneTimeoutTimer[a]),delete this._callback[a],delete this._callbackArgs[a],delete this._callbackThis[a],delete this._doneTimeoutTimer[a])}},b.OrderController=h}}(window,window.sinaadToolkit||window),window._sinaadsIsInited=window._sinaadsIsInited||function(a,b,c){"use strict";function d(a){return a=a||"lb",b.browser.ie<7?b.RESOURCE_URL+"/release/ad_logo_"+a+".gif":b.RESOURCE_URL+"/release/ad_logo_"+a+".png"}function e(){return!0}function f(a){var b,c,d,e=a.sinaads_ad_type,f=Number(a.sinaads_ad_width),g=Number(a.sinaads_ad_height),h=a.sinaads_ad_pdps,i=a.sinaads_page_url,j=Number(a.sinaads_uid),k=a.ad_id,l=(new Date).getTime();switch(e){case"couplet":var m=a.sinaads_couple_top;b=[{ad_id:k,link:[a.content.link[0]],src:[a.content.src[0],a.content.src[1]||a.content.src[0],a.content.src[2]||a.content.src[1]||a.content.src[0]],type:[a.content.type[0],a.content.type[1]||a.content.type[0],a.content.type[2]||a.content.type[1]||a.content.type[0]],origin_monitor:[]}],c={sinaads_ad_width:f,sinaads_ad_height:g,sinaads_ad_pdps:h,sinaads_couple_top:m,sinaads_ad_status:"done",sinaads_page_url:i,sinaads_uid:j,timestamp:l}}for(var n=document.getElementsByTagName("ins"),o=0;o<n.length;o++)n[o].getAttribute("data-ad-pdps")===h&&(d=n[o]);B.render(e,d,f,g,b,c)}b.debug("sinaads:Init sinaads!");var g=1,h="sinaads_"+b.hash(a.location.host.split(".")[0]+a.location.pathname.substring(0,a.location.pathname.lastIndexOf("/"))),i="//sax.sina.com.cn/newimpress",j="https://sax.sina.com.cn/newimpress",k="//d00.sina.com.cn/a.gif",l="//sax.sina.com.cn/preview",m="//amp.ad.sina.com.cn/ea/api/ideaScreen!preview.action",n="//amp.ad.sina.com.cn/ly/api/ideaScreen!preview.action",o=b.RESOURCE_URL+"/release/plus/Media.js",p=1e3*parseInt(a._SINAADS_CONF_SAX_REQUEST_TIMEOUT||10,10),q=a._SINAADS_CONF_PAGE_MEDIA_ORDER||[],r=1e3*(a._SINAADS_CONF_PAGE_MEDIA_DONE_TIMEOUT||40),s={PDPS000000046013:1,PDPS000000046012:1,PDPS000000016990:1,PDPS000000042133:1,PDPS000000042134:1},t=b.browser.ie<7?b.RESOURCE_URL+"/release/gx_logo.gif":b.RESOURCE_URL+"/release/gx_logo.png",u={},v={},w={PDPS000000010399:"PDPS000000010399",PDPS000000010400:"PDPS000000010400",PDPS000000010403:"PDPS000000010403",PDPS000000010419:"PDPS000000010419",PDPS000000010420:"PDPS000000010420",PDPS000000010421:"PDPS000000010421",PDPS000000010426:"PDPS000000010426",PDPS000000010430:"PDPS000000010430",PDPS000000010423:"PDPS000000010423",PDPS000000010428:"PDPS000000010428",PDPS000000010398:"PDPS000000010398",PDPS000000010401:"PDPS000000010401",PDPS000000010402:"PDPS000000010402",PDPS000000010404:"PDPS000000010404",PDPS000000010410:"PDPS000000010410",PDPS000000010418:"PDPS000000010418",PDPS000000010422:"PDPS000000010422",PDPS000000010427:"PDPS000000010427",PDPS000000010429:"PDPS000000010429",PDPS000000010417:"PDPS000000010417",PDPS000000010424:"PDPS000000010424",PDPS000000010425:"PDPS000000010425",PDPS000000010434:"PDPS000000010434",PDPS000000010440:"PDPS000000010440",PDPS000000010432:"PDPS000000010432",PDPS000000010433:"PDPS000000010433",PDPS000000010435:"PDPS000000010435",PDPS000000010437:"PDPS000000010437",PDPS000000010438:"PDPS000000010438",PDPS000000010439:"PDPS000000010439",PDPS000000010441:"PDPS000000010441",PDPS000000010436:"PDPS000000010436"},x="|PDPS000000042133|PDPS000000042138|PDPS000000036614|PDPS000000056553|PDPS000000056018|PDPS000000054727|PDPS000000055012|PDPS000000046103|PDPS000000056105|PDPS000000056034|PDPS000000065716|PDPS000000054727|PDPS000000065715|PDPS000000065717|PDPS000000055137|PDPS000000016990|PDPS000000043762|PDPS000000065755|PDPS000000058601|PDPS000000054727|PDPS000000043762|PDPS000000016990|PDPS000000055137|PDPS000000058184|PDPS000000058185|PDPS000000058601|PDPS000000054492|PDPS000000058042|PDPS000000054491|PDPS000000042135|PDPS000000056985|PDPS000000005425|PDPS000000057534|PDPS000000055148|PDPS000000056026|PDPS000000047015|PDPS000000004439|PDPS000000057947|PDPS000000005474|PDPS000000043762|PDPS000000047200|PDPS000000025256|PDPS000000045825|PDPS000000005494|PDPS000000049483|PDPS000000058096|PDPS000000051607|PDPS000000005458|",y="http://sax.sina.com.cn/click?type=7&t=UERQUzAwMDAwMDA0NjE1NA%3D%3D&url=http%3A%2F%2Fwww.sina.com.cn%2F%23a-register&sign=a70e1db1ea57de4f&id=10",z={frequenceController:new b.FrequenceController(h),orderController:new b.OrderController(q,{timeout:r})},A=function(b,c,d){function e(a){var e=d+(c.frequenceController.has(a)?a:"");return y[e]||(y[e]=parseInt(b.storage.get(e),10)||b.rand(1,100),b.storage.set(e,y[e]>1e3?1:++y[e],2592e6)),y[e]}function f(){var c=a.sinaadsExParams||{},d=[];c.am=c.am||"{ds:"+b.systemInfo.screenSize+",fv:"+b.systemInfo.flashVersion+",ov:"+b.systemInfo.platform+"}";for(var e in c)d.push(e+"="+encodeURIComponent(c[e]));return d.join("&")}function g(a){return w[a]}function h(){function c(){b.cookie.remove("sinaads_entry",{domain:".sina.com.cn",path:"/"}),b.storage.remove("sinaads_entry")}if(!u){var d,e,f,g,h=document.getElementsByTagName("head")[0].getElementsByTagName("meta"),i={},j=h.length,k=0;for(u={},i.keywords=[];k<j;k++)d=h[k],d.name&&(e=d.name.toLowerCase(),f=b.string.trim(d.content),i[e]||(i[e]=[]),f&&i[e].push(f));for(var l in i)0===l.indexOf("sinaads_")&&(e=l.replace("sinaads_",""),u[e]=i[l].join(",")||i[e].join(","));if(g=b.cookie.get("sinaads_entry")||b.storage.get("sinaads_entry")){u.entry=g;var m=setTimeout(c,5e3);b.event.on(a,"beforeunload",function(){m&&clearTimeout(m),c()})}b.debug("sinaads:Targeting init,",u)}return u}function o(a){var c,d={1:"http://d3.sina.com.cn/litong/zhitou/union/tanx.html?pid=",2:"http://d3.sina.com.cn/litong/zhitou/union/google.html?pid=",3:"http://d3.sina.com.cn/litong/zhitou/union/yihaodian.html?pid=",4:"http://d3.sina.com.cn/litong/zhitou/union/baidu.html?pid=",5:"http://js.miaozhen.com/mzad_iframe.html?_srv=MZHKY&l="},e=a.engineType;return!a.content&&a.value&&(b.debug("sinaads:Old data format, need adapter(pdps)",a.id),c=a.size.split("*"),a.content=[],b.array.each(a.value,function(b){"network"===e&&(b.content={src:[d[""+b.manageType]+b.content+"&w="+c[0]+"&h="+c[1]],type:["url"]}),"dsp"===e&&17!==parseInt(b.manageType,10)&&(b.content={src:[b.content],type:["html"]}),a.content.push(b.content)}),delete a.value),a.content=function(c){var d=[];b.array.each(c,function(c,e){var f=!0;b.array.each(c.src,function(a){if(b.string.trim(a))return f=!1,!1}),f?b.debug("sinaads: The"+e+" Ad Content src is null, via "+a.id):d.push(c)});for(var e=0;e<d.length;e++)for(var f=d[e].src,g=d[e].type,h=0;h<f.length;h++)switch(g[h]){case"url":case"js":case"image":case"flash":case"video":f[h]=f[h].replace(/^http:|https:/,"")}return d}(a.content),b.array.each(a.content,function(c,d){var e;e=b.array.ensureArray(c.type),b.array.ensureArray(c.link),b.array.each(c.src,function(a,c){e[c]=b.ad.getTypeBySrc(a,e[c])}),a.content[d]=c}),a.type={lmt:"stream",kl:"couplet",sc:"videoWindow",hzh:"embed",jx:"embed",dtl:"embed",an:"embed",dan:"embed",xan:"embed",wzl:"textlink",ztwzl:"zhitoutextlink",qp:"fullscreen",fp:"turning",dl:"float",tip:"tip",bt:"bp",sx:"follow",kzdl:"coupletExt",fc1:"pop",kzan:"skyscraper",span:"leftsuspend",tuigraph:"embed",dflmt:"bottomstream",bj:"bg",motu:"magicmap",sxan:"followbutton"}[a.type]||a.type||"embed","tl"===a.type&&(a.type=a.content.length>1&&"win"===a.content[0].ad_type?"shopWindow":"embed"),"embed"===a.type&&a.template&&a.logo&&(a.type="shop"),a}function q(a){a=b.isArray(a)?a.join(","):a;for(var c in A)if(-1!==(","+c+",").indexOf(","+a+","))return A[c];return null}function r(a){var c=b.isArray(a)?a.join(","):a;return B[c]||(B[c]=0),B[c]++,q(a)||(A[c]=s(a))}function s(a){var c=b.now(),d=new b.Deferred,i=[],j=!1,l=[];if(b.array.each(a,function(a){j=!!v[a],j?b.debug("sinaads:current pdps data is loaded, render immedietly. ",a,v[a]):l.push(a)}),j)d.resolve();else{var m=h();b.debug("sinaads:current pdps data is unload, load immedietly. "+l.join(),v),i=["rotate_count="+e(l.length>1?"":l[0]),"TIMESTAMP="+x.toString(36),"referral="+encodeURIComponent(b.url.top),"adunitid="+l.join(",")];var n=g(l.join(","));n&&i.push(n);var q=f();q&&i.push(q);for(var r in m)i.push("tg"+r+"="+encodeURIComponent(m[r]));b.sio.jsonp(z(l.join(","))+"?"+i.join("&"),function(a){if("nodata"===a)b.debug("sinaads:"+l.join()+". No register in SAX. "),d.reject();else{b.debug("sinaads:request data ready. ",i,b.now(),b.now()-c,a);var e=!1;b.array.each(a.ad,function(a){a=o?o(a):a,a.content instanceof Array&&a.content.length>0?(v[a.id]=a,e=!0):b.debug("sinaads:"+a.id+". cannot found data. ")}),b.array.each(a.mapUrl,function(a){b.debug("sinaads:data ready, send cookie mapping. "+a,i,b.now()),a&&b.sio.log(a,1)}),e?d.resolve():d.reject()}},{timeout:p,onfailure:function(){b.error("sinaads:request timeout, via "+l.join()),b.sio.log(k+"?type=tp_pc_timeout&pos="+l.join(",")+"&ref="+encodeURIComponent(b.url.top)),d.reject()}})}return d}function t(c){v=a._sinaadsCacheData=a._sinaadsCacheData||{};var d=(b.url.top.split("#")[1]||"").split("?")[0]||"",e=(b.url.top.split("?")[1]||"").split("#")[0]||"",f=(d+"&"+e).replace(/</g,"").replace(/>/g,"").replace(/"/g,"").replace(/'/g,"");!function(){for(var a,c,d=f.split("&"),e={},g=["pdps","src","size"],h=0,i=d.length;h<i;h++)(c=d[h])&&(c=c.split("="),0===c[0].indexOf("sinaads_preview_")&&(a=c[0].replace("sinaads_preview_",""))&&c[1]&&!e[a]&&(e[a]=c[1],b.array.remove(g,a)));0===g.length&&(b.debug("sinaads:Ad Unit "+e.pdps+" is for preview only. ",e),v[e.pdps]={content:[{src:decodeURIComponent(e.src).split("|"),link:(decodeURIComponent(e.link)||"").split("|"),monitor:(e.monitor||"").split("|"),pv:(e.pv||"").split("|"),type:(e.type||"").split("|")}],size:e.size,id:e.pdps,type:e.adtype||"embed",highlight:e.highlight||!1})}(),w=function(){var a,c=f.split("&"),d={},e="sinaads_server_preview",g=0,h=0,i=b.date.format(new Date,"yyyyMMddHH"),j="",k="",l="",m="";for(g=0,h=c.length;g<h;g++)if((a=c[g])&&(a=a.split("="),a[0]===e&&a[1]&&(a=decodeURIComponent(a[1]).split("|"),m=a[0]||m,i=a[1]||i,j=a[2]||j,k=a[3]||k,l=a[4]?a[4]:k,m))){var n=m.split("_")[0];switch(n){case"ly":case"ea":m=m.split("_")[1],d[m]=[],d[m].push("previewtype="+n),d[m].push("pdps="+encodeURIComponent(m)),i&&d[m].push("date="+encodeURIComponent(i)),j&&d[m].push("tgip="+encodeURIComponent(j)),k&&d[m].push("deid="+encodeURIComponent(k)),l&&d[m].push("deaid="+encodeURIComponent(l)),d[m]=d[m].join("&");break;default:d[m]=[],d[m].push("previewtype=default"),i&&d[m].push("date="+encodeURIComponent(i)),j&&d[m].push("tgip="+encodeURIComponent(j)),k&&d[m].push("deid="+encodeURIComponent(k)),d[m]=d[m].join("&")}}return d}();for(var g,h,i=[],j=a._SINAADS_CONF_PRELOAD||[],k=0,l=0;g=j[k++];){for(i=[],l=0;h=g[l++];)w[h]||i.push(h);i.length>0&&(b.debug("sinaads:Data preload of bulk requests. "+i.join(",")),r(i))}var m=a._SINAADS_CONF_GROUP||[];m.length>0?s(m).then(c):c()}var u,v={},w={},x=b.now(),y={};a.getEnterTime=function(){return x};var z=function(){var a=i;try{var c=b.cookie.get("SINAGLOBAL");"debug"!==b.mode&&(b.debug("sinaads: "+c+' is in gray test, use parseInt(sinaadToolkit.hash(sinaadToolkit.cookie.get("SINAGLOBAL")), 16) to check.'),a=j)}catch(d){}return function(c){var d=a;if(w[c]){switch(w[c].split("&")[0]){case"previewtype=ea":b.debug("sinaads: "+c+" is fuyi server preview slot."),d=m;break;case"previewtype=ly":b.debug("sinaads: "+c+" is longyuan server preview slot."),d=n;break;default:b.debug("sinaads: "+c+" is common server preview slot."),d=l}}return d}}(),A={},B={};return{init:t,request:s,getSeed:e,add:function(a,b){v[a]=b},get:function(a){return a?v[a]:v},getExParamsQueryString:f}}(b,z,h),B=function(){function b(a,b){!d[a]&&(d[a]=b)}function c(a,b,e,f,g,h){var i,j=d[a];"function"==typeof j&&(i=j(b,e,f,g,h)),i&&i.type!==a&&c(i.type,b,e,f,i.content,h)}var d=a.sinaadsRenderHandler||{};return{render:c,register:b,handlerMap:d}}();b.event.on(a,"message",function(c){switch(c.origin){case"http://g.alicdn.com":var d=b.json.parse(c.data);if(1===Number(d.overtime_state)||0===d.content.src.length)return void a.sinaadsROC.done(d.sinaads_ad_pdps);f(d)}}),function(b,c){c.register("bp",function(c,d,e,f,g){b.debug("sinaads:Rendering bp."),f=f[0],c.style.cssText="position:absolute;top:-9999px";var h=[f.type[0],f.src[0]?encodeURIComponent(f.src[0]):"",f.link[0]?encodeURIComponent(f.link[0]):"",d,e],i=b.monitor.stringify(f.origin_monitor);i="",h.join("${}").length+i.length<2e3&&h.push(i);var j=b.monitor.stringify(f.pv);j="",h.join("${}").length+j.length<2e3&&h.push(j),a.open("http://d1.sina.com.cn/litong/zhitou/sinaads/release/pbv5.html?"+h.join("${}"),"sinaads_bp_"+g.sinaads_ad_pdps,"width="+d+",height="+e);try{b.debug("Media: In building bp complete!"),a.sinaadsROC.bp=g.sinaads_ad_pdps,a.sinaadsROC.done(a.sinaadsROC.bp)}catch(k){}})}(b,B),function(b,c){c.register("couplet",function(c,d,e,f,g){b.debug("sinaads:Rendering couplet.");var h=o||"./src/plus/CoupletMedia.js";if(a.sinaadsROC.couplet=g.sinaads_ad_pdps,f=f[0],a.sinaadsCoupletClickTAG=b.monitor.stringify(b.array.ensureArray(f.origin_monitor)),a.sinaadsCoupletViewTAG=b.monitor.stringify(b.array.ensureArray(f.pv)),c.style.cssText="position:absolute;top:-9999px",1!==f.src.length||"js"!==f.type[0]&&"html"!==f.type[0]&&"postmessage"!==f.type[0]){var i={pdps:g.sinaads_ad_pdps,src:f.src,type:f.type,link:f.link,mainWidth:g.sinaads_ad_main_width,mainHeight:g.sinaads_ad_main_height,top:g.sinaads_couple_top||0,monitor:f.origin_monitor||[],pv:f.pv||[],sideWidth:g.sinaads_ad_side_width,sideHeight:g.sinaads_ad_side_height};b.CoupletMediaData?new b.CoupletMedia(i):b.sio.loadScript(h,function(){new b.CoupletMedia(i)})}else switch(f.type[0]){case"js":b.sio.loadScript(f.src[0],null,{charset:"gb2312"});break;case"html":b.dom.fill(c,f.src[0]);break;case"postmessage":if(b.browser.ie<=7)return void a.sinaadsROC.done(g.sinaads_ad_pdps);var j="couplet",k={sinaads_ad_pdps:g.sinaads_ad_pdps,sinaads_ad_type:j,sinaads_page_url:g.sinaads_page_url,sinaads_couple_top:g.sinaads_couple_top,sinaads_ad_width:g.sinaads_ad_width,sinaads_ad_height:g.sinaads_ad_height,sinaads_uid:g.sinaads_uid,ad_id:f.ad_id},l=b.json.stringify(k),m=document.createElement("iframe");m.width="0",m.height="0",m.src=f.src[0],m.name=l,c.appendChild(m)}}),c.register("coupletExt",function(c,d,e,f,g){var h=o||b.RESOURCE_URL+"/src/plus/CoupletExtMedia.js";a.sinaadsCoupletExtClickTAG=b.monitor.stringify(b.array.ensureArray(f.origin_monitor)),a.sinaadsCoupletExtViewTAG=b.monitor.stringify(b.array.ensureArray(f.pv)),f=f[0],c.style.cssText="position:absolute;top:-9999px";var i={src:f.src,type:f.type,link:f.link,width:d,height:e,offsettop:g.sinaads_coupletext_offsettop||100,expandpos:g.sinaads_coupletext_expandpos||1200,smallsize:g.sinaads_coupletext_smallsize,bigsize:g.sinaads_coupletext_bigsize,monitor:f.origin_monitor||[],pv:f.pv||[]};b.CoupletExtMediaData?new b.CoupletExtMedia(i):b.sio.loadScript(h,function(){new b.CoupletExtMedia(i)})})}(b,B),function(b,c){c.register("embed",function(c,e,f,g,h){function i(a){var b={};switch(a=(a||"").split("_"),a[0].toLowerCase()){case"sina":b.type="sina",b.id=a[1]||"";break;case"dsp":17===parseInt(a[1],10)?b.type="ea":b.type=a[1]||"",b.id=a[2]||"";break;case"bottom":b.type="bottom",b.id=a[1]||"";break;default:b.type="unknow",b.id=a[1]||""}return b}function j(a,b){return!!u[a]||-1!==b[0].indexOf("x.jd.com")||!v[a]}g=b.array.ensureArray(g),g=g[0];var k,l=h.sinaads_uid,m=g.type||"",n=g.link||"",o=g.src||"",p=h.sinaads_ad_pdps,q=h.sinaads_ad_tpl||"";!h.sinaads_ad_fullview||"flash"!==m[0]&&"image"!==m[0]?(e+="px",f+="px"):(e="100%",f="auto"),c.style.cssText+=";display:block;overflow:hidden;text-decoration:none;",c.innerHTML='<ins style="text-decoration:none;margin:0px auto;width:'+e+';display:block;position:relative;overflow:hidden;"></ins>';var r=document.createElement("div");if(r.style.cssText='width:26px;height:13px;position:absolute;right:1px;bottom:1px;z-index:99;background:url("//d2.sina.com.cn/litong/zhitou/sinaads/release/ad_logo_update_IAB.gif") no-repeat',c=c.getElementsByTagName("ins")[0],k=o?b.ad.createHTML(m,o,e,f,n,g.origin_monitor,g.pv,b.isFunction(q)?q(0,g):q):"","ea"===i(g.ad_id).type&&s[p]&&(c.style.position="relative",k+='<a target="_blank" href="http://amp.ad.sina.com.cn/ea/privacy.html" style="position:absolute;left:0;top:0;z-index:20;"><img src="'+t+'" width="18" height="18" border="0"></a>'),!j(p,o)){var w=v[p];k+='<a target="_blank" href="javascript:;" style="position:absolute;'+{lb:"left:0;bottom:0",lt:"left:0;top:0",rt:"right:0;top:0",rb:"right:0;bottom:0"}[w]+';z-index:20;"><img src="'+d(w)+'" width="30" height="16" border="0"></a>'}if(-1!==x.indexOf("|"+p+"|")&&(k+='<a target="_blank" style="position:absolute;z-index:-999;left:0;top:0;" href="'+y+"&pdps="+p+"&csits="+b.now()+'" data-link="'+y+"&pdps="+p+"&csits="+b.now()+'" onmousedown="return sinaadToolkit.url.fortp(this, event);"></a>'),q)c.innerHTML=k,c.appendChild(r);else switch(m[0]){case"text":case"image":case"url":case"adbox":case"flash":b.swf.hackAutoPlay(c,k);break;default:b.sandbox.create(c,e,f,k,{sinaads_uid:l,sinaads_ad_pdps:p,sinaads_ad_width:e,sinaads_ad_height:f})}"image"===m[0]||"flash"===m[0]?c.appendChild(r):o[0].indexOf("//d3.sina.com.cn/litong/zhitou/sinaads/release/picshow_new.swf")>=0&&c.appendChild(r),"extend"!==m[0]&&a.sinaadsROC.done(p)})}(b,B),function(b,c){c.register("float",function(c,d,e,f,g){b.debug("sinaads:Rendering float.");var h=o||"./src/plus/FloatMedia.js";if(a.sinaadsROC.float=g.sinaads_ad_pdps,f=f[0],a.sinaadsFloatClickTAG=b.monitor.stringify(b.array.ensureArray(f.origin_monitor)),a.sinaadsFloatViewTAG=b.monitor.stringify(b.array.ensureArray(f.pv)),c.style.cssText="position:absolute;top:-99999px",1===f.src.length&&"js"===f.type[0])b.sio.loadScript(f.src[0],null,{charset:"gb2312"}),a.sinaadsROC.done(a.sinaadsROC.float);else{var i={type:f.type,src:f.src,top:g.sinaads_float_top||0,monitor:f.origin_monitor||[],pv:f.pv||[],link:f.link,sideWidth:d,sideHeight:e,pdps:g.sinaads_ad_pdps,contentWidth:g.sinaads_ad_contentWidth,follow:g.sinaads_ad_follow||0,showPos:g.sinaads_float_show_pos};b.FloatMedia?new b.FloatMedia(i):b.sio.loadScript(h,function(){new b.FloatMedia(i)})}})}(b,B),function(b,c){c.register("follow",function(c,d,e,f,g){var h=o||"./src/plus/FollowMedia.js";f=f[0],a.sinaadsFollowClickTAG=b.monitor.stringify(b.array.ensureArray(f.origin_monitor)),a.sinaadsFollowViewTAG=b.monitor.stringify(b.array.ensureArray(f.pv));var i={main:{width:d,height:e,src:f.src[0]||"",type:f.type[0]||"",link:f.link[0]||"",top:g.sinaads_follow_top||0},mini:{src:f.src[1]||"",type:f.type[1]||"",link:f.link[1]||f.link[0]||"",top:g.sinaads_follow_mini_top||"bottom"},monitor:f.origin_monitor||[],pv:f.pv||[],duration:g.sinaads_ad_duration||5};b.FollowMedia?new b.FollowMedia(i):b.sio.loadScript(h,function(){new b.FollowMedia(i)})})}(b,B),function(b,c){c.register("fullscreen",function(c,d,e,f,g){b.debug("sinaads:Rendering fullscreen");var h=o||"./src/plus/FullscreenMedia.js";switch(a.sinaadsROC.fullscreen=g.sinaads_ad_pdps,f=f[0],a.sinaadsFullscreenClickTAG=b.monitor.stringify(b.array.ensureArray(f.origin_monitor)),a.sinaadsFullscreenViewTAG=b.monitor.stringify(b.array.ensureArray(f.pv)),c.style.cssText="position:absolute;top:-9999px",a.sinaadsFullscreenMonitor=f.origin_monitor||[],f.type[0]){case"js":b.sio.loadScript(f.src[0],null,{charset:"gb2312"});break;case"html":b.dom.fill(c,f.src[0]);break;default:var i={pdps:g.sinaads_ad_pdps,type:f.type[0]||"",src:f.src[0]||"",link:f.link[0]||"",monitor:f.origin_monitor||[],pv:f.pv||[],width:d,height:e,hasClose:g.sinaads_fullscreen_close||("flash"===f.type[0]?1:0)};b.FullscreenMedia?new b.FullscreenMedia(i):b.sio.loadScript(h,function(){new b.FullscreenMedia(i)})}})}(b,B),function(b,c){c.register("stream",function(c,d,e,f,g){b.debug("sinaads:Rendering stream.");var h=o||"./src/plus/StreamMedia.js";if(a.sinaadsROC.stream=g.sinaads_ad_pdps,f=f[0],c.style.cssText="position:absolute;top:-9999px",a.sinaadsStreamMonitor=a.sinaadsStreamMonitor&&a.sinaadsStreamMonitor.join("")?a.sinaadsStreamMonitor:f.origin_monitor||[],a.sinaadsStreamClickTAG=a.sinaadsStreamClickTAG||b.monitor.stringify(b.array.ensureArray(f.origin_monitor)),a.sinaadsStreamViewTAG=a.sinaadsStreamViewTAG||b.monitor.stringify(b.array.ensureArray(f.pv)),1===f.src.length){var i=document.createElement("div");switch(i.id="SteamMediaWrap",document.body.insertBefore(i,document.body.firstChild),f.type[0]){case"js":b.sio.loadScript(f.src[0],null,{charset:"gb2312"});break;case"html":b.dom.fill(c,f.src[0])}}else{var j={main:{type:f.type[0]||"flash",src:f.src[0]||"",link:f.link[0]||"",width:d,height:e,top:g.sinaads_top||0},mini:{src:f.src[1]||"",type:f.type[1]||"flash",link:f.link[1]||f.link[0]||""},pdps:g.sinaads_ad_pdps,monitor:f.origin_monitor||[],pv:f.pv||[]};b.StreamMedia?new b.StreamMedia(j):b.sio.loadScript(h,function(){new b.StreamMedia(j)})}})}(b,B),function(a,b){function c(b,c,d,e,f){function g(a){return!!w[a]}var h=f.sinaads_ad_tpl||"",i=f.sinaads_ad_pdps,j=[];g(i)||j.push('<i style="font-style:normal;">å¹¿å:</i>'),a.array.each(e,function(b,c){j.push(a.ad.createHTML(b.type,b.src,0,0,b.link,b.origin_monitor,b.pv,a.isFunction(h)?h(c,b):h))}),b.style.cssText+=";text-decoration:none",b.innerHTML=j.join("")}b.register("textlink",c),b.register("zhitoutextlink",c)}(b,B),function(b,c){c.register("tip",function(c,d,e,f,g){var h=o||"./src/plus/TipsMedia.js";f=f[0],a.sinaadsTipClickTAG=b.monitor.stringify(b.array.ensureArray(f.origin_monitor)),a.sinaadsTipViewTAG=b.monitor.stringify(b.array.ensureArray(f.pv));var i={width:d,height:e,src:f.src,type:f.type,link:f.link,monitor:f.origin_monitor||[],pv:f.pv||[],autoShow:1,top:g.sinaads_tip_top||0,left:g.sinaads_tip_left||0,zIndex:g.sinaads_ad_zindex||0};b.TipsMedia?new b.TipsMedia(c,i):b.sio.loadScript(h,function(){new b.TipsMedia(c,i)})})}(b,B),function(a,b){b.register("turning",function(b,c,d,e,f){var g=[],h=[],i=[],j=e.length;return a.array.each(e,function(a){a.src&&a.src[0]&&g.push(a.src[0]),a.link&&a.link[0]&&h.push(a.link[0])}),e=[{src:[a.swf.createHTML({id:"TurningMedia"+f.sinaads_uid,url:"//d3.sina.com.cn/litong/zhitou/sinaads/release/picshow_new.swf",width:c,height:d,wmode:"transparent",vars:{ad_num:j,pics:g.join("Â§"),urls:h.join("Â§"),monitor:i.join("Â§"),pic_width:c-5,pic_height:d-5,flip_time:1e3*f.sinaads_turning_flip_duration||300,pause_time:1e3*f.sinaads_turning_flip_delay||4e3,wait_time:1e3*f.sinaads_turning_wait||1e3}})],type:["html"],link:[]}],{type:"embed",content:e}})}(b,B),function(b,c){c.register("videoWindow",function(c,d,e,f,g){b.debug("sinaads:Rendering videoWindow.");var h=o||"./src/plus/VideoWindowMedia.js";switch(a.sinaadsROC.videoWindow=g.sinaads_ad_pdps,f=f[0],c.style.cssText="position:absolute;top:-9999px",a.sinaadsVideoWindowMonitor=f.origin_monitor||[],a.sinaadsVideoWindowClickTAG=b.monitor.stringify(b.array.ensureArray(f.origin_monitor)),a.sinaadsVideoWindowViewTAG=b.monitor.stringify(b.array.ensureArray(f.pv)),f.type[0]){case"js":b.sio.loadScript(f.src[0],null,{charset:"gb2312"});break;case"html":b.dom.fill(c,f.src[0]);break;default:var i={pdps:g.sinaads_ad_pdps,src:f.src[0],type:f.type[0],width:d,height:e,link:f.link[0],monitor:f.origin_monitor||[],pv:f.pv||[],zIndex:g.sinaads_ad_zindex};b.VideoWindowMedia?new b.VideoWindowMedia(i):b.sio.loadScript(h,function(){new b.VideoWindowMedia(i)})}})}(b,B),function(b,c){c.register("bg",function(c,d,e,f,g){b.debug("sinaads:Rendering bp.");var h=o||"./src/plus/BgMedia.js";f=f[0],a.sinaadsROC.bg=g.sinaads_ad_pdps,a.sinaadsBgClickTAG=b.monitor.stringify(b.array.ensureArray(f.origin_monitor)),a.sinaadsBgViewTAG=b.monitor.stringify(b.array.ensureArray(f.pv));var i={pdps:g.sinaads_ad_pdps,src:f.src,type:f.type,link:f.link,width:d||1600,height:e||g.sinaads_bg_height||800,midWidth:g.sinaads_bg_midWidth||1e3,headHeight:g.sinaads_bg_headHeight||80,top:void 0!==g.sinaads_bg_top?g.sinaads_bg_top:46,asideClickable:g.sinaads_bg_asideClick,monitor:f.origin_monitor||[],pv:f.pv||[]};b.BgMedia?new b.BgMedia(i):b.sio.loadScript(h,function(){new b.BgMedia(i)})})}(b,B),function(b,c){c.register("pop",function(c,d,e,f,g){b.debug("sinaads:Rendering pop.");var h=o||"./src/plus/PopMedia.js";switch(a.sinaadsROC.pop=g.sinaads_ad_pdps,f=f[0],a.sinaadsPopClickTAG=b.monitor.stringify(b.array.ensureArray(f.origin_monitor)),a.sinaadsPopViewTAG=b.monitor.stringify(b.array.ensureArray(f.pv)),f.type[0]){case"js":b.sio.loadScript(f.src[0],null,{charset:"gb2312"});break;default:var i={pdps:g.sinaads_ad_pdps,src:f.src,type:f.type,link:f.link,width:d||300,height:e||250,position:g.sinaads_pop_position||"center center",closetime:g.sinaads_pop_closetime||0,monitor:f.origin_monitor||[],pv:f.pv||[]};b.PopMedia?new b.PopMedia(c,i):b.sio.loadScript(h,function(){new b.PopMedia(c,i)})}})}(b,B),function(b,c){c.register("skyscraper",function(c,d,e,f,g){var h=o||"./src/plus/SkyscraperMedia.js";f=f[0],a.sinaadsSkyscraperClickTAG=b.monitor.stringify(b.array.ensureArray(f.origin_monitor)),a.sinaadsSkyscraperViewTAG=b.monitor.stringify(b.array.ensureArray(f.pv));var i={main:{width:d,height:e,src:f.src[0]||"",type:f.type[0]||"",link:f.link[0]||""},mini:{src:f.src[1]||"",type:f.type[1]||"",link:f.link[1]||f.link[0]||"",width:g.sinaads_mini_width||d},monitor:f.origin_monitor,pv:f.pv,duration:g.sinaads_ad_duration||5,midWidth:g.sinaads_ss_mdWidth||950,top:g.sinaads_ss_top||0,left:g.sinaads_ss_left||0,pdps:g.sinaads_ad_pdps};b.SkyScraperMedia?new b.SkyScraperMedia(i):b.sio.loadScript(h,function(){new b.SkyScraperMedia(i)})})}(b,B),function(b,c){c.register("leftsuspend",function(c,d,e,f,g){var h=o||"./src/plus/LeftSuspendMedia.js";f=f[0],a.sinaadsLeftsuspendClickTAG=b.monitor.stringify(b.array.ensureArray(f.origin_monitor)),a.sinaadsLeftsuspendViewTAG=b.monitor.stringify(b.array.ensureArray(f.pv));var i={width:d,height:e,src:f.src[0]||"",type:f.type[0]||"",link:f.link[0]||"",monitor:f.origin_monitor,pv:f.pv,cookieKey:g.sinaads_ls_cookieKey,root:g.sinaads_ls_root,pdps:g.sinaads_ad_pdps};a.sinaadToolkit.LeftSuspendMedia?new a.sinaadToolkit.LeftSuspendMedia(i):a.sinaadToolkit.sio.loadScript(h,function(){new a.sinaadToolkit.LeftSuspendMedia(i)})})}(b,B),function(a,b){b.register("shopWindow",function(b,c,d,e,f){a.debug("sinaads:Rendering shopWindow.");var g=o||"./src/plus/ShopWindowMedia.js",h={pdps:f.sinaads_ad_pdps,width:c,height:d,content:e};a.ShopWindowMedia?new a.ShopWindowMedia(b,h):a.sio.loadScript(g,function(){new a.ShopWindowMedia(b,h)})})}(b,B),function(b,c){var d=b.RESOURCE_URL+"/release/spec/fyrad.html";c.register("shop",function(c,e,f,g,h){g=b.array.ensureArray(g),c.style.cssText+=";display:block;overflow:hidden;text-decoration:none;",c.innerHTML='<ins style="text-decoration:none;margin:0px auto;display:block;overflow:hidden;width:'+e+"px;height:"+f+'px;"></ins>',c=c.getElementsByTagName("ins")[0];for(var i,j=[],k=0;i=g[k++];)j.push({exposal_url:i.link[0],image_url:i.src[0],ad_title:i.src[1],oldPrice:i.src[2],price:i.src[3]});var l=h.extForView||{},m=l.template,n=b.url.ensureURL(l.logo),o={};b.iframe.init(o,e,f,!1),o.src=d,o.name=["tid="+encodeURIComponent(m),"logo="+encodeURIComponent(n),"goods="+encodeURIComponent(b.json.stringify(j))].join("&"),c.innerHTML=b.iframe.createHTML(o);try{a.sinaadsROC.done(h.pdps)}catch(p){}})}(b,B),function(b,c){c.register("bottomstream",function(c,d,e,f,g){b.debug("sinaads:Rendering bottomstream.");var h=o||"./src/plus/BottomStreamMedia.js";if(a.sinaadsROC.bottomstream=g.sinaads_ad_pdps,f=f[0],c.style.cssText="position:absolute;top:-9999px",a.sinaadsBottomStreamMonitor=f.origin_monitor||[],a.sinaadsBottomStreamClickTAG=b.monitor.stringify(b.array.ensureArray(f.origin_monitor)),a.sinaadsBottomStreamViewTAG=b.monitor.stringify(b.array.ensureArray(f.pv)),1===f.src.length){var i=document.createElement("div");switch(i.id="BottomSteamMediaWrap",document.body.insertBefore(i,document.body.firstChild),f.type[0]){case"js":b.sio.loadScript(f.src[0],null,{charset:"gb2312"});break;case"html":b.dom.fill(c,f.src[0])}}else{var j={main:{type:f.type[0]||"flash",src:f.src[0]||"",link:f.link[0]||"",width:d,height:e,top:g.sinaads_top||0},middle:{src:f.src[1]||"",type:f.type[1]||"flash",link:f.link[1]||f.link[0]||"",width:d},mini:{src:f.src[2]||"",type:f.type[2]||"flash",link:f.link[2]||f.link[0]||""},pdps:g.sinaads_ad_pdps,monitor:f.monitor};b.BottomStreamMedia?new b.BottomStreamMedia(j):b.sio.loadScript(h,function(){new b.BottomStreamMedia(j)})}})}(b,B),function(b,c){c.register("magicmap",function(c,d,e,f,g){if(b.debug("sinaads:Rendering magicmap."),a.sinaadsROC.magicmap=g.sinaads_ad_pdps,f=f[0],a.sinaadsMagicMapMonitor=f.origin_monitor||[],a.sinaadsMagicMapClickTAG=b.monitor.stringify(b.array.ensureArray(f.origin_monitor)),a.sinaadsMagicMapViewTAG=b.monitor.stringify(b.array.ensureArray(f.pv)),1===f.src.length)switch(f.type[0]){case"js":b.sio.loadScript(f.src[0],null,{charset:"gb2312"});break;case"html":b.dom.fill(c,f.src[0])}})}(b,B),function(b,c){c.register("followbutton",function(c,d,e,f,g){b.debug("sinaads:Rendering followbutton.");var h=o||"./src/plus/FollowButtonMedia.js";switch(a.sinaadsROC.followbutton=g.sinaads_ad_pdps,f=f[0],a.sinaadsFollowButtonClickTAG=b.monitor.stringify(b.array.ensureArray(f.origin_monitor)),a.sinaadsFollowButtonViewTAG=b.monitor.stringify(b.array.ensureArray(f.pv)),f.type[0]){case"js":b.sio.loadScript(f.src[0],null,{charset:"gb2312"});break;default:var i={pdps:g.sinaads_ad_pdps,src:f.src,type:f.type,link:f.link,width:d||180,height:e||150,position:g.sinaads_followbutton_position||"center center",showPos:g.sinaads_followbutton_show_pos,monitor:f.origin_monitor||[],pv:f.pv||[]};b.FollowButtonMedia?new b.FollowButtonMedia(c,i):b.sio.loadScript(h,function(){new b.FollowButtonMedia(c,i)})}})}(b,B);var C=function(b,c,d,f){function i(a){return/(^| )sinaads($| )/.test(a.className)&&"done"!==a.getAttribute("data-ad-status")}function j(a){return/(^| )sinaads($| )/.test(a.className)&&"async"===a.getAttribute("data-ad-status")}function k(a){var b,c=document.getElementsByTagName("ins"),d=0,e=c.length;for(b=c[d];d<e;b=c[++d])if(i(b)&&(!a&&!j(b)||b.id===a))return b;return null}function l(a,e,f){if(!e)return void b.debug("sinaads:"+f.sinaads_ad_pdps+", Cannot render this element because the data is unavilable.");var g=f.sinaads_ad_type||e.type,h=b.now(),i=e.size.split("*"),j=f.sinaads_ad_width||(f.sinaads_ad_width=Number(i[0]))||0,k=f.sinaads_ad_height||(f.sinaads_ad_height=Number(i[1]))||0,l=c.getExParamsQueryString();b.array.each(e.content,function(a,c){b.debug("sinaads:Processing the impression of the "+(c+1)+" creative of ad unit "+f.sinaads_ad_pdps),a.src=b.array.ensureArray(a.src),a.link=b.array.ensureArray(a.link),a.type=b.array.ensureArray(a.type);var d=[],e=[],h=a.pv;b.array.each(h,function(a,c){if(l&&a&&(-1!==a.indexOf("sax.sina.com.cn/view")||-1!==a.indexOf("sax.sina.com.cn/dsp/view"))&&(a+=(-1!==a.indexOf("?")?"&":"?")+l),
h[c]=b.monitor.parseTpl(a,f),b.debug("sinaads:Recording the impression of ad unit "+f.sinaads_ad_pdps+" via url "+a),h[c])if("videoWindow"===g)setTimeout(function(a){return function(){b.sio.log(a)}}(h[c]),1e3);else{if("magicmap"===g)return!1;b.sio.log(h[c])}}),b.array.each(a.monitor,function(a){a&&e.push(b.monitor.parseTpl(a,f))}),b.array.each(a.origin_monitor,function(a){a&&e.push(b.monitor.parseTpl(a,f))}),a.origin_monitor=e;var i,j,k;b.array.each(a.monitor,function(a){a&&-1!==a.indexOf("sax.sina.com.cn/click")?(a=a.replace(/&url=$/,"")+(l?"&"+l:"")+"&url=",k=b.monitor.parseTpl(a,f)):a&&-1!==a.indexOf("sax.sina.com.cn/dsp/click")?(a=a.replace(/&url=$/,"")+(l?"&"+l:"")+"&url=",i=b.monitor.parseTpl(a,f)):a&&-1!==a.indexOf("sax.sina.com.cn/mfp/click")?(a=a.replace(/&url=$/,"")+(l?"&"+l:"")+"&url=",j=b.monitor.parseTpl(a,f)):(a=b.monitor.parseTpl(a,f))&&d.push(a),b.debug("sinaads:Processing the click of ad unit "+f.sinaads_ad_pdps+" via url "+a)}),k&&d.push(k),j&&d.push(j),i&&d.push(i);var m=a.link;b.array.each(m,function(a,c){m[c]=b.monitor.createTrackingMonitor(a,d)})}),e.template&&e.logo&&(f.extForView=f.extForView||{},f.extForView.template=e.template,f.extForView.logo=e.logo),d.render(g,a,j,k,e.content,f),e.highlight&&"embed"===(f.sinaads_ad_type||e.type)&&(a.style.outline="2px solid #f00"),b.debug("sinaads:Ads Rendering is complete. (pdps:"+f.sinaads_ad_pdps+", time elpased:"+(b.now()-h)+"ms)")}function m(a,d){var e=d.sinaads_ad_pdps;f.orderController.ready(e,function(a,c,d,e,g,h){b.dom.addClass(a,"sinaads-done"),f.frequenceController.disable(c),b.isFunction(h.sinaads_beforerender)&&!1===h.sinaads_beforerender(a,g,h)||(l(a,g,h),b.isFunction(h.sinaads_success_handler)&&h.sinaads_success_handler(a,g,h))},[a,e,d.sinaads_frequence||0,h+e+"_disabled",c.get(e),d])}function n(a,c){var d=c.sinaads_ad_pdps;f.orderController.ready(d,function(a,c){f.orderController.done(c.sinaads_ad_pdps),b.dom.addClass(a,"sinaads-fail"),c.sinaads_cannot_empty&&b.debug("Use Default ad data."),b.isFunction(c.sinaads_fail_handler)&&c.sinaads_fail_handler(a,c)},[a,c])}function o(a,b){return function(){var c=b.sinaads_ad_delay;c&&(c=parseInt(c,10))?setTimeout(function(){m(a,b)},1e3*c):m(a,b)}}function p(a,b){return function(){n(a,b)}}return function(d){var h=d.element,j=d.params||{};if("string"==typeof h&&(h=document.getElementById(h)),h){if(!i(h)&&!(h=h.id&&k(h.id)))return void b.debug("sinaads:Rendering of this element has been done. Stop rendering.",h);if(!("innerHTML"in h))return void b.debug("sinaads:Cannot render this element.",h)}else if(!(h=k()))return void b.debug("sinaads:Rendering of all elements in the queue is done.");h.setAttribute("data-ad-status","done"),j.sinaads_uid=g++;for(var l=h.attributes,m=l.length,q=0;q<m;q++){var r=l[q];if(/data-/.test(r.nodeName)){var s=r.nodeName.replace("data","sinaads").replace(/-/g,"_");j.hasOwnProperty(s)||(j[s]=r.value)}}j.sinaads_page_url=b.url.top;var t=j.sinaads_ad_pdps;a._sinaadsCacheDom||(a._sinaadsCacheDom={}),a._sinaadsCacheDom[t]=h;var u=j.sinaads_ad_data,v=0;u&&(u=b.array.ensureArray(u),v=u.length<=1?0:c.getSeed(t)%u.length,c.add(t,u[v]),b.debug("sinaads: Use local data in count "+v)),f.frequenceController.register(t,j.sinaads_frequence||0),t&&-1!==x.indexOf("|"+t+"|")&&!e(b.url.top)?n(h,j):t&&!f.frequenceController.isDisabled(t)?c.request(t).done(o(h,j)).fail(p(h,j)):n(h,j)}}(b,A,B,z);return A.init(function(){b.debug("sinaads:Begin to scan and render all ad placeholders."+b.now());var c=a.sinaads;if(c&&c.shift)for(var d,e=100;(d=c.shift())&&0<e--;)C(d);a.sinaads={push:C}}),a.sinaadsROC=z.orderController,a.sinaadsRFC=z.frequenceController,a._sinaadsCacheData=A.get(),a.sinaadsGetSeed=A.getSeed,a.sinaadsRenderHandler=B.handlerMap,!0}(window,window.sinaadToolkit);
