
/*! Txplayer - v3.0.0 - 2018-09-07 15:20:01
 * Copyright (c) 2018
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(231)},231:function(a,b,c){function d(a){f=Txplayer.$,this.dataset={},this.context=a,this.dataset.hideClass="txp_none",this.dataset.showClass="txp_show",this.init()}function e(a){j&&(i||(i=document.getElementsByClassName("txp_clipboard")[0]),i.value=a,i.select(),i.setSelectionRange(0,a.length),document.execCommand("copy"))}var f,g=c(232),h=c(233),i=null,j=document.queryCommandSupported&&document.queryCommandSupported("copy"),k=Txplayer.util;d.prototype={init:function(){j&&(this.write(),this.addEventListener())},write:function(){var a=this,b={rightClickMenuWrapper:"txp-right-click-menu-wrapper",videoInfo:"txp-right-click-menu-video-info",copyCurrentPageUrl:"txp-right-click-menu-copy-current-page-url",copyCurrentTimePageUrl:"txp-right-click-menu-copy-current-time-page-url",copyConsole:"txp-right-click-menu-copy-console",copyPlayerVersion:"txp-right-click-menu-copy-player-version"},c={rightClickMenuCopySuccess:"txp-right-click-menu-copy-success"};b.playerVersion=Txplayer.dataset.ver,this.dataset.renderData=b;var d=f.tmpl(g,b);f("body").append(d),this.dataset.$playermod=this.context.dataset.$playermod,this.dataset.$playermod.append(f.tmpl(h,c)),a.dataset.$rightClickMenuWrapper=f("body").find('[data-role="'+b.rightClickMenuWrapper+'"]'),["videoInfo","copyCurrentPageUrl","copyCurrentTimePageUrl","copyConsole","copyPlayerVersion"].forEach(function(c){a.dataset["$"+c]=a.dataset.$rightClickMenuWrapper.find('[data-role="'+b[c]+'"]')}),a.dataset.$rightClickMenuCopySuccess=this.dataset.$playermod.find('[data-role="'+c.rightClickMenuCopySuccess+'"]')},remove:function(){this.dataset.$rightClickMenuWrapper&&this.dataset.$rightClickMenuWrapper.off("click").remove(),i&&document.body.removeChild(i)},addEventListener:function(){function a(a){return 0===o.length||(!!n.context.dataset.isPlayingAd||(!j||(!!k.browser.ie||(!(f(a.target).is(":visible")&&f(a.target).hasClass("txp_player")||f(a.target).parents().hasClass("txp_player"))||(b=a.clientX,c=a.clientY,h=n.context.dataset.$playermod.width(),i=n.context.dataset.$playermod.height(),l=n.context.dataset.$playermod.offset().left,m=n.context.dataset.$playermod.offset().top,d=n.dataset.$rightClickMenuWrapper.width(),g=n.dataset.$rightClickMenuWrapper.outerHeight(),b-l>h-d&&(n.context.dataset.isWindowFullscreen||n.context.dataset.isBrowserFullscreen||!k.isVqqOrFilmqq())&&(b=h-d+l),c-m>i-g&&(n.context.dataset.isWindowFullscreen||n.context.dataset.isBrowserFullscreen||!k.isVqqOrFilmqq())&&(c=i-g+m),n.dataset.$rightClickMenuWrapper.css({left:b,top:c}),n.show(),!1)))))}var b,c,d,g,h,i,l,m,n=this,o=f("#txplayer_"+n.context.dataset.playerId);n.context.dataset.$playermod.contextmenu?n.context.dataset.$playermod.contextmenu(a):f(window).on("contextmenu",a),f(window).on("click",function(a){1==a.which&&n.hide()}),this.dataset.$rightClickMenuWrapper.on("click",function(a){var b=a.target,c=b.getAttribute("data-role"),d="",f=n.dataset.renderData;switch(c){case f.copyCurrentPageUrl:d=location.protocol+"//v.qq.com/x/page/"+n.context.dataset.vid+".html";break;case f.copyCurrentTimePageUrl:d=k.appendParamsToUrl(location.protocol+"//v.qq.com/x/page/"+n.context.dataset.vid+".html",{start:n.context.dataset.currentTime});break;case f.copyConsole:d=n.context.msg.getData("getConsoleData")||"还没有调试信息喔",window.JSON&&JSON.stringify&&(d=JSON.stringify(d));break;case f.copyPlayerVersion:d=Txplayer.dataset.ver}c==f.videoInfo?n.context.msg.broadcast("showUiConsole"):e(d),n.hide(),n.dataset.$rightClickMenuCopySuccess.removeClass("txp_none").addClass(n.dataset.showClass),setTimeout(function(){n.dataset.$rightClickMenuCopySuccess.addClass("txp_none").removeClass(n.dataset.showClass)},1e3)}),this.dataset.eventsList={},this.dataset.eventsList[k.getUniqueMsgKey("windowFullscreenChange")]=function(a){a?n.dataset.$playermod.append(n.dataset.$rightClickMenuWrapper):f("body").append(n.dataset.$rightClickMenuWrapper)},this.dataset.eventsList[k.getUniqueMsgKey("browserFullscreenChange")]=function(a){a?n.dataset.$playermod.append(n.dataset.$rightClickMenuWrapper):f("body").append(n.dataset.$rightClickMenuWrapper)},f.each(this.dataset.eventsList,function(a,b){n.context.msg.on(a,b)})},hide:function(){this.context.dataset.isRightClickMenu=!1,this.dataset.$rightClickMenuWrapper.addClass(this.dataset.hideClass)},show:function(){this.context.dataset.isRightClickMenu=!0,this.dataset.$rightClickMenuWrapper.removeClass(this.dataset.hideClass)}},Txplayer.register("UiRightClickMenu",d)},232:function(a,b){a.exports='<txpdiv class="txp_contextmenu txp_none" data-role="<%=rightClickMenuWrapper%>" style="overflow:hidden">\r\n    <txpdiv class="txp_menuitem" data-role="<%=videoInfo%>">视频信息</txpdiv>\r\n    <txpdiv class="txp_menuitem" data-role="<%=copyCurrentPageUrl%>">复制视频页面地址</txpdiv>\r\n    <txpdiv class="txp_menuitem" data-role="<%=copyCurrentTimePageUrl%>">复制当前时间的页面地址</txpdiv>\r\n    <txpdiv class="txp_menuitem" data-role="<%=copyConsole%>">复制调试信息</txpdiv>\r\n    <txpdiv class="txp_menuitem" data-role="<%=copyPlayerVersion%>"><%=playerVersion%></txpdiv>\r\n    <textarea class="txp_clipboard" style="position: absolute; left: 100%; top: 0px;"></textarea>\r\n    <!--<textarea class="ytp-html5-clipboard" style="position: absolute; left: -9999px; top: 0px;"></textarea>-->\r\n</txpdiv>\r\n'},233:function(a,b){a.exports='<txpdiv class="txp_overlay_link txp_none" data-role="<%=rightClickMenuCopySuccess%>">\r\n    <txpdiv class="txp_icon_link">\r\n        <svg class="txp_icon" version="1.1" viewBox="0 0 36 36" >\r\n            <use class="txp_svg_symbol" xlink:href="<%=svgPrefix%>#txp_svg_link" />\r\n        </svg>\r\n    </txpdiv>\r\n</txpdiv>\r\n'}});
/*! Txplayer - v3.0.0 - 2018-09-07 15:20:01
 * Copyright (c) 2018
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(261)},261:function(module,exports){!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=4)}([function(module,exports,__webpack_require__){function AdBase(a){gpgp.log("new AdBase:",a.adtype),this.params=a,this.msg=a.msg,this.api=a.api,this.context=a,this.adplayer=a.adplayer,this.gpDataset=a.gpDataset,this.init(a)}var AdUi=__webpack_require__(11),ReportDp3=__webpack_require__(14),Tool=__webpack_require__(3);AdBase.prototype={init:function(a){this.disable||(gpgp.log("load ad type:",new Date,a.adtype),this.adtype=a.adtype,this.orderList={},this.dataset={},this.duration=-1,this.hasRequest=!1,this.vid=a.vid,this.adJson=a.adJson,this.reportIndex=0,this.fileLoadSize=0,this.initData(a),this.loadAd(a))},initData:function(){this.hasInit=!1,this.reportIndex=0,this.playList=[]},broadcast:function(a,b){this.msg.broadcast(a,b)},sendAdInfo:function(){this.broadcast("getAdInfoEvt",{adtype:this.adtype,duration:this.duration})},loadAd:function(a){if(gpgp.log("loadAd",a),this.dpReporter=new ReportDp3(this.gpDataset),a.errorcode)this.dpReporter.reportStep(1,a);else if(a.adJson){if(this.handleOrder(a.adJson),this.getAdList(this.orderList),this.sendAdInfo(),gpgp.log("loadAd",this.orderList),0==this.playList.length){this.reportAd(this.adJson.adList.item.length);var b=this;return void setTimeout(function(){b.stopAd()},0)}this.initUi(AdUi,a.dom,a.css),this.loadRes(this.orderList.adList),this.dpReporter.reportStep(1,this.orderList)}},getOrderParma:function(a,b,c){return a&&a[b]&&a[b].hasOwnProperty(c)?a[b][c]:""},handleOrder:function(a){gpgp.log("handleOrder:",a);var b={};if(this.hasRequest=!0,a&&a.adList&&a.adList.item)return b.vid2aid=this.getOrderParma(a,"adLoc","vid2aid"),b.oid2url=this.getOrderParma(a,"adGetv","oid2url"),b.adid=this.getOrderParma(a,"adLoc","aid"),b.forbidSkip=this.getOrderParma(a,"adLoc","adFlag")+""!="0",b.isVip=1==this.getOrderParma(a,"adLoc","isvip")||2==gpgp.api.getUserType(),this.orderList.adList=[],this.dataset.isAdPlayStart=!1,b.reportIndex=0,this.dataset.isPing=!1,a.adList.item instanceof Array?b.adList=a.adList.item:a.adList.item.image&&b.adList.push(a.adList.item),b.adTypeList=this.filter(b.adList),b.adcost=a.adcost,b.adtype=this.adtype,this.orderList=b},getRes:function(a,b){if(!a)return"";a instanceof Array&&(a=a[0]);var c={vid:a.vid,url:a.url,fileSize:parseInt(a.cs)/1024||1};return b?c[b]:c},isVip:function(a){return a&&a.adLoc&&1==a.adLoc.isvip||2==gpgp.api.getUserType()},renderAd:function(){},stopAd:function(a){gpgp.log("stopAd",this.adtype),this.playState=6,a&&this.clearDelayReport(),a!==!0&&this.broadcast("stopAdEvt",{adtype:this.adtype}),this.adplayer[this.adtype]=null,this.ui&&(this.ui.dom.gpAd.remove(),this.ui.dom.gpAdWrapper&&this.ui.dom.gpAdWrapper.remove())},openAdLink:function(a){if(this.currentAdInfo&&this.currentAdInfo.link){var b=this.gpDataset.lastActionTime||0;if((new Date).getTime()-b<300)return void gpgp.log("click speed too fast");this.gpDataset.lastActionTime=(new Date).getTime(),!gpgp.pf.mobile||"ZT"==this.adtype&&"WZ"==this.adtype||this.pauseAd();var c=this,d=function(b){if(!b)if(c.gpDataset.isPc){window.open(c.currentAdInfo.link);var d=gpgp.$.extend({},c.currentAdInfo);a&&(d.txpType=a),c.broadcast("openAdLink",d)}else window.location.href=c.currentAdInfo.link};if(this.currentAdInfo.clickReportUrlOther&&this.currentAdInfo.clickReportUrlOther.reportitem)if(c.gpDataset.isPc)for(var e=0,f=this.currentAdInfo.clickReportUrlOther.reportitem;e<f.length;e++)c.dpReporter.sendReport(f[e].url);else{gpgp.log("log click");for(var g=[],e=0,f=this.currentAdInfo.clickReportUrlOther.reportitem;e<f.length;e++)g.push(f[e].url);Tool.loadResource(g,d)}else this.gpDataset.isPc||d(null);this.gpDataset.isPc&&d(null)}},isEmpty:function(a){return parseInt(a.order_id)<100||"Empty"==a.display_code},isLastAd:function(a){return!!(this.playList&&this.playList.length>0)&&this.playList[this.playList.length-1].oIdx==a},filter:function(a){var b,c={},d=this;a=a instanceof Array?a:[];for(var e=a.length,f=0;f<e;f++)b=a[f]||{},c[b.type]||(c[b.type]=[]),c[b.type].push(b),b.oIdx=f+1,b.lcount=c[b.type].length,b.duration=parseInt(b.duration)||0,b.isRichMedia=d.filterRichMedia(b),b.isEmpty=d.isEmpty(b),b.isEmpty||(b.isVideoAd=gpgp.isVideoAd(b.type),(!b.isVideoAd||b.image&&b.duration)&&(b.image=b.image instanceof Array?b.image[0]:b.image,d.getPlayList(b)));return c},filterRichMedia:function(a,b){return!!(a&&a.display_code&&a.display_code.length>0&&"Empty"!=a.display_code)&&(b&&b.push(a),gpgp.log("vpaid"),!0)},getRichData:function(item){var params,richdata;if(item&&item.params&&(params=decodeURIComponent(item.params)),params){richdata=params.split("richdata=")[1];try{richdata=JSON.parse(richdata)}catch(e){eval("richdata="+richdata)}return richdata}return""},getRichRes:function(a,b){if("string"==typeof b){if(a&&a.plugins&&a.plugins[b])return a.plugins[b]}else if(gpgp.isArray(b))for(var c,d=this,e=0,f=b.length;e<f;e++)if(c=d.getRichRes(a,b[e]))return c;return""},isSupportAdtype:function(a){return a==this.gpDataset.adtypeMap[this.adtype]||this.supportAdtype&&this.supportAdtype.indexOf(a)>=0},getPlayList:function(a,b){if(a.image&&a.image.url&&this.isSupportAdtype(a.type)){var c,d=!1;c=this.supportResFormat?this.supportResFormat:a.isVideoAd?"mp4":["jpg","png","jpeg"],this.supportRichMedia&&a.isRichMedia?(a.richdata=this.getRichData(a),a.richRes=this.getRichRes(a.richdata,this.supportRichMedia),a.richRes&&(d=!0)):gpgp.checkSuffix(a.image.url,c)&&(d=!0),d?(a.link="Y"===a.no_click?"":a.link,this.playList.push(a)):this.setReportNull(a)}},isSupport:function(){},setReportNull:function(a){a.order_id="1",a.reportUrl=a.reportUrl.replace(/(livemsg\?o\=)(\d+)(\&)/,"$190$3"),a.reportUrlOther=null,a.reportUrlSDK=null},reportAd:function(a){a||(a=1);var b=this,c=a;for(this.isLastAd(a)&&(a=this.adJson.adList.item[this.adJson.adList.item.length-1].oIdx);b.reportIndex<a;)b.adJson&&b.adJson.adList&&b.adJson.adList.item&&b.adJson.adList.item[b.reportIndex]&&(b.reportIndex<a&&b.isEmpty(b.adJson.adList.item[b.reportIndex])||b.reportIndex==c-1)&&(gpgp.log("reportAd",b.reportIndex,a),b.reportAdByData(b.adJson.adList.item[b.reportIndex])),b.reportIndex++},report:function(a){a&&(a.time>0?(gpgp.log("延时",a.time,a.url),this.delayReport(a.url,parseInt(a.time-100))):(gpgp.log("report:",a.url),this.sendReport(a.url)))},sendReport:function(a){gpgp.sendReport(a)},getReportParams:function(a,b,c){var d=this,e={from:d.gpDataset.from,pf:d.gpDataset.pf,v:d.gpDataset.passThrought?d.gpDataset.passThrought.v:"",dura:d.currentAdInfo?d.currentAdInfo.duration:"",coverid:d.gpDataset.cid||"",vptag:d.gpDataset.vptag||"",url:location.href,oadid:d.adJson.adLoc.aid||"",lcount:b.lcount||1,t:b.ReportTime||0,pf_ex:d.gpDataset.pf_ex,tpid:d.adJson.adLoc.tpid||""};return"Empty"==b.display_code&&(e.chid=d.gpDataset.chid),e},reportAdByData:function(a){var b=this;if(gpgp.isArray(a)&&(a=a[0]),a&&"object"==typeof a){if(a.reportUrl||a.report_url){var c=a.reportUrl||a.report_url,d={url:document.URL};gpgp.log("reportAdByDatareportAdByData",a),d=gpgp.$.extend(d,b.getReportParams(b.playOidx,a));var e=gpgp.appendParamsToUrl(c,d);this.report({time:parseInt(a.ReportTime),url:e})}a.reportUrlOther&&a.reportUrlOther.reportitem&&(gpgp.isArray(a.reportUrlOther.reportitem)||(a.reportUrlOther.reportitem=[a.reportUrlOther.reportitem]),gpgp.$.each(a.reportUrlOther.reportitem,function(a,c){c&&c.url&&b.report({time:parseInt(c.reporttime),url:c.url,isOther:!0})})),a.reportUrlSDK&&a.reportUrlSDK.reportitem&&(gpgp.isArray(a.reportUrlSDK.reportitem)||(a.reportUrlSDK.reportitem=[a.reportUrlSDK.reportitem]),gpgp.$.each(a.reportUrlSDK.reportitem,function(a,c){c&&c.url&&b.report({time:parseInt(c.reporttime),url:c.url,isOther:!0})}))}},delayReport:function(a,b){var c=this,d=setTimeout(function(){gpgp.log("延时上报",b,a),c.sendReport(a)},b);this.dataset.delayReportArr||(this.dataset.delayReportArr=[]),this.dataset.delayReportArr.push(d)},clearDelayReport:function(){var a=this;if(a.dataset.delayReportArr)for(var b=0,c=a.dataset.delayReportArr.length;b<c;b++)a.dataset.delayReportArr[b]&&clearTimeout(a.dataset.delayReportArr[b]),a.dataset.delayReportArr[b]=null},isShortVideo:function(){var a=this,b=a.adJson.adLoc.duration;return b&&b>0&&b<180}},module.exports=AdBase},function(module,exports,__webpack_require__){(function(AdBase,vpaid){function LinearAd(a){gpgp.log("new linearad"),this.supportResFormat="mp4",this.supportRichMedia="richMediaJs",this.supportAdtype=a.gpDataset.videoAdType,AdBase.apply(this,arguments)}gpgp.extend("LinearAd",LinearAd,AdBase),LinearAd.prototype.initData=function(a){gpgp.log("initData"),this.hasInit=!1,this.reportIndex=0,this.autoPlay=a.autoPlay||!1,this.hasRender=!1,this.playList=[],this.playIndex=0,this.playOidx=0,this.playState=0,this.preloadIndex=-1,this.preloadOidx=-1,this.errorList={},this.startTime=+new Date,this.isrichPause=!1,this.reportData={videopt:[],videott:[],adtt:0,adtt_start:0,firstview:0,firstadview:window.performance?window.performance.now():0,adfbt:0,errorcode:0}},LinearAd.prototype.initUi=function(a,b,c){this.hasInit||(this.ui||(this.ui=new a(b,c,{isSkipAdButtonShow:this.isSkipAdButtonShow(),isUseMobileUI:this.gpDataset.isUseMobileUI,isVshou:this.gpDataset.isVshou},this.adtype)),this.currentVideo=this.ui.dom.gpVideoAdPlayer[0],this.currentVideo.dataset.tag="current",this.currentVideo.dataset.index="0",this.nextVideo=this.ui.dom.gpVideoAdPlayer[1],this.nextVideo.dataset.tag="preload",this.nextVideo.dataset.index="1",this.playIndex=0,this.hasInit=!0)},LinearAd.prototype.getAdList=function(a){gpgp.log("play list:",this.playList),this.forbidSkip=a.forbidSkip,this.isVip=a.isVip,this.adtime=this.getAdDuration(this.playList),this.duration=this.adtime.duration,gpgp.log("play list:",this.adtime),a.trueview=this.isTrueview();for(var b=0;b<this.playList.length;b++)this.reportData.videopt.push(this.playList[b].duration)},LinearAd.prototype.loadRes=function(a){if(6!=this.playState){gpgp.log("loadRes");var b=this.getAdInfo("current");this.setSrc(b,this.playIndex),this.playOidx=this.currentAdInfo.oIdx,this.initVolume(),this.eventStart()}},LinearAd.prototype.loadStart=function(a){gpgp.log(a.index,"loadstart oid",this.playList[a.index].oIdx),"preload"==a.video.dataset.tag?this.nextAdInfo.loadStartTime=(new Date).getTime():this.currentAdInfo.loadStartTime=(new Date).getTime(),this.broadcast("loadStartEvt",{adtype:this.adtype,index:this.playList[a.index].oIdx,preload:a.preload,duration:parseInt(this.playList[a.index].duration)}),this.listenTouch(1)},LinearAd.prototype.loadReady=function(a){6!=this.playState&&(a&&a.preload||(gpgp.log("loadReady",new Date),gpgp.log("loadReady",this.orderList),this.broadcast("loadReadyEvt",{adtype:this.adtype,index:this.playList[a.index].oIdx,preload:a.preload}),this.autoPlay&&this.playAd()))},LinearAd.prototype.loadComplete=function(a){6!=this.playState&&(this.playList[a.index].loadComplete||(gpgp.log("loadComplete:",a),this.playList[a.index].loadComplete=!0,a.index==this.playList.length-1?(gpgp.log("all ad loaded"),this.broadcast("loadCompleteEvt",{isAllEnd:!0,adtype:this.adtype,index:this.playList[a.index].oIdx,duration:parseInt(this.playList[a.index].duration)})):a.preload||(this.broadcast("loadCompleteEvt",{adtype:this.adtype,index:this.playList[a.index].oIdx,duration:parseInt(this.playList[a.index].duration)}),this.preload())))},LinearAd.prototype.preload=function(a){if(6!=this.playState){var b=this.playIndex+1;if(!(b>=this.playList.length)){gpgp.log("preload oid",this.playList[b].oIdx),this.preloadIndex=b,this.preloadOidx=this.playList[b].oIdx;var c=this.getAdInfo("next");this.setSrc(c,b,!0)}}},LinearAd.prototype.setSrc=function(a,b,c){a.isRichMedia?a.player.loadAd({index:b,preload:c,adItem:this.playList[b],api:this},this):(a.player.src=a.url,a.player.dataset.index=b)},LinearAd.prototype.playAd=function(a,b){if(6!=this.playState){if("vpaid"==a&&(this.isrichPause=!1),0===this.playState||5===this.playState||6===this.playState){this.currentVideo.style.display="block",this.nextVideo.style.display="none",this.getAdInfo("current"),this.showUi(),this.currentAdInfo.player.play(),this.playOidx=this.currentAdInfo.oIdx,gpgp.log("videostep playAd",this.playOidx),this.reportData.videott_start=(new Date).getTime(),this.broadcast("playStartEvt",{adtype:this.adtype,index:this.playOidx,vid:this.currentAdInfo.vid}),gpgp.log(this.playIndex,"play ad ",this.playOidx,this.playList);try{this.reportAd(this.playOidx)}catch(c){gpgp.log(c)}}else{if(4!==this.playState)return void gpgp.log("is playing now");if(this.currentAdInfo.isRichMedia&&this.isrichPause)return;this.currentAdInfo.player.play()}this.startAdCountDownTime(),this.playState=3}},LinearAd.prototype.playNextAd=function(a,b){if(6!=this.playState){if(this.playIndex>=this.playList.length-1)return void this.stopAd();this.nextVideo=this.ui.dom.gpVideoAdPlayer[this.playIndex%2],this.nextVideo.dataset.tag="preload",this.playIndex++,this.currentVideo=this.ui.dom.gpVideoAdPlayer[this.playIndex%2],this.currentVideo.dataset.tag="current",this.playState=5,this.playAd(),this.preload()}},LinearAd.prototype.playStart=function(a){6!=this.playState&&(this.currentAdInfo.hasPlayStart||(this.currentAdInfo.hasPlayStart=!0))},LinearAd.prototype.playing=function(){if(6!=this.playState){var a=this;a.dataset.lastTimer||(a.dataset.lastTimer=setInterval(function(){a.broadcast("playProgressEvt",{adtype:a.adtype,index:a.playOidx,playTime:a.adtime.adPlayedSeconds,duration:a.adtime.duration})},1e3))}},LinearAd.prototype.playError=function(a){var b=this.playList[a.index];if(b){var c=b.oIdx;if(this.errorList[c])return void gpgp.log(c,"is not exist");this.errorList[c]=this.playList.splice(a.index,1),gpgp.log(a.index,a.preload,c,"error",a.error),a.preload?(gpgp.log(this.preloadIndex,"preload",this.preloadOidx,"error",a.error.code),gpgp.$.extend(this.adtime,this.getAdDuration(this.playList)),this.preload()):(gpgp.log(this.playIndex,"play",this.playOidx,"error",a.error.code),0==this.playList.length?this.stopAd():(gpgp.$.extend(this.adtime,this.getAdDuration(this.playList)),this.loadRes(this.playList))),gpgp.log("getAdDuration",this.playList,this.adtime.duration),this.broadcast("playErrorEvt",{adtype:this.adtype,index:c,isAllEnd:a.index==this.playList.length,errorType:a.error.type,errorCode:a.error.code}),gpgp.log("error list",this.errorList)}},LinearAd.prototype.playComplete=function(a){gpgp.log("videostep playComplete",a.index,this.playIndex),a.index==this.playIndex&&(gpgp.log("videostep",this.playIndex,"play end"),this.reportData.videott.push((new Date).getTime()-this.reportData.videott_start),this.reportData.videott_start=-1,this.broadcast("playEndEvt",{adtype:this.adtype,index:this.playOidx}),this.playNextAd())},LinearAd.prototype.pauseAd=function(a){4!=this.playState&&(this.stopAdCountDownTime(),this.currentAdInfo&&this.currentAdInfo.isRichMedia&&4==this.currentAdInfo.player.playState&&(this.isrichPause=!0),this.playState=4,this.currentAdInfo.player.pause(),this.broadcast("pauseAdEvt",{adtype:this.adtype,index:this.playOidx}))},LinearAd.prototype.stopAd=function(a){6!=this.playState&&(a||this.reportAd(this.adJson.adList.item.length),this.playState=6,this.stopAdCountDownTime(),this.eventEnd(),this.listenTouch(0),this.currentVideo&&(this.currentVideo.pause(),gpgp.$(this.currentVideo).removeAttr("src"),gpgp.$(this.nextVideo).removeAttr("src")),this.dataset.lastTimer&&(clearInterval(this.dataset.lastTimer),this.dataset.lastTimer=null),this.reportData.videott_start>0&&this.reportData.videott.push((new Date).getTime()-this.reportData.videott_start),this.reportData.adtt=(new Date).getTime()-this.reportData.adtt_start,this.dpReporter.reportStep(2,this.orderList,this.reportData),AdBase.prototype.stopAd.apply(this,arguments))},LinearAd.prototype.closeAd=function(){return this.dataset.trueview?(this.dpReporter.reportStep(2,this.orderList,{adclose:this.currentAdInfo.order_id,closetime:(new Date).getTime()-this.reportData.videott_start}),this.stopAd("closeAd")):void(this.isShortVideo()?(this.dpReporter.reportStep(2,this.orderList,{adclose:this.currentAdInfo.order_id,closetime:(new Date).getTime()-this.reportData.videott_start}),this.stopAd("closeAd")):this.isSkipAdButtonShow()&&(gpgp.pf.mobile&&!gpgp.pf.os.ipad?gpgp.api.txLoginOnMobile&&"function"==typeof gpgp.api.txLoginOnMobile.isLogin&&gpgp.api.txLoginOnMobile.isLogin(function(a){0===a?gpgp.api.txLoginOnMobile.goLogin():location.href="http://film.qq.com/weixin/upay.html?aid=V0$$4:1"}):gpgp.api.showOpenVIPGuide(),this.pauseAd()))},LinearAd.prototype.loading=function(a){var b=this.getLoadingProgress(a);if(b>=1)return void this.loadComplete({index:a.dataset.index,preload:"preload"==a.dataset.tag,video:a});var c,d=1,e=(new Date).getTime();c="preload"==a.dataset.tag?this.nextAdInfo:this.currentAdInfo,d=c.fileSize,e-=c.loadedTime?c.loadedTime:c.loadStartTime,c.loadedTime=(new Date).getTime();var f=b*d;c.loadFileSize&&(f-=c.loadFileSize),c.loadFileSize=b*d;var g=(1e3*f/e).toFixed(1);this.broadcast("loadProgressEvt",{adtype:this.adtype,speed:g}),gpgp.log(a.dataset.index,"loading",b.toFixed(1),f.toFixed(1),c.loadFileSize.toFixed(1),d.toFixed(1),e,g)},LinearAd.prototype.listenTouch=function(a){if("mac"===this.gpDataset.pf_ex){var b=0,c=null,d=function(a){gpgp.log("seekingAction"),"current"==a.target.dataset.tag&&(c=a.target,b<c.currentTime&&(c.currentTime=b))},e=setInterval(function(){c&&(b=c.currentTime)},1e3);a?(this.ui.dom.gpVideoAdPlayer.off("seeking.touchbarAd"),this.ui.dom.gpVideoAdPlayer.off("seeked.touchbarAd"),this.ui.dom.gpVideoAdPlayer.on("seeking.touchbarAd",d),this.ui.dom.gpVideoAdPlayer.on("seeked.touchbarAd",d)):(clearInterval(e),this.ui.dom.gpVideoAdPlayer.off("seeking.touchbarAd"),this.ui.dom.gpVideoAdPlayer.off("seeked.touchbarAd"))}},LinearAd.prototype.getLoadingProgress=function(a){var b=0,c=1;try{var d=a.buffered.length-1;if(d<0)return 0;b=a.buffered.end(d)||0,b=parseInt(1e3*b+1)/1e3,c=a.duration}catch(e){gpgp.log(e)}return Math.min(b/c,1)},LinearAd.prototype.eventStart=function(a){if(!this.eventList){var b=this;this.eventList={gpVideoAdPlayer:{loadstart:function(){b.reportData.adfbt_start=(new Date).getTime(),b.loadStart({index:this.dataset.index,preload:"preload"==this.dataset.tag,video:this}),gpgp.log("videostep loadstart")},progress:function(){b.loading(this)},canplay:function(){"current"==this.dataset.tag&&(0===b.reportData.adtt&&b.reportData.adtt_start<=0&&(gpgp.log("videostep first:",b.playList),b.reportData.adfbt=(new Date).getTime()-b.reportData.adfbt_start,b.reportData.adtt_start=(new Date).getTime(),"undefined"!=typeof window.performance&&(b.reportData.firstview=window.performance.now(),b.reportData.firstadview=window.performance.now()-b.reportData.firstadview)),gpgp.log("videostep canplay evt",this.dataset.tag,b.reportData.adfbt),b.loadReady({index:this.dataset.index,preload:"preload"==this.dataset.tag,video:this}))},canplaythrough:function(){b.loadComplete({index:this.dataset.index,preload:"preload"==this.dataset.tag,video:this})},playing:function(){b.playStart({index:this.dataset.index,shotTime:5e3,video:this})},timeupdate:function(){3==b.playState&&b.playing()},error:function(){gpgp.log("error evt",this.dataset.tag),b.shotAd&&b.shotAd({index:this.dataset.index,shotTime:0,video:this});var a="videoError";this.error&&this.error.constructor&&this.error.constructor.name&&(a=this.error.constructor.name),b.playError({index:this.dataset.index,preload:"preload"==this.dataset.tag,error:{type:a,code:this.error.code}}),gpgp.log("videostep error evt",b.reportData.adtt,b.reportData.adtt_start),b.reportData.videott.push(0),b.reportData.adtt_start=-1,gpgp.log("videostep ",this.dataset),gpgp.log("videostep ",b.orderList);try{b.dpReporter.reportStep(3,b.orderList,{tpindex:this.dataset.index,oid:b.orderList[this.dataset.index].order_id,errorcode:2301,adload:0})}catch(c){gpgp.log("LinearAd error",c.message)}},ended:function(){gpgp.log("videostep ended evt",this.dataset.tag),b.playComplete({index:this.dataset.index,video:this})}},close:{click:function(){b.closeAd()}},closeText:{click:function(){b.closeAd()}},trueviewClose:{click:function(){b.closeAd()}},trueviewCloseText:{click:function(){b.closeAd()}},detail:{click:function(){gpgp.log("dp3",b.currentAdInfo),b.dpReporter.reportStep(4,b.orderList,{adclick:b.currentAdInfo.order_id,clicktime:(new Date).getTime()-b.reportData.videott_start}),b.openAdLink()}},linkArea:{click:function(){gpgp.log("dp3",b.currentAdInfo),b.dpReporter.reportStep(4,b.orderList,{adclick:b.currentAdInfo.order_id,clicktime:(new Date).getTime()-b.reportData.videott_start}),b.openAdLink()}},why:{click:function(){b.broadcast("pauseAd"),b.hideUiPlay(),b.ui.show("noSkipTips")}},noSkipTipsClose:{click:function(){b.broadcast("playAd"),b.ui.hide("noSkipTips")}}};for(var c in this.eventList)for(var d in b.eventList[c])b.ui.dom[c]&&b.ui.dom[c].on(d,b.eventList[c][d])}},LinearAd.prototype.eventEnd=function(){var a=this;for(var b in this.eventList)for(var c in a.eventList[b])a.ui.dom[b].off(c,a.eventList[b][c]);this.eventList=null},LinearAd.prototype.getAdInfo=function(a){var b=a+"AdInfo",c=a+"Video";if("current"==a?(b="currentAdInfo",this[b]=this.playList[this.playIndex]):"next"==a&&(b="nextAdInfo",this[b]=this.playList[this.playIndex+1]),this[b].isKB=this[b].type==this.gpDataset.adtypeMap.KB,this.params.wrapper=this.ui.dom.gpAd[0],this[b].isRichMedia)this[b].player||(this[b].player=new vpaid(this.params));else{this[b].player=this[c];var d=this.getRes(this[b].image);this[b].vid=d.vid,this[b].url=d.url,this[b].fileSize=d.fileSize}return this[b]},LinearAd.prototype.showUi=function(){var a=this;return this.renderAdByStep("init"),this.renderAdByStep("dspName",this.currentAdInfo.dsp_name||""),this.renderAdByStep("mute",this.gpDataset.isSupportMute),this.renderAdByStep("linkArea",!this.gpDataset.isUseMobileUI&&!this.currentAdInfo.isRichMedia),this.forbidSkip?void this.renderAdByStep("forbidSkip"):this.currentAdInfo.isKB&&!this.isSkipAdButtonShow()?void this.renderAdByStep("KB",{isKB:!0,isShowSkip:!1}):(this.renderAdByStep("KB",{isKB:this.currentAdInfo.isKB,isShowSkip:!0}),this.isVip?void this.renderAdByStep("vipCommand",this.isVipCommand()):this.isTrueview()?void this.renderAdByStep("trueview"):void this.renderAdByStep("skipTips",{isVip:!1,isShowSkip:a.isSkipAdButtonShow(),isShortVideo:a.isShortVideo()}))},LinearAd.prototype.renderAdByStep=function(a,b){var c=this;switch(a){case"init":this.ui.show("gpAd"),this.ui.show("adLayer"),c.renderAdByStep("detail");break;case"detail":"vip"==b?(c.ui.hide("detail"),c.ui.show("vipCommand")):c.currentAdInfo.link?(c.ui.show("detail"),c.ui.hide("vipCommand")):c.ui.hide("detail");break;case"mute":break;case"dspName":b?(c.ui.dom.dspName.html(b),c.ui.show("dspName")):c.ui.hide("dspName");break;case"linkArea":b?c.ui.show("linkArea"):c.ui.hide("linkArea");break;case"forbidSkip":c.isHBO()?(c.ui.dom.noSkipText.html("应内容方要求，VIP无法免该片广告"),c.ui.hide("why")):c.isHuaNa()&&c.ui.dom.noSkipText.html("应版权方要求，VIP无法免该片广告"),c.ui.show("noSkip");break;case"vipCommand":b?(c.renderAdByStep("detail","vip"),c.renderAdByStep("skipTips",{isCommand:!0,isShowSkip:!0})):c.renderAdByStep("skipTips",{isVip:!0,isShowSkip:!0});break;case"trueview":c.dataset.trueview=!0,c.ui.show("trueview");var d=c.adtime.duration;gpgp.log("trueview",d),d>10&&(!c.dataset.hasOwnProperty("countDown")||c.dataset.countDown==-1)?(gpgp.log("set countDown"),c.ui.show("trueviewText"),c.dataset.countDown=5,c.ui.dom.countDown.html(c.dataset.countDown)):(0===c.dataset.countDown||d<=10)&&(d<=10&&c.ui.hide("trueviewText"),c.ui.dom.trueviewClose.css("display","inline-block"),c.ui.show("trueviewCloseText"));break;case"KB":b.isShowSkip?c.ui.refreshDisplay("time",!b.isKB):c.ui.hide("canSkip");break;case"skipTips":b.isCommand?c.ui.dom.closeText.html("关闭推荐"):b.isVip?c.ui.dom.closeText.html("VIP点击关闭广告"):b.isShortVideo?c.ui.dom.closeText.html("关闭广告"):c.ui.dom.closeText.html("VIP可关闭广告"),c.ui.refreshDisplay("close",b.isShowSkip),c.ui.refreshDisplay("closeText",b.isShowSkip),c.ui.show("canSkip")}},LinearAd.prototype.resize=function(a,b){gpgp.log("gpgp resize:",this.currentAdInfo),this.currentAdInfo&&this.currentAdInfo.isRichMedia&&this.currentAdInfo.player.resize(a,b)},LinearAd.prototype.isVipCommand=function(){return this.currentAdInfo&&"VipCommand"==this.currentAdInfo.display_code},LinearAd.prototype.isTrueview=function(){return"in"==this.gpDataset.pf&&1==this.playList.length&&(this.playList[0].richdata||(this.playList[0].richdata=this.getRichData(this.playList[0])),this.playList[0].richdata&&this.playList[0].richdata.plugins&&"Y"===this.playList[0].richdata.plugins.trueview)},LinearAd.prototype.isSkipAdButtonShow=function(){return(gpgp.pf.mobile&&!gpgp.pf.os.ipad||(!gpgp.pf.mobile||gpgp.pf.os.ipad)&&"in"==this.gpDataset.pf)&&"function"==typeof gpgp.api.showOpenVIPGuide},LinearAd.prototype.getAdDuration=function(a){for(var b=0,c=0,d=0;d<a.length;d++){if(!a[d].duration)return;b+=parseInt(a[d].duration)/1e3,"WK"!=a[d].type&&"KB"!=a[d].type||(c+=parseInt(a[d].duration)/1e3)}return this.errAdTime&&(b-=this.errAdTime),{duration:b,covertTime:c}},LinearAd.prototype.stopAdCountDownTime=function(){var a=this;a.adCountDownTimer&&(clearInterval(a.adCountDownTimer),a.adCountDownTimer=null)},LinearAd.prototype.startAdCountDownTime=function(){this.stopAdCountDownTime();var a,b;this.adtime&&(this.adtime.adPlayedSeconds||(this.adtime.adPlayedSeconds=0),b=parseInt(this.adtime.duration-this.adtime.adPlayedSeconds-this.adtime.covertTime),gpgp.log("showTime",b),b>0&&this.ui.dom.time.html(b));var c=this;this.adCountDownTimer=setInterval(function(){return c.adtime.adPlayedSeconds+=1,c.adtime.duration?(a=c.adtime.duration-c.adtime.adPlayedSeconds,a=parseInt(10*a)/10,a<=0?(c.dataset.countDown=-1,gpgp.log("videostep adCountDownTimer",a),c.stopAd(),void c.stopAdCountDownTime()):(b=a-c.adtime.covertTime,b>0&&c.ui.dom.time.html(b),void(c.dataset.countDown>0&&(c.dataset.countDown--,c.dataset.countDown>0?c.ui.dom.countDown.html(c.dataset.countDown):(c.ui.dom.trueviewClose.css("display","inline-block"),c.ui.show("trueviewCloseText"),c.ui.hide("trueviewText")))))):(gpgp.log("ad time error"),c.hide(),void c.stopAdCountDownTime())},1e3)},LinearAd.prototype.initVolume=function(){this.isMute=eval(gpgp.getLocalStorage("mute"));var v=parseInt(gpgp.getLocalStorage("volume"));isNaN(v)&&(v=this.gpDataset.volume||50),this.volume=v,gpgp.log("init volume",this.isMute,this.volume),0===this.volume&&(this.isMute=!0),this.mute(this.isMute),this.setVolume(this.volume)},LinearAd.prototype.setVolume=function(a,b){b!==!1&&(b=!0),a=parseInt(a),isNaN(a)||(0==a?this.mute(!0,b):a>0&&this.mute(!1,b),gpgp.log("set volue",a),this.currentAdInfo&&this.currentAdInfo.isRichMedia&&this.currentAdInfo.player.setVolume(a),this.currentVideo&&this.nextVideo&&(this.currentVideo.volume=a/100,this.nextVideo.volume=a/100),b&&gpgp.setLocalStorage("volume",a))},LinearAd.prototype.mute=function(a,b){b!==!1&&(b=!0),this.currentAdInfo&&this.currentAdInfo.isRichMedia&&this.currentAdInfo.player.mute(a),this.currentVideo&&this.nextVideo&&(this.currentVideo.muted=a,this.nextVideo.muted=a),this.isMute=a,b&&gpgp.setLocalStorage("mute",a)},module.exports=LinearAd}).call(exports,__webpack_require__(0),__webpack_require__(2))},function(a,b,c){function d(a){gpgp.log("new Vpaid"),this.init(a)}d.prototype.init=function(a){this.playState=0,this.params=a;var b=this;b.iframe=document.createElement("iframe"),b.iframe.id="adLoaderIframe",b.iframe.name="adLoaderIframe",b.iframe.frameBorder=0,gpgp.$(b.iframe).css({position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"none","pointer-events":"auto"}),this.wrapper=a.wrapper,a.wrapper.appendChild(b.iframe)},d.prototype.loadAd=function(a){gpgp.log("load vpaid",a),this.loadParams=a,this.outerApi=a.api,this.playList=a.adItem,this.duration=parseInt(a.adItem.duration);var b=this;setTimeout(function(){gpgp.loadJs(gpgp.appendParamsToUrl(a.adItem.richRes,{t:(new Date).getTime()}),b.onInitAd.bind(b),b.iframe.contentWindow.document.body,b.iframe.contentWindow.document)},100)},d.prototype.onInitAd=function(a){if(a&&a.error)return this.loadParams.error=a.error,void this.callOuterApi("playError",this.loadParams);if(gpgp.log("vpaid params",this.params),"IVB"==this.params.adtype){var b=null;gpgp.$(this.iframe.contentWindow.document.body).click(function(a){gpgp.log("vpaid click",a.currentTarget,a.target,a.target.dataset.click),a.currentTarget!=a.target&&a.target.dataset.click||(clearTimeout(b),b=setTimeout(function(){var a=gpgp.api.getPlayState();1==a?gpgp.api.userPausePlayer&&gpgp.api.userPausePlayer():2==a&&gpgp.api.userPlay&&gpgp.api.userPlay()},300))}),gpgp.$(this.iframe.contentWindow.document.body).dblclick(function(){clearTimeout(b),gpgp.api.toggleWindowFullScreen&&gpgp.api.toggleWindowFullScreen()})}this.innerEvts={AdStarted:"onStartAd",AdStopped:"onStopAd",AdPaused:"onPauseAd",AdPlaying:"onPlayAd",AdError:"onError",AdVideoComplete:"stopAd"},this.outEvts={AdLoadStart:"loadStart",AdLoading:"loading",AdLoaded:"loadReady",AdLoadComplete:"loadComplete",AdVideoStart:"playStart",AdClickThru:"openAdLink"};var c=this,d=c.iframe.contentWindow.getVPAIDAd;if(d&&"function"==typeof d){c.VPAIDCreative=d();for(var e in c.outEvts)c.VPAIDCreative.subscribe(c.onSubscribe,e,c);for(var f in c.innerEvts)c.VPAIDCreative.subscribe(c.onSubscribe,f,c);setTimeout(function(){c.VPAIDCreative.initAd(c.params.adWidth||c.params.gpDataset.playerWidth,c.params.adHeight||c.params.gpDataset.playerHeight,"normal",0,c.loadParams.adItem.richdata)},10)}},d.prototype.onSubscribe=function(a,b){"AdError"==a&&(this.loadParams.error={type:"VpaidError",code:b&&b.code}),this.innerEvts[a]?this[this.innerEvts[a]](this.loadParams):this.outEvts[a]&&this.callOuterApi(this.outEvts[a],this.loadParams)},d.prototype.resize=function(a,b){this.VPAIDCreative&&this.VPAIDCreative.resizeAd(a,b)},d.prototype.mute=function(a){gpgp.log("vpaid mute",a),this.VPAIDCreative&&this.VPAIDCreative.mute(a)},d.prototype.setVolume=function(a){gpgp.log("vpaid set volume",a),this.VPAIDCreative&&this.VPAIDCreative.setAdVolume(a)},d.prototype.setPos=function(a){if(gpgp.log("vpaid setPos",a),this.VPAIDCreative&&this.VPAIDCreative.setPos)try{this.VPAIDCreative.setPos(a)}catch(b){}},d.prototype.play=function(){this.playState?4==this.playState&&this.VPAIDCreative&&this.VPAIDCreative.resumeAd():(gpgp.log("vpaid play start"),this.callOuterApi("initVolume"),this.VPAIDCreative&&this.VPAIDCreative.startAd())},d.prototype.onPlayAd=function(){this.playState=3,this.callOuterApi("playAd","vpaid")},d.prototype.onStartAd=function(){var a=this;this.heart=setInterval(function(){a.callOuterApi("playing")},1e3)},d.prototype.pause=function(){4!=this.playState&&this.VPAIDCreative&&this.VPAIDCreative.pauseAd()},d.prototype.onPauseAd=function(){4!=this.playState&&(this.playState=4,this.callOuterApi("pauseAd","vpaid"))},d.prototype.onError=function(a){try{this.wrapper.removeChild(this.iframe),this.callOuterApi("playError",a)}catch(b){}},d.prototype.stopAd=function(){6!=this.playState&&(gpgp.log("stopAd vpaid"),this.playState=6,clearInterval(this.heart),this.VPAIDCreative&&this.VPAIDCreative.stopAd())},d.prototype.onStopAd=function(a){try{this.wrapper.removeChild(this.iframe)}catch(b){}this.callOuterApi("playComplete",a)},d.prototype.callOuterApi=function(a,b){if(this.outerApi&&"function"==typeof this.outerApi[a])try{this.outerApi[a](b)}catch(c){}},a.exports=d},function(a,b){var c=function(a,b){if(a){for(var c=0,e=!1,f=function(){c+=1,
c===a.length&&(e=!0,b(null))},g=0;g<a.length;g++)d(a[g],f);setTimeout(function(){e||(gpgp.log("resource not all loaded ,error"),b(null))},2e3)}else b("no url")},d=function(a,b){var c=new Image;c.onload=function(){b()},c.src=a},e=function(a,b,c,d){var e=d?decodeURIComponent:function(a){return a};return function(d){var f={};c&&(d=d.replace(new RegExp(b+"$"),""));for(var g=d.split(b),h=0;h<g.length;h++){var i=g[h].split(a);f[e(i[0])]=e(i[1])}return f}},f={get:function(a){if(a){var b=e("=","; ",!1,!1)(document.cookie);return b[a]}}},g=function(a){if(!a)return"unknown";var a=a.toLowerCase(),b=-1,c=a.match(/(?:metasr.\d*|qqbrowser.\d*|maxthon.\d*|theworld|lbbrowser|firefox.\d*|opera.\d*|bidubrowser.\d*)/);if(null!==c)return c[0].replace(" ","").replace("/","");if(a.indexOf("android")>-1)return"android";if(a.indexOf("iphone")>-1)return"iphone";if(a.indexOf("ipad")>-1)return"ipad";if((b=a.indexOf("chrome"))>-1)return"chrome"+parseInt(a.substr(b+7,4));if((b=a.indexOf("safari"))>-1)return"safari";var d=a.indexOf("msie");if(d>-1)return"ie"+parseInt(a.substr(d+5,2));var e=a.indexOf("trident");if(e>-1){var f=a.indexOf("rv:");if(f>-1)return"ie"+parseInt(a.substr(f+3,2))}return a};a.exports={loadResource:c,cookie:f,getUA:g}},function(a,b,c){var d={extend:function(a,b,c){var d=function(){};d.prototype=c.prototype,b.prototype=new d,b.prototype.constructor=b},loadJs:function(a,b,c,e){var f=document.createElement("script");if(f.type="text/javascript",f.charset="UTF-8",f.src=a.replace(/http(s)?:/,location.protocol),f.onerror=function(a){d.log("js error",arguments),b({src:f.src,error:{type:"RichJsError",code:404}})},f.addEventListener?f.addEventListener("load",function(){b()},!1):f.attachEvent&&f.attachEvent("onreadystatechange",function(){var a=window.event.srcElement;"loaded"==a.readyState&&b()}),e){var g=document.createElement("base");g.href=f.src.match(/.+\//)[0],e.getElementsByTagName("head")[0].appendChild(g)}c?c.appendChild(f):document.getElementsByTagName("head")[0].appendChild(f)},appendParamsToUrl:function(a,b){return"string"==typeof a&&b&&(a+=a.indexOf("?")==-1?"?":"&"+d.param2url(b)),a},param2url:function(a){if("object"==typeof a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+"="+a[c]);return b.join("&")}return""},checkSuffix:function(a,b){a=a.toLowerCase();var c=/\.(\w+)(?:$|\?|\#)/.exec(a);if(!c||!c[1])return!1;if(!b)return c[1];if("string"==typeof b)return c[1]===b;if(b instanceof Array){for(var d=!1,e=b.length-1;e>=0;e--)if(c[1]===b[e])return d=!0,!0;return!1}},isArray:function(a){return a instanceof Array},isVideoAd:function(a){return"QT|ZC|HTLD|KB|ZC|HT".indexOf(a)>=0},tmpl:c(5),pf:c(6),gpKey:"gp-",$:"undefined"!=typeof Txplayer&&Txplayer.$||$||{},randomParam:function(){return+new Date+".r"+Math.floor(1e3*Math.random())},getLocalStorage:function(a){var b="";try{window.localStorage&&(b=window.localStorage[d.gpKey+a])}catch(c){}return b},setLocalStorage:function(a,b){try{window.localStorage&&(window.localStorage[d.gpKey+a]=b)}catch(c){}},getScale:function(a,b,c,d,e){var f,g,h;return f=c/a,g=d/b,h=Math.min(f,g),e&&(e.width=parseInt(e.width*h),e.height=parseInt(e.height*h)),h||1},getReportParams:function(a,b,c){var d={from:a.from,pf:a.pf,pf_ex:a.pf_ex,v:a.passThrought?a.passThrought.v:"",coverid:a.cid||"",vptag:a.vptag||"",dura:b.duration,lcount:b.lcount||1,t:c||0,url:location.href,oadid:"",tpid:""};return"Empty"==b.display_code&&(d.chid=a.chid),d},sendReport:function(a,b){var c="GP_REPORT"+d.randomParam(),e=d[c]=new Image;e.onload=e.onerror=function(){b&&b(),delete d[c]},e.src=a},fixUrl:function(a,b){return 0==a.indexOf("http")?a.replace(/^http(s)?:/,b):a=0==a.indexOf("//")?b+a:b+"//"+a},getUrl:function(a,b){return b?d.fixUrl(a,b+":"):0==location.protocol.indexOf("http")?d.fixUrl(a,location.protocol):d.fixUrl(a,"https:")},recordWisdomPoint:function(a,b,c,e){c=c||"",e=e||"";var f="//p.l.qq.com?t=s&actid="+a+"&mid="+b+"&oid="+b+"&locid="+c+"&aver="+e;d.sendReport(d.getUrl(f))},log:function(){}};window.gpgp=d,d.HdPlayerAd=c(7)},function(a,b){var c=function(a,b){return function(d,e){var f=/\s/.test(d)?function(a){var c,d=[b],e=[[]];for(c in a)d.push(c),e.push(a[c]);return new Function(d,f.$).apply(a,e).join("")}:a[d]=a[d]||c(document.getElementById(d).innerHTML);return f.$=f.$||b+".push('"+d.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join(b+".push('").split("\r").join("\\'")+"');return "+b,e?f(e):f}}({},"$"+ +new Date);a.exports=c},function(a,b){function c(a){a=a||navigator.userAgent,a=a.toLowerCase(),this.browser={},this.os={},this.phone={},this.mobile=!1,a.indexOf("mobile")>-1&&(this.mobile=!0);var b,c,d={android_1:/android[\s\/]([\d\.]+)/i,android_2:/android/i,android_3:/MIDP-/i,ipod_1:/iPod\stouch;\sCPU\siPhone\sos\s([\d_]+)/i,ipod_100:/iPod.*os\s?([\d_\.]+)/i,iphone:/iPhone;\sCPU\siPhone\sos\s([\d_]+)/i,iphone_100:/iPhone.*os\s?([\d_\.]+)/i,ipad_1:/ipad;\scpu\sos\s([\d_]+)/i,ipad_2:/ipad([\d]+)?/i,windows:/windows\snt\s([\d\.]+)/i,mac:/Macintosh.*mac\sos\sx\s([\d_\.]+)/i,linux:/Linux/i};for(var e in d)if(b=d[e].exec(a)){c=e.replace(/_\d+/,""),this.os[c]=!0,this.os.name=c,b[1]&&(this.os.version=b[1].replace(/_/g,"."));break}(this.os.iphone||this.os.ipad||this.os.ipod)&&(this.os.ios=!0);var f,g,h={wechat:/MicroMessenger\/([\d\.]+)/i,ipadqq:/IPadQQ\/([\d\.]+)/i,mqq:/qq\/([\d\.]+)/i,qzone:/QZONEJSSDK\/([\d\.]+)/i,mqqbrowser:/mqqbrowser\/([\d\.]+)/i,qqbrowser:/[^m]QQBrowser\/([\d\.]+)/i,x5:/tbs\/(\d+)/i,uc:/UCBrowser\/([\d\.]+)/i,safari_1:/Version\/(([\d\.]+))\sSafari\/[\d\.]+/i,safari_2:/Safari\/([\d\.]+)/i,firefox:/Firefox\/([\d\.]+)/i,ie_1:/MSIE\s([\d\.]+)/i,ie_2:/(trident\/\d\.\d)/i,ie_3:/(Edge)\/\d+\.\d+/i,weibo:/weibo__([\d\.]+)/i,qqnews:/qqnews\/([\d\.]+)/i,qqlive_1:/QQLiveBrowser\/([\d\.]+)/i,qqlive_2:/QQLiveHDBrowser\/([\d\.]+)/i,kuaibao:/qnreading\/([\d\.]+)/i,liebao:/LieBaoFast\/([\d\.]+)/i,douban:/com\.douban\.frodo\/([\d\.]+)/i,miuibrowser:/MiuiBrowser/i,baidu:/baiduboxapp/i,browser360:/360browser/i,oppobrowser:/OppoBrowser/i,chrome_1:/CriOS\/([\d\.]+)/i,chrome_2:/Chrome\/([\d\.]+)/i};for(var i in h)if(f=h[i].exec(a)){if(g=i.replace(/_\d+/,""),this.browser[g])return;this.browser[g]={version:f[1]}}this.os.android&&this.browser.safari&&delete this.browser.safari,this.browser.chrome&&this.browser.safari&&delete this.browser.safari,this.browser.ie&&this.browser.ie.version&&this.browser.ie.version.indexOf("trident")>-1&&(this.browser.ie.version.indexOf("6.0")>-1?this.browser.ie.version="10":this.browser.ie.version.indexOf("5.0")>-1?this.browser.ie.version="9":this.browser.ie.version.indexOf("4.0")>-1?this.browser.ie.version="8":this.browser.ie.version="11");var j,k={ipod:/iPod/i,ipad:/iPad/i,iphone:/iPhone/i,huawei_1:/HUAWEI([\w_-]+)/i,huawei_2:/(CHM-\w+)/i,huawei_3:/(HonorChe)/i,huawei_4:/HONORPLK/i,huawei_5:/(Che\d+-CL\d+)/i,huawei_6:/(H\d+-L\d+)/i,huawei_100:/HUAWEI/i,xiaomi_1:/(HM\sNOTE)/i,xiaomi_2:/(HM\s\w+)/i,xiaomi_3:/(MI\s\w+)/i,xiaomi_4:/(MI-ONE\sPlus)/i,xiaomi_5:/(M1)\sBuild/i,xiaomi_6:/(HM\d+)/i,xiaomi_7:/Xiaomi[\s_]?([\w_]+)/i,samsung_1:/(GT-\w+)/i,samsung_2:/(SCH-\w+)/i,samsung_3:/(SM-\w+)/i,vivo:/vivo\s(\w+)/i,oneplus:/ONEPLUS-([a-z0-9]+)/i,lenovo_1:/Lenovo[\s-]?([\w-]+)/i,lenovo_100:/Lenovo/i,zte_1:/ZTE\s?(\w+)?/i,zte_2:/ZTE/i,coolpad_1:/Coolpad\s(\w+)/i,coolpad_100:/Coolpad/i,oppo_1:/OPPO\s?(\w+)/i,oppo_2:/(R7Plus|R8007|R801|R831S|R8205)/i,oppo_100:/OPPO/i,meizu_1:/(MX\d+)/i,meizu_2:/(m\d+\snote)\sBuild/i,htc_1:/HTC\s?(\w+)/i,htc_100:/HTC/i,tcl:/TCL\s(\w+)/i,lephone:/lephone\s(\w+)/i,lg:/LG[\s-]?(\w+)/i,galaxy:/(galaxy\d+)/,hisense_1:/Hisense/i,hisense_2:/HS-(\w+)/i,philips:/Philips\s?(\w+)?/i,"金立":/(GN\w+)\sBuild/i,sonny:/sonny/i,"天语":/K-Touch/i};for(var l in k)if(j=k[l].exec(a)){this.phone.name=l.replace(/_\d+/,""),j[1]&&(this.phone.version=j[1].replace(/^[_-]/gi,""));break}}a.exports=new c},function(a,b,c){function d(a){gpgp.log("new HdPlayerAd"),gpgp.players||(gpgp.players=[]),gpgp.players.push(this),this.msg=a.msg,this.dom=a.dom,this.css=a.css,this.api=a.api||{},this.adplayer={},gpgp.api=a.api||{},"function"!=typeof gpgp.api.getUserType&&(gpgp.api.getUserType=function(){return 0}),this.gpDataset=new e(a.dataset),this.exportsModuleApis(),gpgp.log("HdPlayerAd",a),gpgp.testParams=a}var e=c(8);d.prototype={init:function(a){gpgp.log("gpgp: init params",a),this.stopAd&&this.stopAd(!0),this.initAdParams(a)},initAdParams:function(a){gpgp.$.extend(this.gpDataset,a)},playerClass:c(9),isAdtype:function(a){return this.playerClass.hasOwnProperty(a)},exportsModuleApis:function(){gpgp.log("exportsModuleApis");var a=this,b=["playAd","pauseAd","stopAd","preLoadAd"],c=["mute","setVolume"],d=["resize","setFullScreen","setSmallWindow","setPos"],e=[],f=b.concat(c,d,e);this.getGpParams=function(a){return gpgp.getLocalStorage(a)},this.report=function(a,b){gpgp.log(arguments);if(gpgp.log(a," reportAd",b),gpgp.isArray(b)&&(b=b[0]),b&&"object"==typeof b){if(b.reportUrl){var c={url:document.URL};c=gpgp.$.extend(c,gpgp.getReportParams(this.gpDataset,b));var d=gpgp.appendParamsToUrl(b.reportUrl,c);gpgp.sendReport(d)}b.reportUrlOther&&b.reportUrlOther.reportitem&&(gpgp.isArray(b.reportUrlOther.reportitem)||(b.reportUrlOther.reportitem=[b.reportUrlOther.reportitem]),gpgp.$.each(b.reportUrlOther.reportitem,function(a,b){b&&b.url&&gpgp.sendReport(b.url)})),b.reportUrlSDK&&b.reportUrlSDK.reportitem&&(gpgp.isArray(b.reportUrlSDK.reportitem)||(b.reportUrlSDK.reportitem=[b.reportUrlSDK.reportitem]),gpgp.$.each(b.reportUrlSDK.reportitem,function(a,b){b&&b.url&&gpgp.sendReport(b.url)}))}},this.loadAd=function(a){if(!this.playerClass[a.adtype])return void gpgp.log("load ad error",a);if("IVB"!=a.adtype||!gpgp.api.isSmallWindow||!gpgp.api.isSmallWindow()){if(gpgp.log("load ad",a),a.css=this.css,a.dom=this.dom,a.api=this.api,a.msg=this.msg,a.adplayer=this.adplayer,a.gpDataset=this.gpDataset,this.adplayer[a.adtype]&&this.adplayer[a.adtype].stopAd&&this.adplayer[a.adtype].stopAd(!0),"ZT"==a.adtype)try{this.adplayer.IVB.stopAd(!0)}catch(b){}return gpgp.log("class:",this.playerClass,this.playerClass[a.adtype],a.adtype),this.adplayer[a.adtype]=new this.playerClass[a.adtype](a),this.adplayer[a.adtype]}};for(var g,h=0;h<f.length;h++)g=f[h],a[g]=function(b){return function(){var c=arguments[0];if("playAd"==b&&("ZC"==c||"HT"==c))try{this.adplayer.IVB.stopAd(!0)}catch(d){}if("resize"==b&&(a.gpDataset.playerWidth=arguments[0],a.gpDataset.playerHeight=arguments[1],gpgp.log("gpgp: resize",a.gpDataset.playerWidth,a.gpDataset.playerHeight)),"setSmallWindow"==b){a.gpDataset.playerWidth=arguments[0].width,a.gpDataset.playerHeight=arguments[0].height;try{this.adplayer.IVB.stopAd(!0)}catch(d){}}if("setVolume"==b){a.gpDataset.volume=arguments[0];var e=arguments[1]!==!1;e&&gpgp.setLocalStorage("volume",arguments[0]),gpgp.log("setVolume",arguments[0])}if(a.isAdtype(c)){if(a.adplayer[c]&&a.adplayer[c][b])try{a.adplayer[c][b].apply(a.adplayer[c],arguments)}catch(d){gpgp.log("txp call",c,b,arguments,d)}}else for(var c in a.adplayer)if(a.adplayer[c]&&a.adplayer[c][b]){gpgp.log("txp call",c,b,arguments);try{a.adplayer[c][b].apply(a.adplayer[c],arguments)}catch(d){gpgp.log("HdPlayerAd call:",c,b,d)}}}}(g)},getReqId:function(){for(var a=[],b="0123456789abcdef",c=0;c<36;c++)a[c]=b.substr(Math.floor(16*Math.random()),1);a[14]="4",a[19]=b.substr(3&a[19]|8,1),a[8]=a[13]=a[18]=a[23]="-";var d=a.join("");this.context.dataset.reqId=d}},a.exports=d},function(a,b,c){function d(a){if(a){var b=this;for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}this.isPc=gpgp.pf.os.mac||gpgp.pf.os.windows,this.isUseMobileUI=gpgp.pf.mobile&&!gpgp.pf.os.ipad,this.isSupportMute=!gpgp.pf.ios&&!gpgp.pf.mobile,this.isVshou="vshou"==gpgp.api.playerType,this.isPc&&(this.supportAd=Object({QT:"QT",ZC:"ZC",HT:"HT",ZT:"ZT",IVB:"IVB",PSJ:"PSJ",KB:"KB",PPB:"PPB",PVL:"PVL"}),this.adtypeMap={LD:"LD",QT:"LD|KB|PVL",ZC:"ZC",HT:"HT",ZT:"ZT",KB:"KB",PSJ:"PSJ",PPB:"PPB",PVL:"PVL",IVB:"ZI"},this.isInSite()?this.pf="in":this.pf="out",this.videoAdType="LD|KB|ZC|HT",this.pf_ex="pc",this.adaptor=2),gpgp.pf.os.phone||gpgp.pf.os.tablet?gpgp.pf.os.ipad?this.from="6":gpgp.pf.os.iphone?this.from="3":gpgp.pf.os.android&&gpgp.pf.os.tablet?this.from="4":gpgp.pf.os.android&&gpgp.pf.os.phone&&(this.from="5"):this.from="0"}var e=function(){for(var a=[],b="0123456789abcdef",c=0;c<36;c++)a[c]=b.substr(Math.floor(16*Math.random()),1);a[14]="4",a[19]=b.substr(3&a[19]|8,1),a[8]=a[13]=a[18]=a[23]="-";var d=a.join("");return d};d.prototype={version:"gpgp_outsite",volume:0,pf:"H5",chid:0,requestid:e(),adtypeMap:{"前贴":"WL|WK","中插":"WC","后贴":"WH","暂停":"WZ","口播":"WK",ivb:"WI","压流":"WSJ"},videoAdType:"WL|WK|WC|WH",LIVE_TYPE:0,from:"6",pf_ex:"",adaptor:1,isInSite:function(){var a=["v.qq.com","film.qq.com","news.qq.com","ent.qq.com","games.qq.com","cache.tv.qq.com","fashion.qq.com","v.ent.qq.com","v.news.qq.com","v.fashion.qq.com","finance.qq.com","sports.qq.com","2016.qq.com","auto.qq.com","astro.lady.qq.com","comic.qq.com","cul.qq.com","edu.qq.com","house.qq.com","gongyi.qq.com","health.qq.com","baby.qq.com","ru.qq.com","kid.qq.com","digi.tech.qq.com","tech.qq.com","stock.qq.com","ly.qq.com","bj.jjj.qq.com","sh.qq.com","gd.qq.com","tj.jjj.qq.com","hb.jjj.qq.com","cd.qq.com","cq.qq.com","xian.qq.com","hn.qq.com","hb.qq.com","fj.qq.com","henan.qq.com","zj.qq.com","ln.qq.com","js.qq.com"],b=a.join("|");return b.indexOf(location.hostname)>=0||8===this.getAdChannelId()},getAdChannelId:function(){if(/ptag=wx\.search/i.test(location.href))return 64;if(""!=this.chid)return this.chid;var a="";return/(.*\.)3g\.qq\.com$/i.test(window.location.hostname)?a=13:/(.*\.)?v\.qq\.com$/i.test(window.location.hostname)||gpgp.pf.browser.qqlive?a=0:gpgp.pf.browser.wechat?a=3:gpgp.pf.browser.mqq?a=10:gpgp.pf.browser.qqnews&&(a=2),a}},a.exports=d},function(a,b,c){var d={};d.QT=c(10),d.HT=c(16),d.ZC=c(17),d.ZT=c(18),d.IVB=c(19),d.PSJ=c(20),a.exports=d},function(a,b,c){(function(b){function d(a){this.hasShot=!1,b.apply(this,arguments)}var e=c(15);gpgp.extend("LdAd",d,b),d.prototype.getAdList=function(a){b.prototype.getAdList.apply(this,arguments);var c=a.adTypeList.PVL;this.relateAd={adtype:"PVL",src:""},c instanceof Array&&c[0]&&c[0].image&&(this.relateAd.src=this.getRes(c[0].image,"url"),this.adJson.adList.item.pop())},d.prototype.sendAdInfo=function(){this.broadcast("getAdInfoEvt",{adtype:this.adtype,duration:this.duration,relateAd:this.relateAd})},d.prototype.playStart=function(){this.currentAdInfo.hasPlayStart||(b.prototype.playStart.apply(this,arguments),this.viewMonitor||(this.viewMonitor=new e(this.ui.dom.gpAd)),this.viewMonitor.start(this.currentAdInfo))},d.prototype.stopAd=function(a){6!=this.playState&&(b.prototype.stopAd.apply(this,arguments),a||this.saveRFID())},d.prototype.saveRFID=function(){this.adJson&&this.adJson.adLoc&&this.adJson.adLoc.rfid&&gpgp.setLocalStorage("rfid",this.adJson.adLoc.rfid)},a.exports=d}).call(b,c(1))},function(a,b,c){function d(a,b,c,d){gpgp.log("new ui"),this.dataset={},this.dom={};var e={hideClass:"txp_none",muteClass:"txp_btn_ad_mute"};this.css=gpgp.$.extend({},e,b),this.tmplVar=c||{},this.init(a,d)}d.prototype={init:function(a,b){this.dataset.muteClass="txp_btn_ad_mute",this.isVideoAd=gpgp.isVideoAd(b),this.isVideoAd?(this.dom.adLayer=a.videoAdLayer,this.render("videoAdLayer")):(this.dom.adLayer=a.interactiveAdLayer,this.render(b))},getRenderEls:function(a){var b={};switch(a){case"videoAdLayer":b={topArea:"gp-video-ad-top",trueview:"gp-video-ad-trueview",trueviewText:"gp-video-ad-trueview-text",countDown:"gp-video-ad-countdown",canSkip:"gp-video-ad-canskip",enterAd:"gp-video-ad-enterad",noSkip:"gp-video-ad-noskip",noSkipText:"gp-video-ad-noskiptext",linkArea:"gp-video-ad-linkarea",detail:"gp-video-ad-detail",vipCommand:"gp-video-ad-vip-command",volume:"gp-video-ad-volume",time:"gp-video-ad-time",close:"gp-video-ad-close",closeText:"gp-video-ad-closetext",trueviewClose:"gp-video-ad-trueview-close",trueviewCloseText:"gp-video-ad-trueview-closetext",why:"gp-video-ad-why",dspName:"gp-video-ad-dspName",noSkipTips:"gp-video-ad-no-skip-tips",noSkipTipsClose:"gp-video-ad-no-skip-tips-close",gpAd:"gp-video-ad",gpVideoAdPlayer:"gp-video-ad-player"};break;case"ZT":b={gpAdWrapper:"gp-ad-pause-wrapper",gpAd:"gp-ad-pause",pauseAdImg:"gp-ad-pause-img",pauseAdClose:"gp-ad-pause-close",dspName:"gp-ad-pause-dspname"};break;case"IVB":b={gpAdWrapper:"gp-ad-ivb-wrapper",gpAd:"gp-ad-ivb",close:"gp-ad-ivb-close",ivbAdImg:"gp-ad-ivb-img"};break;case"PSJ":b={gpAdWrapper:"gp-ad-yaliu-wrapper",gpAd:"gp-ad-yaliu-canvas"}}return b},render:function(a){var b=this,d=this.getRenderEls(a),e={},f="";"videoAdLayer"==a?(f=c(12),e={noSkipTipsText:"为了给腾讯视频用户提供更多优质美剧，应版权方（华纳）要求，好莱坞会员在观看华纳美剧时无法跳过广告（《吸血鬼日记》《破产姐妹》《无耻之徒》等）。我们会为会员用户继续争取免广告权益，请您谅解，谢谢！",noSkipTipsTextMobile:"为了给腾讯视频用户提供更多优质影片，应版权方要求，VIP用户在观看该版影片时无法免广告。我们会为VIP用户继续争取免广告权益，请您谅解，谢谢！"}):f=c(13),gpgp.$.extend(e,d,this.css,this.tmplVar,{VAR_ADTYPE:Object({QT:"QT",ZC:"ZC",HT:"HT",ZT:"ZT",IVB:"IVB",PSJ:"PSJ",KB:"KB",PPB:"PPB",PVL:"PVL"})}),f=gpgp.tmpl(f,e),this.dom.adLayer.append(f);for(var g in d)b.dom[g]=b.getUiDom(d[g])},getUiDom:function(a){return this.dom.adLayer.find("[data-role="+a+"]")},show:function(a){this.dom[a]?this.dom[a].removeClass(this.css.hideClass):gpgp.log(a," not in ",this.dom)},hide:function(a){a&&(this.dom[a]?this.dom[a].addClass(this.css.hideClass):gpgp.log(a," not in ",this.dom))},refreshDisplay:function(a,b){b?this.show(a):this.hide(a)}},a.exports=d},function(a,b){a.exports='<gpVideoAd data-role="<%=gpAd%>" class="txp_ad <%=hideClass%>" style="background: #000">\r\n    <video data-tag="current" data-index="0" data-role="<%=gpVideoAdPlayer%>"\r\n           style="width: 100%;height: 100%;"></video>\r\n    <video data-tag="preload" data-index="1" data-role="<%=gpVideoAdPlayer%>"\r\n           style="width: 100%;height: 100%;"></video>\r\n    <gpdiv class="txp_ad_inner">\r\n        <a data-role="<%=linkArea%>" href="javascript:;" class="txp_ad_link <%=hideClass%>"\r\n           style="z-index: 1;position: relative"></a>\r\n        <a data-role="<%=detail%>" href="javascript:;" class="txp_ad_more <%=hideClass%>">详情点击\r\n            <gpdiv class="txp_icon_arrow"></gpdiv>\r\n        </a>\r\n        <gpdiv style="left:10px;bottom:10px;position:absolute;opacity:0.6;font-size:12px;text-shadow:2px 2px #000"\r\n               data-role="<%=dspName%>" class="<%=hideClass%>"></gpdiv>\r\n        <gpdiv data-role="<%=topArea%>" class="txp_ad_control">\r\n            <gpdiv data-role="<%=enterAd%>" class="txp_ad_skip <%=hideClass%>">\r\n                <gpdiv data-role="<%=time%>" class="txp_ad_countdown">10</gpdiv>\r\n                <gpdiv class="txp_ad_skip_text">进入广告</gpdiv>\r\n            </gpdiv>\r\n            <gpdiv data-role="<%=trueview%>" class="txp_ad_skip <%=hideClass%>">\r\n                <gpdiv data-role="<%=time%>" class="txp_ad_countdown"></gpdiv>\r\n                <gpdiv data-role="<%=trueviewText%>" class="txp_ad_skip_text">你可以在<span\r\n                        data-role="<%=countDown%>">5</span>秒后关闭广告\r\n                </gpdiv>\r\n                <gpdiv data-role="<%=trueviewCloseText%>" class="txp_ad_skip_text <%=hideClass%>">关闭广告</gpdiv>\r\n                <button data-role="<%=trueviewClose%>" class="txp_btn txp_btn_close <%=hideClass%>"\r\n                        title="关闭广告"></button>\r\n            </gpdiv>\r\n\r\n            <gpdiv data-role="<%=canSkip%>" class="txp_ad_skip <%=hideClass%>">\r\n                <% if(!isSkipAdButtonShow||isVshou) {%>\r\n                <gpdiv class="txp_ad_text">广告剩余:</gpdiv>\r\n                <gpdiv data-role="<%=time%>" class="txp_ad_countdown"></gpdiv>\r\n                <gpdiv class="txp_ad_text">秒</gpdiv>\r\n                <% } else {%>\r\n                <gpdiv data-role="<%=time%>" class="txp_ad_countdown"></gpdiv>\r\n                <%if(isVshou) {%>\r\n                <gpdiv class="txp_ad_skip_text">广告</gpdiv>\r\n                <%}else{%>\r\n                <gpdiv data-role="<%=closeText%>" class="txp_ad_skip_text <%=hideClass%>">VIP免广告</gpdiv>\r\n                <button data-role="<%=close%>" class="txp_btn txp_btn_close <%=hideClass%>" title="VIP免广告"></button>\r\n                <% } }%>\r\n            </gpdiv>\r\n            <gpdiv data-role="<%=noSkip%>" class="txp_ad_skip <%=hideClass%>">\r\n                <gpdiv data-role="<%=time%>" class="txp_ad_countdown"></gpdiv>\r\n                <gpdiv data-role="<%=noSkipText%>" class="txp_ad_skip_text">应版权方要求，VIP无法免该片广告</gpdiv>\r\n                <button data-role="<%=why%>" class="txp_btn txp_btn_hint" title="无法跳过广告说明"></button>\r\n            </gpdiv>\r\n        </gpdiv>\r\n        <gpdiv data-role="<%=noSkipTips%>" class="txp_ad_dialog <%=hideClass%>">\r\n            <gpdiv class="txp_dialog_bd">\r\n                <%=noSkipTipsText%>\r\n            </gpdiv>\r\n            <gpdiv data-role="<%=noSkipTipsClose%>" class="txp_ad_btn">我知道了!</gpdiv>\r\n            <a target="_blank;" class="txp_ad_fb" href="http://support.qq.com/write.shtml?fid=850">意见反馈</a>\r\n            <button data-role="<%=noSkipTipsClose%>" class="txp_btn txp_btn_close"></button>\r\n        </gpdiv>\r\n    </gpdiv>\r\n</gpVideoAd>\r\n'},function(a,b){a.exports='<gpdiv data-role="<%=gpAdWrapper%>" class="txp_ad">\r\n    <% if(adtype==VAR_ADTYPE.ZT){%>\r\n    <!-- 中间广告位： 400*300 -->\r\n    <gpdiv data-role="<%=gpAd%>" class="txp_ad_center <%=hideClass%>" style="position: absolute;z-index: 4;">\r\n        <button data-role="<%=pauseAdClose%>" class="txp_btn txp_btn_close txp_btn_close_ad" title="关闭广告"></button>\r\n        <img data-role="<%=pauseAdImg%>" alt="">\r\n        <gpdiv style="left:8px;bottom:8px;position:absolute;opacity:0.6;font-size:12px; z-index: 99">\r\n            <gpdiv style="background:#000;display:inline-block;box-shadow:2px 2px #000">广告</gpdiv>\r\n            <gpdiv data-role="<%=dspName%>"\r\n                   style="display:inline-block;margin-left:10px;text-shadow:2px 2px #000"></gpdiv>\r\n        </gpdiv>\r\n\r\n    </gpdiv>\r\n    <% }else if(adtype==VAR_ADTYPE.IVB){%>\r\n    <% if(resType==\'res\'){%>\r\n    <!-- 底部广告位： 960*60 -->\r\n    <gpdiv data-role="<%=gpAd%>" class="<%=hideClass%>"\r\n           style="position: absolute;z-index: 3;margin: 0;white-space: nowrap;cursor: pointer;pointer-events: auto;">\r\n        <img data-role="<%=ivbAdImg%>" alt="" style="margin: 0; max-width: initial;display: inline;">\r\n        <img data-role="<%=close%>" src="https://ca.gtimg.com/adplugin/js/imgs/ivbclose.png"\r\n             style="width: 40px;height: 58px;display: inline;border: none" title="关闭广告">\r\n    </gpdiv>\r\n    <% } else {%>\r\n    <gpdiv data-role="<%=gpAd%>" class="<%=hideClass%>"></gpdiv>\r\n    <% }%>\r\n    <% }else if(adtype==VAR_ADTYPE.PSJ){%>\r\n    <!-- 压流广告位 -->\r\n    <gpdiv data-role="<%=gpAd%>" class="<%=hideClass%>" style="z-index:2;position: absolute;">\r\n        <!-- 压流展示canvas -->\r\n    </gpdiv>\r\n    <% }%>\r\n</gpdiv>\r\n'},function(a,b,c){function d(a){var b=e.cookie.get("luin")||e.cookie.get("uin")||"",c=gpgp.getUrl("//dp3.qq.com/stdlog/?bid=10091006&"),d=a;this.getBaseParam=function(a){return gpgp.log("getBaseParam:",a),{appuser:e.cookie.get("appuser")||"",requestid:a.requestid,guid:a.passThrought.guid||"",pf:a.pf,pfEx:a.pf_ex,chid:a.chid,timestamp:+new Date,mvid:a.vid||"",videoDuration:a.duration||0,coverid:a.cid||"",qq:b,pversion:a.passThrought.v,live:0,version:a.version,ua:e.getUA(navigator.userAgent)}},this.parseOrderList=function(a){gpgp.log("parseOrderList:",a);var b=[],c=[],d=[],e=a.adList;if(e){var f="object"===gpgp.$.type(e)?[e]:e;gpgp.$(f).each(function(a,e){e.order_id&&e.duration&&(e.duration&&d.push(e.duration),e.image&&e.image.vid?c.push(e.image.vid):"array"===gpgp.$.type(e.image)&&e.image.length&&e.image[0].vid&&c.push(e.image[0].vid),b.push(e.order_id))})}return{oids:b,vids:c,videopt:d}},this.getBaseStepUrl=function(a){var b=this.getBaseParam(a);return c+gpgp.param2url(b)},this.setBaseStepUrl=function(a){this.baseStepUrl=this.getBaseStepUrl(a)},a&&this.setBaseStepUrl(a),this.reportStep=function(a,b,c){if(a){b||(b={});gpgp.log("dp3Report:",a,b,c);var e={};gpgp.log("reportStep",d,b),e.adtype=d.adtypeMap[b.adtype],e.isTrueView=b.trueview||!1,e.adid=b.adid;var f=this.parseOrderList(b);if(e.oid=f.oids.join(",")||"",e.vid=f.vids.join(",")||"",b.errorcode&&(e.errorcode=b.errorcode),1===a)e.adcost=b.adcost;else if(2===a)e.adfbt=c.adfbt||0,e.adtt=c.adtt||0,videopt=c.videopt||[],videott=c.videott||[],e.videopt=videopt.join(",")||"",e.videott=videott.join(",")||"",e.errorcode=c.errorcode||"",e.adclose=c.adclose||"",e.closetime=c.closetime||"",e.firstview=c.firstview||"",e.firstadview=c.firstadview||"";else if(3===a)e.adload=c.adload,e.tpindex=c.tpindex,e.oid=c.oid,e.errorcode=c.errorcode;else{if(4!==a)return;e.adclick=c.adclick,e.clicktime=c.clicktime}var g=gpgp.appendParamsToUrl(this.baseStepUrl,e);g+="&step="+a,this.report(g)}}}var e=c(3);d.prototype={report:function(a){a&&this.sendReport(a.url||a)},sendReport:function(a,b){var c="GP_REPORT"+gpgp.randomParam(),d=this[c]=new Image;d.onload=d.onerror=function(){b&&b(),delete this[c]},d.src=a}},a.exports=d},function(a,b,c){function d(a){gpgp.log("加载ViewMonitor"),this.api={url:"//ra.gtimg.com/web/viewability/viewability.js",reportData:null,startMonitor:null},this.target=a}d.prototype={init:function(){this.addEventListener()},initApi:function(a){var b=this;return gpgp.log("加载",b.api.url),gpgp.$.getScript(b.api.url,function(){gpgp.log("加载成功"),crystal&&crystal.startviewability&&(b.api.startMonitor=crystal.startviewability),a&&a.bind(b)()},function(){gpgp.log("加载失败")})},getReportData:function(a){gpgp.log("getReportData",a);var b=[];if(!(a&&a.reportUrlView&&a.reportUrlView.reportitem&&a.reportUrlView.reportitem.length>0))return this.api.reportData=null;for(var b=[],c=0;c<a.reportUrlView.reportitem.length;c++){var d;a.reportUrlView.reportitem[c]&&a.reportUrlView.reportitem[c].url&&(d=a.reportUrlView.reportitem[c].url),b.push(d)}return gpgp.log("objectID",this.target),this.api.reportData={objectID:this.target,reportItemUrl:b,oid:a.order_id,duration:a.duration,retry:0}},start:function(a){gpgp.log("startViewMonitor",a),this.getReportData(a),this.api.reportData&&(gpgp.log("startViewMonitor",this.api.reportData),this.api.startMonitor?this.api.startMonitor(this.api.reportData):this.initApi(function(){this.api.startMonitor(this.api.reportData)}))}},a.exports=d},function(a,b,c){(function(b){function c(a){b.apply(this,arguments)}gpgp.extend("HtAd",c,b),c.prototype.handleOrderByAdtype=function(a){},a.exports=c}).call(b,c(1))},function(a,b,c){(function(b){function c(a){b.apply(this,arguments)}gpgp.extend("ZcAd",c,b),c.prototype.handleOrderByAdtype=function(a){},a.exports=c}).call(b,c(1))},function(a,b,c){(function(b,c){function d(a){this.supportRichMedia="richMediaJs",b.apply(this,arguments),gpgp.log("new ZtAd")}gpgp.extend("ZtAd",d,b),d.prototype.getAdList=function(a){if(gpgp.log("getAdList",this.playList,a),this.currentAdInfo=this.playList[0],this.currentAdInfo){var b=this.currentAdInfo.richdata;b&&b.plugins&&(b.plugins.richMediaJs?this.resType="richMediaJs":this.resType="res")}},d.prototype.initUi=function(a,b,c){this.hasInit||(this.ui=new a(b,c,{adtype:this.adtype,dspName:""},this.adtype),this.hasInit=!0)},d.prototype.loadRes=function(a){if(!this.playList.length)return void this.reportAd(1);a=this.playList[0],this.currentAdInfo=a;var b=a.dsp_name||"";this.ui.dom.dspName.html(b);var d,e=this;return"array"===gpgp.$.type(a.image)&&(a.image=a.image[0]),d=a.image.url,this.size={width:parseInt(a.image.width),height:parseInt(a.image.height),adWidth:0,adHeight:0},this.resize(this.size.width,this.size.height),this.ui.dom.pauseAdClose.off("click").on("click",function(){e.stopAd()}),this.currentAdInfo.isRichMedia?(this.params.wrapper=this.ui.dom.gpAd[0],this.params.adWidth=this.size.adWidth,this.params.adHeight=this.size.adHeight,this.player=new c(this.params),this.loadReady=function(){this.playAd()},this.playComplete=function(){this.stopAd()},void this.player.loadAd({index:1,preload:!1,adItem:this.currentAdInfo,api:this},this)):void(d&&0===d.indexOf("http")&&(this.ui.dom.pauseAdImg.attr("src",d).css({width:"100%",height:"100%"}),this.ui.dom.pauseAdImg.off("click").on("click",function(){"N"===a.no_click&&a.link&&e.openAdLink("pauseAd")}),this.ui.dom.pauseAdImg[0].onload=function(){e.playAd()}))},d.prototype.playAd=function(){if(6!=this.playState){if(this.ui.show("adLayer"),this.ui.show("gpAd"),"richMediaJs"==this.resType)try{this.player.play()}catch(a){}this.reportAd(1)}},d.prototype.resize=function(a,b){if(this.size.adWidth=this.size.width,this.size.adHeight=this.size.height,this.size.adWidth>a||this.size.adHeight>b){var c=gpgp.getScale(this.size.adWidth,this.size.adHeight,a,b);this.size.adWidth*=c,this.size.adHeight*=c}if(this.ui.dom.gpAd.css({width:this.size.adWidth,height:this.size.adHeight,top:0,left:0,right:0,bottom:0,margin:"auto"}),"richMediaJs"==this.resType)try{this.player.resize(this.size.adWidth,this.size.adHeight)}catch(d){}},d.prototype.setSmallWindow=function(a){this.resize(a.width,a.height),gpgp.log("setSmallWindow",arguments.toString())},a.exports=d}).call(b,c(0),c(2))},function(a,b,c){(function(b,c){function d(a){this.supportRichMedia=["richMediaJs","res"],b.apply(this,arguments),gpgp.log("new IvbAd")}gpgp.extend("IvbAd",d,b),d.prototype.getAdList=function(a){if(this.currentAdInfo=this.playList[0],this.currentAdInfo){var b=this.currentAdInfo.richdata;b&&b.plugins&&(b.plugins.richMediaJs?this.resType="richMediaJs":this.resType="res")}},d.prototype.initUi=function(a,b,c){this.hasInit||(this.ui=new a(b,c,{adtype:this.adtype,dspName:this.currentAdInfo.dsp_name||"",resType:this.resType},this.adtype),this.hasInit=!0)},d.prototype.loadRes=function(a){if(this.reportAd(1),this.currentAdInfo&&this.currentAdInfo.richdata&&this.currentAdInfo.richdata.plugins){if(gpgp.log("ivb plugin:",this.currentAdInfo.richdata.plugins),"richMediaJs"==this.resType)return this.params.wrapper=this.ui.dom.gpAd[0],this.player=new c(this.params),this.loadReady=function(){gpgp.api.upBarrageZindex&&gpgp.api.upBarrageZindex(),this.ui.show("adLayer"),this.ui.show("gpAd");try{this.player.mute(!0)}catch(a){}this.player.play()},this.playComplete=function(){this.stopAd()},void this.player.loadAd({index:1,preload:!1,adItem:this.currentAdInfo,api:this},this);var b=this.currentAdInfo.richdata,d=parseInt(1e3*b.plugins.easeInTime)||5e3,e=parseInt(1e3*b.plugins.easeOutTime)||5e3,f=parseInt(1e3*b.plugins.stayTime);if(f=isNaN(f)?5e3:f,this.stepTime={1:d,2:e,3:f},this.richdata=b,"N"==b.plugins.needAdMark)return void this.startEndReport();this.size={width:1004,imgWidth:960,closeWidth:40,height:60},this.css={bottom:50,scale:1};var g=this;gpgp.log("player size:",g.gpDataset.playerWidth,g.gpDataset.playerHeight);var h=b.plugins.res[0].content;g.ui.dom.ivbAdImg.attr("src",h),this.ui.dom.ivbAdImg.off("click").on("click",function(){g.openAdLink()}),this.setPos({left:"initial"}),g.stepStart={},g.ui.dom.gpAd.on("mouseover",function(){clearTimeout(g.stepTimer),g.ui.dom.gpAd.css({right:g.ui.dom.gpAd.css("right")}),g.stepTime[g.step]-=new Date-g.stepStart[g.step]}).on("mouseout",function(){i(g.step,g.stepTime[g.step],!0)});var i=function(a,b,c){switch(g.step=a,g.stepTimer=null,a){case 0:gpgp.log("ivb move stop",+new Date),g.moveIvb(0,c),g.stopAd();break;case 1:g.stepStart[g.step]=+new Date,g.ui.dom.gpAd.css({transitionProperty:"right",transitionDuration:b+"ms"}),gpgp.log("ivb move in",+new Date),g.moveIvb(1,c),g.stepTimer=setTimeout(function(){i(2,e)},b+f);break;case 2:g.stepStart[g.step]=+new Date,g.ui.dom.gpAd.css({transitionDuration:b+"ms"}),gpgp.log("ivb move out",+new Date),g.moveIvb(2,c),g.stepTimer=setTimeout(function(){i(0)},b)}},j=0,k=function(){j++,j<2||(g.ui.show("adLayer"),g.ui.show("gpAd"),g.resize(g.gpDataset.playerWidth,g.gpDataset.playerHeight),g.fixBottom(),g.ui.dom.gpAd.css({right:-g.gpDataset.playerWidth}),i(1,d))};g.ui.dom.close.on("load",k),g.ui.dom.ivbAdImg.on("load",k),g.ui.dom.close.on("click",function(){
clearTimeout(g.stepTimer),gpgp.recordWisdomPoint("1000000",g.richdata.oid,g.richdata.loc),g.stopAd()})}},d.prototype.playError=function(){gpgp.log("IVB ERROR"),this.stopAd(!0)},d.prototype.startEndReport=function(a){var b=this.richdata,c=function(a,c){b.plugins[a]&&(c=c||0,setTimeout(function(){gpgp.sendReport(b.plugins[a])},c))};"start"!=a&&a||c("startReportUrl"),"end"==a&&c("endReportUrl"),a||c("endReportUrl",this.stepTime[1]+this.stepTime[2]+this.stepTime[3])},d.prototype.moveIvb=function(a,b){this.moveStep=a;var c=this;switch(a){case 0:c.ui.dom.gpAd.css({left:0,right:0}),b||c.startEndReport("end");break;case 1:var d=c.getAdWidth(),e=(c.gpDataset.playerWidth-d)/2;c.ui.dom.gpAd.css({right:e}),b||c.startEndReport("start");break;case 2:c.ui.dom.gpAd.css({right:c.gpDataset.playerWidth+parseInt(c.ui.dom.gpAd.css("width"))})}},d.prototype.getAdWidth=function(){var a=this.ui.dom.gpAd.width();return a},d.prototype.stopAd=function(){if("richMediaJs"==this.resType)try{gpgp.api.resetBarrageZindex()}catch(a){}b.prototype.stopAd.apply(this,arguments)},d.prototype.fixBottom=function(){var a,b=this,c=function(a){a?b.ui.dom.gpAd.css("bottom",b.css.bottom):b.ui.dom.gpAd.css("bottom",5)};gpgp.api.getControlStatus&&(a=gpgp.api.getControlStatus()),c(a)},d.prototype.setPos=function(a){if("richMediaJs"!=this.resType)this.ui&&this.ui.dom.gpAd.css(a);else try{this.player.setPos(a)}catch(b){}},d.prototype.resize=function(a,b,c,d){if("richMediaJs"!=this.resType){if(!(c>10&&d>10)&&this.ui){this.scale=gpgp.getScale(this.size.width,this.size.height,a/2,b),gpgp.log("scale:",this.scale);var e=function(a,b,c){return{width:a*c,height:b*c}};this.ui.dom.ivbAdImg.css(e(this.size.imgWidth,this.size.height,this.scale)),this.ui.dom.close.css(e(this.size.closeWidth,this.size.height,this.scale));var f=this.ui.dom.ivbAdImg.width()+this.ui.dom.close.width();gpgp.log("gpadwidth",f),this.ui.dom.gpAd.css({width:f}),this.moveStep>0&&this.moveIvb(this.moveStep,!0)}}else try{this.player.resize(a,b)}catch(g){}},d.prototype.setSmallWindow=function(a){this.resize(a.width,a.height),gpgp.log("setSmallWindow",arguments.toString())},a.exports=d}).call(b,c(0),c(2))},function(a,b,c){(function(b){function c(a){b.apply(this,arguments)}gpgp.extend("YaliuAd",c,b),c.prototype.getAdList=function(a){a.scene_info=this.adJson.scene_info,a.adLoc=this.adJson.adLoc,this.playList=this.assemble(a).playList;var b=this.playList;this.dataset.isShowingCidArr=[],this.dataset.hasReportCids={},this.dataset.yaliuCidArr=[],this.dataset.yaliuRenderTimers={},this.dataset.yaliuFodderStart={},this.dataset.isFilmPausing=!1,this.dataset.hasResizedCidArr=[];for(var c=this,d=b.length-1;d>=0;d--){for(var e=b[d],f=e.material.length-1;f>=0;f--){var g=e.material[f].url;".mp4"===g.substring(g.length-4).toLowerCase()?e.mp4_index=f:".json"===g.substring(g.length-5).toLowerCase()&&(e.png_index=f)}e.vid=c.gpDataset.vid,this.dataset.hasReportCids[e.cid]=!1,this.dataset.yaliuCidArr.push(e.cid)}},c.prototype.sendAdInfo=function(){for(var a=this.playList,b=[],c=this,d=0;d<a.length;d++){var e={};e.isSceneAd=!a[d].anchor.interval||""==a[d].anchor.interval,e.cid=a[d].cid,e.oid=a[d].order_id,e.duration=a[d].duration,e.begin=a[d].anchor.begin,e.end=e.isSceneAd?(parseInt(e.begin)+parseInt(e.duration)).toString():(parseInt(1e3*c.gpDataset.duration)-parseInt(a[d].anchor.end)).toString(),e.interval=a[d].anchor.interval,b.push(e)}this.broadcast("getAdInfoEvt",{adtype:this.adtype,playList:b})},c.prototype.initUi=function(a,b,c){if(!this.hasInit){this.ui=new a(b,c,{adtype:this.adtype},this.adtype),this.hasInit=!0;var d={};d.clientWidth=this.gpDataset.playerWidth,d.clientHeight=this.gpDataset.playerHeight,d.clientTop=0,d.clientLeft=0,this.dataset.player=d,this.dataset.lastPlayerClientWidth=d.clientWidth,this.dataset.lastPlayerClientHeight=d.clientHeight}},c.prototype.loadRes=function(a){!a||!a.length},c.prototype.assemble=function(a){for(var b={playList:[],adLoc:this.adJson.adLoc},c=0;c<a.adList.length;c++){var d=a.adList[c].anchor_binding;if(d)for(var e=0;e<d.length;e++){var f=a.adList[c].order_id,g=d[e].cid,h=d[e].anchor_rule_id,i=d[e].anchor_id,j=this.assembleEachOrder(f,g,h,i,a.adList[c],a.scene_info.anchor_rule);b.playList.push(j)}}return b},c.prototype.assembleEachOrder=function(a,b,c,d,e,f){var g=JSON.parse(JSON.stringify(e));delete g.creative,delete g.anchor_binding;for(var h=0;h<e.creative.length;h++){var i=e.creative[h];if(i.id==b)for(var j in i)"id"==j?g.cid=i[j]:g[j]=i[j]}for(var h=0;h<e.anchor_binding.length;h++){var k=e.anchor_binding[h];k.cid==b&&k.anchor_rule_id==c&&k.anchor_id==d&&(g.link=k.link,g.report_url=k.report_url,g.anchor_rule_id=c)}for(var h=0;h<f.length;h++)if(f[h].id==c)for(var l=f[h].anchor,m=0;m<l.length;m++)l[m].id==d&&(g.anchor=l[m],g.anchor_rule_type=f[h].type);return g},c.prototype.preLoadAd=function(a,b){var c=this.getOrderData(b);c&&("pc"==this.gpDataset.pf_ex?(this.requestMP4(c.material[c.mp4_index].url,c.cid),this.broadcast("reportDp3B",{bid:"10091000",step:"3",type:"mp4"})):(this.requestPNG(c.material[c.png_index].url,c.cid),this.broadcast("reportDp3B",{bid:"10091000",step:"3",type:"png"})),this.dataset.yaliuFodderStart[c.cid]=(new Date).getTime())},c.prototype.loadReady=function(a){this.broadcast("loadReadyEvt",{adtype:this.adtype,cid:a})},c.prototype.playAd=function(a,b,c){if(!(this.dataset.isShowingCidArr.indexOf(c)>-1)||this.dataset.isFilmPausing){this.dataset.isShowingCidArr.indexOf(c)==-1&&this.dataset.isShowingCidArr.push(c),this.dataset.isFilmPausing=!1;var d=this.getOrderData(c);this.ui.show("gpAd"),this.ui.show("adLayer"),"pc"==this.gpDataset.pf_ex&&this.renderYaliuAdByMP4(d,d.mp4_index,b)}},c.prototype.reportAd=function(a){this.reportAdByData(a)},c.prototype.getOrderData=function(a){for(var b=this.playList,c=null,d=0;d<b.length;d++)b[d].cid==a&&(c=b[d]);return c},c.prototype.requestMP4=function(a,b){var c=this;0==a.indexOf("http://")&&(a="https://"+a.split("http://")[1]);var c=this,d=this.getOrderData(b),e=d.mp4_index,f=d.material[e].width/2,g=d.material[e].height;d.anchor.pos_w=f/1920,d.anchor.pos_h=g/1080;var h=document.createElement("video");h.muted=!0,d.videoElement=h,h.style.width=f+"px",h.style.height=g+"px";var i=new XMLHttpRequest;i.open("GET",a,!0),i.responseType="arraybuffer",i.timeout="6000",i.send(),i.onload=function(){if(200===i.status){var a=new Uint8Array(i.response),d=window.URL.createObjectURL(new Blob([a],{type:"video/mp4"}));h.src=d,c.loadReady(b),c.broadcast("reportDp3B",{bid:"10091000",step:"4",errorcode:"100",index:b,type:"mp4",cost:(new Date).getTime()-c.dataset.yaliuFodderStart[b]})}},i.onerror=function(){c.broadcast("reportDp3B",{bid:"10091000",step:"4",errorcode:"101",type:"mp4",cost:(new Date).getTime()-c.dataset.yaliuFodderStart[b]})}},c.prototype.requestPNG=function(a,b){0==a.indexOf("http://")&&(a="https://"+a.split("http://")[1]);var c=this;gpgp.$.jsonp({url:a,dataType:"jsonp",callbackParameter:"callback",callback:"adplayerYaliuJsonpCallback",timeout:2e4,cache:!0}).done(function(a){var d=c.getOrderData(b),e=d.png_index;d.material[e].data=a,d.offscreenCanvasArr=[];var f=a.width,g=a.height;d.anchor.pos_w=f/1920,d.anchor.pos_h=g/1080;for(var h=0;h<a.frames.length-1;h++){var j=a.frames[h],k="data:image/png;base64,"+a.data[j];c.getOffscreenCanvas(k,h,f,g,i,b)}c.loadReady(b),c.broadcast("reportDp3B",{bid:"10091000",step:"4",errorcode:"100",index:b,type:"png",cost:(new Date).getTime()-c.dataset.yaliuFodderStart[b]})}).fail(function(a,d){c.broadcast("reportDp3B",{bid:"10091000",step:"4",errorcode:"101",type:"png",cost:(new Date).getTime()-c.dataset.yaliuFodderStart[b]})})},c.prototype.getOffscreenCanvas=function(a,b,c,d,e,f){var g=this,h=document.createElement("img");h.src=a,h.onload=function(){var a=document.createElement("canvas"),f=a.getContext("2d");a.width=c,a.height=d,f.drawImage(h,0,0,c,d),g.playList[e].offscreenCanvasArr[b]=a}},c.prototype.renderYaliuAdByMP4=function(a,b,c){var d=c-a.anchor.begin/1e3;if(!(d<0)){var e=this,f=this.ui.dom.gpAd,g="yaliuad-"+a.cid,h="yaliu-sample-canvas-"+a.cid,i="yaliu-ad-canvas-"+a.cid,j='<gpdiv data-role="'+g+'" style="pointer-events: auto"><canvas data-role="'+h+'" style="display:none;"></canvas><canvas data-role="'+i+'" style="position:absolute;"></canvas></gpdiv>',k=f.find("[data-role="+g+"]");k[0]||f.append(j);var l=a.videoElement,m=f.find("[data-role="+h+"]"),n=f.find("[data-role="+i+"]"),o=m[0].getContext("2d"),p=n[0].getContext("2d");l.setAttribute("crossOrigin","*");var q=this.dataset.player,r=a.material[b].width,s=a.material[b].height,t=q.clientWidth*a.anchor.pos_w,u=q.clientHeight*a.anchor.pos_h,v=q.clientWidth*a.anchor.pos_x+q.clientLeft,w=q.clientHeight*a.anchor.pos_y+q.clientTop;q.clientWidth,q.clientHeight;if(m.attr("width",r),m.attr("height",s),n.attr("width",r/2),n.attr("height",s),n.css({left:v,top:w,width:t,height:u,display:"block"}),k.css({display:"block"}),f.css({display:"block"}),"N"==a.no_click&&(n.css({cursor:"pointer"}),n.off("click").on("click",function(){window.open(a.link),e.broadcast("openAdLink",a)})),a.anchor.interval&&""!=a.anchor.interval?l.currentTime=.1:l.currentTime=d,this.dataset.hasReportCids[a.cid]&&a.anchor.interval&&""!=a.anchor.interval||(e.reportAd(a),this.dataset.hasReportCids[a.cid]=!0),this.dataset.yaliuRenderTimers[a.cid])l.play();else{l.play();var x=setInterval(function(){return z(a.cid),l.ended?(a.anchor.interval&&""!=a.anchor.interval?(e.stopAdOneByOne(a.cid,!1),setTimeout(function(){if(e.dataset.isShowingCidArr&&e.dataset.isShowingCidArr.indexOf(a.cid)>-1){var b=e.dataset.isShowingCidArr.indexOf(a.cid);b>-1&&e.dataset.isShowingCidArr.splice(b,1)}},a.anchor.interval)):e.stopAdOneByOne(a.cid,!0),clearInterval(x),void(x=null)):(e.dataset.isFilmPausing?l.pause():l.play(),void y())},1e3/24);this.dataset.yaliuRenderTimers[a.cid]=x}var y=function(){o.drawImage(l,0,0,r,s);for(var a=o.getImageData(r/2,0,r/2,s),b=o.getImageData(0,0,r/2,s),c=b.data.length/4,d=0;d<c;d++)b.data[4*d+3]=a.data[4*d+1];p.putImageData(b,0,0)},z=function(b){var c=e.dataset.player;(e.dataset.lastPlayerClientWidth!=c.clientWidth||e.dataset.lastPlayerClientHeight!=c.clientHeight||e.dataset.lastPlayerClientWidth==c.clientWidth&&e.dataset.lastPlayerClientHeight==c.clientHeight&&e.dataset.hasResizedCidArr.indexOf(b)==-1)&&(t=c.clientWidth*a.anchor.pos_w,u=c.clientHeight*a.anchor.pos_h,v=c.clientWidth*a.anchor.pos_x+c.clientLeft,w=c.clientHeight*a.anchor.pos_y+c.clientTop,n.css({position:"absolute",display:"block",left:v,top:w,width:t,height:u}),e.dataset.lastPlayerClientWidth=c.clientWidth,e.dataset.lastPlayerClientHeight=c.clientHeight,e.dataset.hasResizedCidArr.push(b)),n.css({display:"block"})}}},c.prototype.renderYaliuAdByPNG=function(a,b,c){var d=this,e=c-a.anchor.begin/1e3;if(!(e<0)){var f="yaliuad-"+a.cid,g=this.ui.dom.gpAd;if("N"==a.no_click)var h='<canvas data-role="'+f+'" style="display:none;pointer-events:auto;cursor:pointer;"></canvas>';else var h='<canvas data-role="'+f+'" style="display:none;"></canvas>';var i=g.find("[data-role="+f+"]");i[0]||(g.append(h),i=g.find("[data-role="+f+"]"));var j=i[0].getContext("2d"),k=a.material[b].data.frames;if(a.anchor.interval&&""!=a.anchor.interval)var l=0;else var l=parseInt(e)*a.material[b].data.fps;var m={};m.clientWidth=this.gpDataset.playerWidth,m.clientHeight=this.gpDataset.playerHeight,m.clientTop=0,m.clientLeft=0;var n=a.material[b].data.width,o=a.material[b].data.height,p=m.clientWidth*a.anchor.pos_w,q=m.clientHeight*a.anchor.pos_h,r=m.clientWidth*a.anchor.pos_x+m.clientLeft,s=m.clientHeight*a.anchor.pos_y+m.clientTop;j.clearRect(0,0,p,q),i.attr("width",p),i.attr("height",q),i.css({position:"absolute",display:"block",left:r,top:s}),g.css({display:"block"}),"N"==a.no_click&&i.off("click").on("click",function(){window.open(a.link),this.broadcast("openAdLink",a)}),this.dataset.hasReportCids[a.cid]&&a.anchor.interval&&""!=a.anchor.interval||(d.reportAd(a),this.dataset.hasReportCids[a.cid]=!0);var t=(document.createElement("img"),a.offscreenCanvasArr),u=(m.clientWidth,m.clientHeight,setInterval(function(){w(),v(d.dataset.isFilmPausing?!1:!0),(l==k.length-1||l>k.length-1)&&(a.anchor.interval&&(d.dataset.yaliuCycleTimers[a.cid]=setTimeout(function(){var b=this.dataset.isShowingCidArr.indexOf(a.cid);b>-1&&this.dataset.isShowingCidArr.splice(b,1)},a.anchor.interval)),i.css({display:"none"}),clearInterval(u),u=null)},1e3/a.material[b].data.fps));this.dataset.yaliuRenderTimers[a.cid]=u;var v=function(a){j.clearRect(0,0,p,q),j.drawImage(t[l],0,0,n,o,0,0,p,q),a&&l++},w=function(){var b=d.dataset.player;d.dataset.lastPlayerClientWidth==b.clientWidth&&d.dataset.lastPlayerClientHeight==b.clientHeight||(p=b.clientWidth*a.anchor.pos_w,q=b.clientHeight*a.anchor.pos_h,r=b.clientWidth*a.anchor.pos_x,s=b.clientHeight*a.anchor.pos_y,i.css({position:"absolute",display:"block",left:r,top:s,width:p,height:q}),d.dataset.lastPlayerClientWidth=b.clientWidth,d.dataset.lastPlayerClientHeight=b.clientHeight),i.css({display:"block"})}}},c.prototype.resize=function(a,b,c,d){this.dataset.hasResizedCidArr=[],this.dataset.player&&(this.dataset.player.clientWidth=a,this.dataset.player.clientHeight=b,this.dataset.player.clientLeft=c,this.dataset.player.clientTop=d)},c.prototype.pauseAd=function(a){this.dataset.isFilmPausing=!0},c.prototype.stopAd=function(a,b,c){if(this.ui)if(c)this.stopAdOneByOne(c);else{for(var d=0;d<this.dataset.yaliuCidArr.length;d++)this.stopAdOneByOne(this.dataset.yaliuCidArr[d]);this.ui.hide("gpAd")}},c.prototype.stopAdOneByOne=function(a,b){if(this.ui){b="undefined"==typeof b;var c=this.ui.dom.gpAd;if(this.dataset.yaliuRenderTimers&&this.dataset.yaliuRenderTimers[a]&&(clearInterval(this.dataset.yaliuRenderTimers[a]),this.dataset.yaliuRenderTimers[a]=null),this.dataset.yaliuCycleTimers&&this.dataset.yaliuCycleTimers[a]&&(clearTimeout(this.dataset.yaliuCycleTimers[a]),this.dataset.yaliuCycleTimers[a]=null),b&&this.dataset.isShowingCidArr&&this.dataset.isShowingCidArr.indexOf(a)>-1){var d=this.dataset.isShowingCidArr.indexOf(a);d>-1&&this.dataset.isShowingCidArr.splice(d,1)}var e=c.find("[data-role=yaliuad-"+a+"]");e[0]&&e.css({display:"none"}),this.broadcast("stopAdEvt",{adtype:this.adtype})}},a.exports=c}).call(b,c(0))}])}});
/*! Txplayer - v3.0.0 - 2018-09-07 15:20:01
 * Copyright (c) 2018
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(250)},250:function(a,b,c){function d(a){f=Txplayer.$,this.dataset={},this.context=a,this.init()}var e=c(251),f=Txplayer.$,g=Txplayer.util;d.prototype={init:function(){if(!this.context.config.official){this.write()}},write:function(){var a={goTencentVideo:"txp-ui-endtip-button",tipMod:"txp-ui-endtip-mod",background:"txp-ui-endtip-background",title:"txp-ui-endtip-title",label:"txp-ui-endtip-label"},b=f.tmpl(e,a);this.context.dataset.$playermod.append(b),this.dataset.$mod=this.context.dataset.$playermod.find("[data-role=${role}]".replace("${role}",a.tipMod)),this.dataset.$title=this.dataset.$mod.find("[data-role=${role}]".replace("${role}",a.title)),this.dataset.$button=this.dataset.$mod.find("[data-role=${role}]".replace("${role}",a.goTencentVideo)),this.dataset.$background=this.dataset.$mod.find("[data-role=${role}]".replace("${role}",a.background)),this.dataset.$label=this.dataset.$mod.find("[data-role=${role}]".replace("${role}",a.label)),this.addEventListener()},update:function(a){this.dataset.$title.html(g.xss(this.getTitle()));var b=g.getPcVideoPosterByVid(this.context.dataset.vid);this.dataset.$background.css({background:"url(${url}) no-repeat".replace("${url}",b),"background-size":"100% 100%"}),a&&this.dataset.$label.html("开通vip免费看")},show:function(a){var b=this.context.dataset.getinfoJSON.exem;4!=b&&(a?this.dataset.$title.html(a):this.dataset.$title.html(this.getTitle()),this.dataset.$mod.removeClass(Txplayer.dataset.hideClass))},hide:function(){this.dataset.$mod.addClass(Txplayer.dataset.hideClass)},getTitle:function(){var a,b=this.context.dataset.title;return b||(a=this.context.dataset.getinfoJSON,a&&a.vl&&a.vl.vi&&a.vl.vi[0]&&a.vl.vi[0].ti&&(b=a.vl.vi[0].ti)),b},openTencentVideo:function(){var a=0;this.context.dataset.currentTime&&(a=parseInt(this.context.dataset.currentTime));var b=g.getTxVideoPageURLByVid(this.context.dataset.vid,0,a);window.open(b)},addEventListener:function(){var a=this;if(this.context.msg.on("videoPause",function(b){a.context.dataset.canPlayTime&&a.context.dataset.currentTime>=a.context.dataset.canPlayTime&&a.show()}),this.context.msg.on("videoEnd",function(){a.context.dataset.canPlayTime&&a.context.dataset.currentTime>=a.context.dataset.canPlayTime&&a.show()}),this.context.config.showOpenVIPGuide||this.context.msg.on("pause",function(){var b=a.context.dataset.getinfoJSON;!b||b.preview||1!=b.exem&&2!=b.exem&&83!=b.iRetCode||a.context.config.showOpenVIPGuide||(a.update(!0),a.show())}),this.context.msg.on("videoPlay",function(b){a.hide()}),this.context.msg.on("getVideoUrlSuccess",function(b){a.update()}),!this.context.config.showOpenVIPGuide&&this.context.dataset.getinfoJSON){a.update();var b=this.context.dataset.getinfoJSON;b.preview||1!=b.exem&&2!=b.exem&&83!=b.iRetCode||a.context.config.showOpenVIPGuide||(a.update(!0),a.show())}this.dataset.$button.off("click").on("click",function(){a.openTencentVideo()}),this.dataset.$title.off("click").on("click",function(){a.openTencentVideo()})}},Txplayer.register("UiUnofficialEndTip",d)},251:function(a,b){a.exports='<txpdiv class="txp_overlay_next txp_overlay_next_complete <%=Txplayer.dataset.hideClass%>" data-role="<%=tipMod%>">\r\n\t<div class="txp_next_poster" data-role="<%=background%>" style="background-image:url()"></div>\r\n\t<txpdiv class="txp_next_content">\r\n\t\t<txpdiv class="txp_label" data-role="<%=label%>">腾讯视频观看完整版</txpdiv>\r\n\t\t<txpdiv class="txp_next_title" style="cursor:pointer;" data-role="<%=title%>"></txpdiv>\r\n\t\t<button class="txp_btn txp_btn_play_lg" data-status="play" data-role="<%=goTencentVideo%>">\r\n\t\t\t<svg class="txp_icon txp_icon_play" viewBox="0 0 36 36" >\r\n\t\t\t\t<use class="txp_svg_symbol txp_svg_play" xlink:href="<%=svgPrefix%>#txp_svg_play" />\r\n\t\t\t</svg>\r\n\t\t\t<svg class="txp_icon_cirlce" viewBox="0 0 72 72" >\r\n\t\t\t\t<circle r="34" cy="36" cx="36"></circle>\r\n\t\t\t</svg>\r\n\t\t</button>\r\n\t</txpdiv>\r\n</txpdiv>'}});
/*! Txplayer - v3.0.0 - 2018-09-07 15:20:01
 * Copyright (c) 2018
 * Powered by Tencent-Video Web Front End Team 
*/
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}({0:function(a,b,c){a.exports=c(208)},208:function(a,b,c){function d(a){f=Txplayer.$,this.context=a,this.dataset={},this.init()}function e(){var a=new Date;return a.getFullYear()+""+(a.getMonth()+1)+a.getDate()}var f,g=Txplayer.util,h=c(209),i=c(211),j=c(212),k=d.prototype,l={threeTimes:{name:"threeTimes",icon:"iconLightning",title:"感受3倍流畅度"},playRate:{name:"playRate",icon:"iconLightning",title:"倍速播放视频"},freeDefinition:{name:"freeDefinition",icon:"iconHd",title:"免费享受蓝光播放"},sign:{name:"sign",icon:"iconVipStar",title:"连续签到5天送VIP"},update:{name:"update",icon:"iconUpdate",title:"剧集自动更新下载"},preWatch:{name:"preWatch",icon:"iconClock",title:"提前一小时追剧"}},m={threeTimes:{cur:0,max:2,flag:0},playRate:{cur:0,max:2,flag:0},freeDefinition:{cur:0,max:1,flag:0},sign:{cur:0,max:1,flag:0},update:{cur:0,max:1,flag:0},preWatch:{cur:0,max:1,flag:0},_time:+new Date,queue:[]},n=10,o=300,p=1800;k.enable=function(){return"v.qq.com"==location.hostname&&(/v.qq.com\/x\/cover|page\//.test(location.href)||/v.qq.com(\/*\w*)\/p\/topic\//.test(location.href))},k.init=function(){var a=this;if(this.enable()){var b=e(),c=this.getData();c?this.dataset.settings=c:this.dataset.settings=m;var d=this.dataset.settings,f=parseInt(b,10)-parseInt(d._time,10);["freeDefinition","sign","playRate","threeTimes","update","preWatch"].forEach(function(a){var c=d[a],e=c.time||parseInt(b,10),g=parseInt(b,10)-parseInt(e,10);c.flag&&g>=3&&(c.flag=0,delete c.time),f>=1&&(c.cur=0)}),f>=1&&a.setData({name:"queue",value:[]}),d._time=b,this.setData({name:"_time",value:b}),this.dataset.playedTime=0,this.dataset.queueTime=0,this.dataset.seekCount=0,this.dataset.queue=[],this.write(),this.addEventListeners()}},k.write=function(){var a=this.dataset.renderData={popup:"open-client-popup",popupContent:"open-client-popup-content",iconHd:"open-client-icon-hd",iconUpdate:"open-client-icon-update",iconClock:"open-client-icon-clock",iconLightning:"open-client-icon-lightning",iconVipStar:"open-client-icon-vip-start",title:"open-client-title",close:"open-client-close",btn:"open-client-btn"},b=f.tmpl(i,a);this.context.dataset.$playermod.append(b);for(var c in this.dataset.renderData)this.dataset.renderData.hasOwnProperty(c)&&(this.dataset["$"+c]=this.context.dataset.$playermod.find('[data-role="'+this.dataset.renderData[c]+'"]'));this.dataset.$icons=this.dataset.$popup.find(".txp_popup_download_icon")},k.addEventListeners=function(){var a={},b=this,c=b.dataset.settings;this.dataset.definitionList=[],a["videoPlay.clientbubble"]=function(){var a=b.context.userApi.getDefinitionList();a&&a.length>0&&(b.dataset.definitionList=a.map(function(a){return a.name}))},a["videoTimeUpdate.clientbubble"]=function(){b.dataset.playedTime++,!c.freeDefinition.flag&&c.freeDefinition.cur<c.freeDefinition.max&&!b.isVip()&&b.isPay()&&b.dataset.playedTime==n&&b.dataset.definitionList.indexOf("fhd")>-1&&(c.freeDefinition.cur++,b.handleShow("freeDefinition")),!c.sign.flag&&c.sign.cur<c.sign.max&&!b.isVip()&&b.dataset.playedTime==n&&!b.isPay()&&(c.sign.cur++,b.handleShow("sign")),!c.update.flag&&c.update.cur<c.update.max&&b.dataset.playedTime%p==0&&(c.update.cur++,b.handleShow("update")),!c.preWatch.flag&&c.preWatch.cur<c.preWatch.max&&b.dataset.playedTime%p==0&&(c.preWatch.cur++,b.handleShow("preWatch")),0!=b.dataset.queueTime&&b.dataset.queueTime%p==0&&b.handleQueueShow("timeupdate"),b.dataset.queueTime++},a["seekStart.clientbubble"]=function(){b.dataset.seekCount++,!c.playRate.flag&&c.playRate.cur<c.playRate.max&&3==b.dataset.seekCount&&(c.playRate.cur++,b.handleShow("playRate"),b.dataset.seekCount=0),clearTimeout(b.dataset._seekCountHandle),b.dataset._seekCountHandle=setTimeout(function(){b.dataset.seekCount=0},1e3*o)},a["videoSeeking.clientbubble"]=function(){clearTimeout(b.dataset._seekingHandle),b.dataset._seekingHandle=setTimeout(function(){3===b.context.dataset.playState&&b.context.dataset.currentTime&&!c.playRate.flag&&c.threeTimes.cur<c.threeTimes.max&&(c.threeTimes.cur++,b.handleShow("threeTimes"))},1e3)},a["videoEnd.clientbubble"]=function(){b.dataset.seekCount=0},this.dataset.eventsList=a,f.each(a,function(a,c){b.context.msg.on(a,c)}),this.dataset.$popupContent.on("mouseenter",function(a){b.dataset.$popup.hasClass("txp_hover")||b.dataset.$popup.addClass("txp_hover"),b.handleMotion(!0)}),this.dataset.$popup.on("mouseenter",function(a){clearTimeout(b.dataset.autoHideHandle)}).on("mouseleave",function(){b.dataset.$popup.hasClass("txp_hover")&&b.dataset.$popup.removeClass("txp_hover"),b.handleMotion(),setTimeout(function(){b.hide()},300)}).on("click",function(a){a.preventDefault()}),this.dataset.$btn.on("click",function(){var a=b.context.dataset.vid||"",c=b.context.dataset.cid||"",d="",e=Math.max(b.context.dataset.currentTime-5,0),f=b.getRfId()||"",g="web.vkadun";"freeDefinition"===b.dataset.currentType&&(d="fhd"),h({support:!0,atag:"vkadun",sso:"qqlive://sso/vbarid="+c+"&videoid="+a+(d?"&defn="+d:"")+"&start="+e+"&rfid="+f+"&atag="+g,success:function(){b.context.msg.broadcast("pause"),b.context.msg.broadcast("userPausePlayer")},error:function(){location.href="//node.video.qq.com/x/api/download_pc"}}),b.context.msg.broadcast("reportUsrAction",{usr_action:"bubble-click-"+b.dataset.currentType}),b.hide()}),this.dataset.$close.on("click",function(){b.setData({name:b.dataset.currentType,key:"flag",value:1}),b.setData({name:b.dataset.currentType,key:"time",value:e()}),b.hide(),b.context.msg.broadcast("reportUsrAction",{usr_action:"bubble-close-"+b.dataset.currentType})})},k.getFromRecent=function(){var a=this.getData("queue")||[];return 0===a.length?null:a.length>0?a[0]:void 0},k.pushToRecent=function(a){var b=this.getData("queue")||[];b.push(a),this.setData({name:"queue",value:b})},k.updateRecent=function(a){var b=a.key+"."+a.time,c=this.getData("queue")||[];c.length&&(c.forEach(function(c){c.key+"."+c.time===b&&(c.show=a.show)}),this.setData({name:"queue",value:c}))},k.shiftFromRecent=function(a){var b=this.getData("queue")||[];b.length&&(b.shift(),this.setData({name:"queue",value:b}))},k.handleQueueShow=function(a){var b=this.getFromRecent();if(b&&!b.show)b.show=1,this.show(l[b.key]),this.handleMotion(),this.dataset.currentType=b.key,this.updateRecent(b),this.dataset.queueTime=0,this.context.msg.broadcast("reportUsrAction",{usr_action:"bubble-show-"+this.dataset.currentType});else if(b&&b.show){var c=+new Date,d=c-b.time;d>=1e3*p&&(this.shiftFromRecent(),this.handleQueueShow("timeout"))}},k.handleShow=function(a){var b=this.dataset.settings[a],c=l[a],d=+new Date;this.setData({name:c.name,key:"cur",value:b.cur}),this.pushToRecent({key:a,time:d,show:0});var e=this.getData("queue")||[];1===e.length&&this.handleQueueShow("handleShow")},k.hide=function(){this.dataset.$popup.addClass(Txplayer.dataset.hideClass).removeClass("txp_hover")},k.autoHide=function(){var a=this;clearTimeout(this.dataset.autoHideHandle),this.dataset.autoHideHandle=setTimeout(function(){a.hide()},1e4)},k.show=function(a){this.dataset.windows=!1,a=a||{};var b=a.icon||"iconLightning",c=a.title||"感受3倍流畅度";this.dataset.$title.text(c),this.dataset.$icons.addClass(Txplayer.dataset.hideClass),this.dataset["$"+b].removeClass(Txplayer.dataset.hideClass),this.dataset.$popup.removeClass(Txplayer.dataset.hideClass),this.autoHide(),this.context.msg.broadcast("hideUiTips")},k.handleMotion=function(a){var b=this;window.anime?this.motion(a):this.loadAnimeLib(function(){window.anime&&b.motion(a)})},k.loadAnimeLib=function(a){a=a||function(){},g.loadScript({url:"//vm.gtimg.cn/tencentvideo/txp/js/anime.js",onsuccess:a})},k.motion=function(a){for(var b=[],c=0;c<4;c++)try{var d=window.anime.path("#txp_popup_download_path"+(c+1)+" path"),e="normal";c>0&&(e="reverse"),b[c]=window.anime({targets:".txp_popup_download_dot"+(c+1),translateX:d("x"),translateY:d("y"),rotate:d("angle"),easing:"linear",duration:function(b){return a?2e3:f(b).data("duration")},direction:e,loop:!0})}catch(g){}},k.getRfId=function(){return Txplayer.util.getData(j.RFID)||Txplayer.util.getData(Txplayer.dataset.localStorageKey.adRfid)},k.isWideMode=function(){return this.context.dataset.$playermod.parents(".player_container_wide").length>0},k.isPay=function(){var a=this.context.userApi.getUserPayStatus();return 0==a||1==a||2==a},k.isVip=function(){var a=!1;return this.context&&this.context.config&&"function"===f.type(this.context.config.getUserType)&&(a=2==this.context.config.getUserType()),a},k.getData=function(a){var b=Txplayer.dataset.localStorageKey.openClientBubble,c=Txplayer.util.getData(b);if(c)try{c=Txplayer.$.parseJSON(c)}catch(d){c=null}return a?c&&c[a]:c},k.setData=function(a){var b=Txplayer.dataset.localStorageKey.openClientBubble,c=this.dataset.settings;"undefined"!=typeof a.key?c[a.name][a.key]=a.value:c[a.name]=a.value,Txplayer.util.setData(b,JSON.stringify(c))},Txplayer.register("UiOpenClientBubble",d)},209:function(a,b,c){function d(a){var b="qqlivechannel=channel1."+a;if(Txplayer.util.browser.ie){var c=new Date;c.setTime(c.getTime()+864e5),document.cookie=b+";path=/;expires="+c.toGMTString()}else{var d=Txplayer.$("<input>");Txplayer.$("body").append(d),d.css({position:"absolute",left:"-9999px"}),d.val(b),d.css({top:Txplayer.$(window).scrollTop()+"px"}),d.get(0).focus(),d.get(0).setSelectionRange(0,b.length),document.queryCommandSupported&&document.queryCommandSupported("copy")&&document.execCommand("copy",!0),d.remove()}}var e=c(210);a.exports=function(a){if(a.support&&a.sso){try{d(a.atag)}catch(b){}e(function(b){b&&b.exist().done(function(){b.open(a.sso),a.success&&a.success()}).fail(function(){a.error&&a.error()})})}}},210:function(a,b){var c=[],d=!1,e=0;a.exports=function(a){if(e)return void a(e);if(c.push(a),!d){if(d=!0,"qq.com"!=document.domain)throw new Error("document.domain is not qq.com");var b=document.createElement("iframe");b.src="javascript:'<script>window.onload=function(){document.write(\\'<script>document.domain=\\\"qq.com\\\";<\\\\/script>\\');document.close();};</script>'",b.style.cssText="display:none;",document.body.appendChild(b),b.getClient=function(a){e=a;for(var b=c.shift();b;)b&&b(a),b=c.shift()},b.src="//v.qq.com/iframe/client.html"}}},211:function(a,b){a.exports='<txpdiv class="txp_popup_download txp_none" data-role="<%=popup%>">\r\n    <txpdiv class="txp_popup_download_content" data-role="<%=popupContent%>">\r\n        <txpdiv class="txp_popup_download_img txp_popup_download_img_vip">\r\n            <i class="txp_popup_download_icon" data-role="<%=iconHd%>">\r\n                <svg class="txp_icon txp_svg_hd" viewBox="0 0 28 28" width="28" height="28">\r\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_hd"></use>\r\n                </svg>\r\n            </i>\r\n            <i class="txp_popup_download_icon" data-role="<%=iconUpdate%>">\r\n                <svg class="txp_icon txp_svg_update" viewBox="0 0 28 28" width="28" height="28">\r\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_update"></use>\r\n                </svg>\r\n            </i>\r\n            <i class="txp_popup_download_icon" data-role="<%=iconClock%>">\r\n                <svg class="txp_icon txp_svg_clock" viewBox="0 0 28 28" width="28" height="28">\r\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_clock"></use>\r\n                </svg>\r\n            </i>\r\n            <i class="txp_popup_download_icon" data-role="<%=iconLightning%>">\r\n                <svg class="txp_icon txp_svg_lightning" viewBox="0 0 28 28" width="28" height="28">\r\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_lightning"></use>\r\n                </svg>\r\n            </i>\r\n            <i class="txp_popup_download_icon" data-role="<%=iconVipStar%>">\r\n                <svg class="txp_icon txp_svg_vip_star_lg" viewBox="0 0 28 28" width="28" height="28">\r\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#txp_svg_vip_star_lg"></use>\r\n                </svg>\r\n            </i>\r\n            <txpdiv class="txp_popup_download_cicle1"></txpdiv>\r\n            <txpdiv class="txp_popup_download_cicle2"></txpdiv>\r\n            <txpdiv id="txp_popup_download_path1">\r\n                <txpdiv class="txp_popup_download_dot1" data-duration="10000"></txpdiv>\r\n                <svg viewBox="0 0 75 75"  width="75" height="75" class="txp_none">\r\n                    <path fill="none" stroke-width="1" d="M31.5,67.8C17.9,66.8,7.8,52.6,8.9,36S21.8,6.7,35.4,7.7S59.1,22.9,58,39.5C57,56.1,45.1,68.8,31.5,67.8z"></path>\r\n                </svg>\r\n            </txpdiv>\r\n            <txpdiv id="txp_popup_download_path2">\r\n                <txpdiv class="txp_popup_download_dot2"  data-duration="8000"></txpdiv>\r\n                <svg viewBox="0 0 75 75"  width="75" height="75" class="txp_none">\r\n                    <path fill="none" stroke-width="1" d="M39,5.8c14.2,1.9,24.1,16.7,22.1,33C59.2,55.2,46,67,31.8,65.1c-14.2-1.9-24.1-16.7-22.1-33S24.8,3.9,39,5.8z"></path>\r\n                </svg>\r\n            </txpdiv>\r\n            <txpdiv id="txp_popup_download_path3">\r\n                <txpdiv class="txp_popup_download_dot3"  data-duration="9000"></txpdiv>\r\n                <svg viewBox="0 0 75 75"  width="75" height="75" class="txp_none">\r\n                    <path fill="none" stroke-width="1" d="M15.8,28.8C20.1,18,34,13.4,46.8,18.4S66.5,36.2,62.2,47S44,62.5,31.2,57.5S11.5,39.6,15.8,28.8z"></path>\r\n                </svg>\r\n            </txpdiv>\r\n            <txpdiv id="txp_popup_download_path4">\r\n                <txpdiv class="txp_popup_download_dot4"  data-duration="11000"></txpdiv>\r\n                <svg viewBox="0 0 75 75"  width="75" height="75" class="txp_none">\r\n                    <path fill="none" stroke-width="1"  d="M63.3,41.4c-1.7,13.5-16.5,22.8-33,20.8S1.8,47.6,3.6,34.1s16.5-22.8,33-20.8S65.1,27.9,63.3,41.4z"></path>\r\n                </svg>\r\n            </txpdiv>\r\n        </txpdiv>\r\n        <txpdiv class="txp_popup_download_text">\r\n            <txpdiv class="txp_label">使用腾讯视频PC客户端</txpdiv>\r\n            <txpdiv class="txp_title" data-role="<%=title%>">倍速观看视频</txpdiv>\r\n        </txpdiv>\r\n    </txpdiv>\r\n    <txpdiv class="txp_btn_download" data-role="<%=btn%>">立即体验</txpdiv>\r\n    <button class="txp_btn txp_btn_close" data-role="<%=close%>"></button>\r\n</txpdiv>'},212:function(a,b){a.exports={AD_DEBUG_URL:location.protocol+"//ca.gtimg.com/adplugin/js/gph5adplayer.js",AD_URL_PREFIX:location.protocol+"//vm.gtimg.cn/tencentvideo/txp/js/plugins/",RFID:"gp-rfid",LIVE_TYPE:0,AD_STATUS:{NOT_START:"not_start",REQUEST:"request",REQUEST_DONE:"request_done",READY:"ready",PLAYING:"playing",END:"end"},AD_LOC_TIME:{1:{type:"ivb",area:1}},PC_AD_TYPE:{"前贴":"LD|KB|PVL","中插":"ZC","后贴":"HT","暂停":"ZT","口播":"KB","压流":"PSJ",PPB:"PPB",PVL:"PVL",ivb:"ZI",PDF:"PDF"},MOBILE_AD_TYPE:{"前贴":"WL|WK","中插":"WC","后贴":"WH","暂停":"WZ","口播":"WK",ivb:"WI","压流":"WSJ"},VIDEO_AD_TYPE:"LD|KB|ZC|HT"}}});